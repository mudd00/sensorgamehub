# ğŸ® Sensor Game Hub v6.0 - part 1


> í”„ë¡œì íŠ¸ì˜ ëª¨ë“  ê²ƒì„ ì´í•´í•˜ê³  ë…ë¦½ì ìœ¼ë¡œ ê°œë°œí•  ìˆ˜ ìˆë„ë¡ ë•ëŠ” ì™„ì „í•œ ê°€ì´ë“œì…ë‹ˆë‹¤.

---

## ğŸ“‘ ëª©ì°¨

### Part 1: ì‹œì‘í•˜ê¸° (Getting Started)
- [1.1 í”„ë¡œì íŠ¸ ê°œìš”](#11-í”„ë¡œì íŠ¸-ê°œìš”)
- [1.2 í•µì‹¬ ê°œë… ì´í•´](#12-í•µì‹¬-ê°œë…-ì´í•´)
- [1.3 ë¡œì»¬ í™˜ê²½ ì„¤ì •](#13-ë¡œì»¬-í™˜ê²½-ì„¤ì •)
- [1.4 ì²« ì‹¤í–‰ ë° ë™ì‘ í™•ì¸](#14-ì²«-ì‹¤í–‰-ë°-ë™ì‘-í™•ì¸)
- [1.5 ê°œë°œ ë„êµ¬ ì„¤ì •](#15-ê°œë°œ-ë„êµ¬-ì„¤ì •)

### Part 2: í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ (Architecture Deep Dive)
- [2.1 ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜](#21-ì „ì²´-ì‹œìŠ¤í…œ-ì•„í‚¤í…ì²˜)
- [2.2 ë””ë ‰í† ë¦¬ êµ¬ì¡° ì™„ì „ ë¶„í•´](#22-ë””ë ‰í† ë¦¬-êµ¬ì¡°-ì™„ì „-ë¶„í•´)
- [2.3 í•µì‹¬ ëª¨ë“ˆ ì—­í•  ë° ìƒí˜¸ì‘ìš©](#23-í•µì‹¬-ëª¨ë“ˆ-ì—­í• -ë°-ìƒí˜¸ì‘ìš©)
- [2.4 ë°ì´í„° íë¦„ ì¶”ì ](#24-ë°ì´í„°-íë¦„-ì¶”ì )

### Part 3-10: [ë‹¤ìŒ Phaseì—ì„œ ê³„ì†...]

---

# Part 1: ì‹œì‘í•˜ê¸° (Getting Started)

## 1.1 í”„ë¡œì íŠ¸ ê°œìš”

### ë¬´ì—‡ì„ ë§Œë“œëŠ” í”„ë¡œì íŠ¸ì¸ê°€ìš”?

**Sensor Game Hub v6.0**ì€ AI ê¸°ë°˜ ì„¼ì„œ ê²Œì„ ìƒì„± ë° í”Œë ˆì´ í”Œë«í¼ì…ë‹ˆë‹¤.

```mermaid
graph LR
    A[ì‚¬ìš©ì] -->|ìì—°ì–´ ì•„ì´ë””ì–´| B[AI ìƒì„±ê¸°]
    B -->|30-60ì´ˆ| C[ì™„ì„±ëœ ê²Œì„]
    C -->|QR ì½”ë“œ ìŠ¤ìº”| D[ëª¨ë°”ì¼ ì„¼ì„œ]
    D -->|ê¸°ìš¸ì´ê¸°| E[ê²Œì„ í”Œë ˆì´]
    E -->|ë²„ê·¸ ë°œê²¬| F[AI ìë™ ìˆ˜ì •]
    F --> C

    style B fill:#8b5cf6,color:#fff
    style C fill:#10b981,color:#fff
    style E fill:#3b82f6,color:#fff
```

### í•µì‹¬ ê°€ì¹˜ (Why?)

| ê¸°ì¡´ ë°©ì‹ | Sensor Game Hub |
|-----------|-----------------|
| ê²Œì„ ê°œë°œ ìˆ˜ì£¼~ìˆ˜ê°œì›” | **30-60ì´ˆ** |
| ì½”ë”© ì§€ì‹ í•„ìˆ˜ | **ìì—°ì–´ë§Œ ì…ë ¥** |
| ìˆ˜ë™ ë²„ê·¸ ìˆ˜ì • | **AI ìë™ ìˆ˜ì •** |
| í”Œë«í¼ íŒŒí¸í™” | **ì›¹ ê¸°ë°˜ í†µí•©** |

### ì£¼ìš” ê¸°ëŠ¥ (What?)

1. **ğŸ¤– AI ê²Œì„ ìƒì„±ê¸°**
   - Claude Sonnet 4.5 (64K í† í°)
   - RAG ê¸°ë°˜ 400ê°œ ë¬¸ì„œ ê²€ìƒ‰
   - 5ë‹¨ê³„ ì‹¤ì‹œê°„ ì§„í–‰ë¥  í‘œì‹œ
   - ìë™ í’ˆì§ˆ ê²€ì¦ (95ì  ì´ìƒ)

2. **ğŸ® ì‹¤ì‹œê°„ ê²Œì„ í”Œë ˆì´**
   - WebSocket ê¸°ë°˜ 50ms ì„¼ì„œ ì „ì†¡
   - QR ì½”ë“œ ì¦‰ì‹œ ì—°ê²°
   - Solo/Dual/Multi ê²Œì„ ì§€ì›

3. **ğŸ‘¤ ê°œë°œì ê³„ì • ì‹œìŠ¤í…œ**
   - ê²Œì„ ì†Œìœ ê¶Œ ê´€ë¦¬
   - ë²„ì „ ì´ë ¥ ìë™ ì¶”ì 
   - AI ê¸°ë°˜ ìœ ì§€ë³´ìˆ˜

### ê¸°ìˆ  ìŠ¤íƒ (How?)

```mermaid
graph TB
    subgraph "Frontend"
        F1[HTML5 + Canvas]
        F2[Vanilla JS ES6+]
        F3[WebSocket Client]
    end

    subgraph "Backend"
        B1[Node.js 16+]
        B2[Express 4.18]
        B3[Socket.IO 4.7]
    end

    subgraph "AI"
        A1[Claude Sonnet 4.5]
        A2[OpenAI Embeddings]
        A3[Langchain]
    end

    subgraph "Database"
        D1[Supabase PostgreSQL]
        D2[pgvector]
    end

    F1 --> B2
    F3 --> B3
    B2 --> A1
    B2 --> D1
    A2 --> D2

    style A1 fill:#10b981,color:#fff
    style D1 fill:#f59e0b,color:#fff
```

## 1.2 í•µì‹¬ ê°œë… ì´í•´

### ê°œë… 1: ì„¸ì…˜ ê¸°ë°˜ ê²Œì„ í”Œë ˆì´

```mermaid
sequenceDiagram
    participant PC as ê²Œì„ í™”ë©´ (PC)
    participant Server as ì„œë²„
    participant Mobile as ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ (ëª¨ë°”ì¼)

    PC->>Server: ì„¸ì…˜ ìƒì„± ìš”ì²­
    Server->>PC: ì„¸ì…˜ ì½”ë“œ: "1234" + QR

    Mobile->>Mobile: QR ì½”ë“œ ìŠ¤ìº”
    Mobile->>Server: ì„¸ì…˜ ì—°ê²° (1234)
    Server->>PC: ì„¼ì„œ ì—°ê²°ë¨ âœ…

    loop 50ms ì£¼ê¸°
        Mobile->>Server: ì„¼ì„œ ë°ì´í„°
        Server->>PC: ë°ì´í„° ì „ë‹¬
        PC->>PC: ê²Œì„ ë¡œì§ + ë Œë”ë§
    end
```

**í•µì‹¬ ì´í•´**:
- PCëŠ” ê²Œì„ **í™”ë©´** (ë””ìŠ¤í”Œë ˆì´)
- ëª¨ë°”ì¼ì€ **ì»¨íŠ¸ë¡¤ëŸ¬** (ì„¼ì„œ)
- ì„œë²„ëŠ” **ì¤‘ê°œì** (ë¼ìš°íŒ…)

### ê°œë… 2: AI ê²Œì„ ìƒì„± íŒŒì´í”„ë¼ì¸

```mermaid
graph TB
    A[ì‚¬ìš©ì ì…ë ¥] --> B[ìš”êµ¬ì‚¬í•­ ìˆ˜ì§‘]
    B --> C[ì¥ë¥´ ë¶„ë¥˜]
    C --> D[RAG ë¬¸ì„œ ê²€ìƒ‰]
    D --> E[í”„ë¡¬í”„íŠ¸ êµ¬ì„±]
    E --> F[Claude API í˜¸ì¶œ]
    F --> G[ì½”ë“œ ìƒì„± 64K]
    G --> H{í’ˆì§ˆ ê²€ì¦}
    H -->|95ì  ì´ìƒ| I[íŒŒì¼ ì €ì¥]
    H -->|ë¯¸ë‹¬| J[ì¬ìƒì„± max 3íšŒ]
    J --> F
    I --> K[ê²Œì„ ìŠ¤ìº” ë“±ë¡]
    K --> L[âœ… í”Œë ˆì´ ê°€ëŠ¥]

    style F fill:#8b5cf6,color:#fff
    style H fill:#f59e0b,color:#fff
    style L fill:#10b981,color:#fff
```

**5ë‹¨ê³„ ì§„í–‰ë¥ **:
1. **0-20%**: ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„
2. **20-40%**: RAG ì‹œìŠ¤í…œ ë¬¸ì„œ ê²€ìƒ‰ (Vector DB)
3. **40-80%**: Claude Sonnet 4.5 ì½”ë“œ ìƒì„±
4. **80-90%**: ì½”ë“œ í’ˆì§ˆ ê²€ì¦
5. **90-100%**: íŒŒì¼ ì €ì¥ ë° ê²Œì„ ë“±ë¡

### ê°œë… 3: RAG (Retrieval-Augmented Generation)

**ì™œ RAGë¥¼ ì‚¬ìš©í•˜ë‚˜ìš”?**
- Claude APIë§Œ ì‚¬ìš© â†’ ì¼ë°˜ì ì¸ ê²Œì„ ìƒì„±
- RAG ì¶”ê°€ â†’ **ìš°ë¦¬ í”„ë¡œì íŠ¸ ì „ìš©** ê²Œì„ ìƒì„±

```mermaid
graph LR
    A[ì‚¬ìš©ì ì¿¼ë¦¬] --> B[OpenAI Embedding]
    B --> C[1536ì°¨ì› ë²¡í„°]
    C --> D[(Supabase<br/>Vector DB<br/>400ê°œ ë¬¸ì„œ)]
    D --> E[ìœ ì‚¬ë„ ê²€ìƒ‰]
    E --> F[Top-5 ë¬¸ì„œ]
    F --> G[Claude í”„ë¡¬í”„íŠ¸]
    G --> H[ì •í™•í•œ ì½”ë“œ]

    style D fill:#f59e0b,color:#fff
    style H fill:#10b981,color:#fff
```

**ì‹¤ì œ ì˜ˆì‹œ**:
```javascript
// ì‚¬ìš©ì: "ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ì„œ ê³µì„ êµ´ë¦¬ëŠ” ê²Œì„"

// 1. ì„ë² ë”© ë³€í™˜
const queryVector = await openai.embeddings.create({
    input: "ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ì„œ ê³µì„ êµ´ë¦¬ëŠ” ê²Œì„",
    model: "text-embedding-3-small"
});

// 2. Vector DB ê²€ìƒ‰
const docs = await supabase
    .from('game_knowledge')
    .select('content')
    .match_documents(queryVector, 5);  // Top-5

// 3. Claude í”„ë¡¬í”„íŠ¸ì— í¬í•¨
const prompt = `
ê´€ë ¨ ë¬¸ì„œ:
${docs.map(d => d.content).join('\n')}

ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­:
ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ì„œ ê³µì„ êµ´ë¦¬ëŠ” ê²Œì„

ìœ„ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì—¬ ê²Œì„ ì½”ë“œë¥¼ ìƒì„±í•˜ì„¸ìš”.
`;
```

### ê°œë… 4: WebSocket ì–‘ë°©í–¥ í†µì‹ 

```mermaid
graph TB
    subgraph "í´ë¼ì´ì–¸íŠ¸"
        C1[ê²Œì„ í™”ë©´] <-->|emit/on| C2[Socket.IO Client]
        C3[ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸] <-->|emit/on| C4[Socket.IO Client]
    end

    subgraph "ì„œë²„"
        S1[Socket.IO Server]
        S2[SessionManager]
    end

    C2 <-->|WebSocket| S1
    C4 <-->|WebSocket| S1
    S1 <--> S2

    style S1 fill:#3b82f6,color:#fff
    style S2 fill:#8b5cf6,color:#fff
```

**ì£¼ìš” ì´ë²¤íŠ¸**:
| ì´ë²¤íŠ¸ | ë°©í–¥ | ì„¤ëª… |
|--------|------|------|
| `create-session` | PC â†’ ì„œë²„ | ì„¸ì…˜ ìƒì„± ìš”ì²­ |
| `session-created` | ì„œë²„ â†’ PC | ì„¸ì…˜ ì½”ë“œ ë°˜í™˜ |
| `connect-sensor` | ëª¨ë°”ì¼ â†’ ì„œë²„ | ì„¼ì„œ ì—°ê²° |
| `sensor-connected` | ì„œë²„ â†’ PC/ëª¨ë°”ì¼ | ì—°ê²° ì™„ë£Œ |
| `sensor-data` | ëª¨ë°”ì¼ â†’ ì„œë²„ â†’ PC | ì„¼ì„œ ë°ì´í„° ì „ì†¡ |

## 1.3 ë¡œì»¬ í™˜ê²½ ì„¤ì •

### ì‹œìŠ¤í…œ ìš”êµ¬ì‚¬í•­

```bash
Node.js:  >= 16.0.0
npm:      >= 7.0.0
OS:       macOS, Windows, Linux
ë©”ëª¨ë¦¬:    >= 4GB
ë””ìŠ¤í¬:    >= 500MB
```

### Step 1: ì €ì¥ì†Œ í´ë¡ 

```bash
# HTTPS (ê¶Œì¥)
git clone https://github.com/your-org/sensorchatbot.git

# ë˜ëŠ” SSH
git clone git@github.com:your-org/sensorchatbot.git

# ë””ë ‰í† ë¦¬ ì´ë™
cd sensorchatbot
```

**í™•ì¸**:
```bash
ls -la
# ì¶œë ¥ ì˜ˆì‹œ:
# .git/
# server/
# public/
# package.json
# ...
```

### Step 2: í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

**2.1 `.env` íŒŒì¼ ìƒì„±**

```bash
# í…œí”Œë¦¿ ë³µì‚¬
cp .env.example .env

# í¸ì§‘ê¸°ë¡œ ì—´ê¸°
code .env  # VSCode
# ë˜ëŠ”
nano .env  # í„°ë¯¸ë„ ì—ë””í„°
```

**2.2 í•„ìˆ˜ í™˜ê²½ ë³€ìˆ˜ ì…ë ¥**

```bash
# ===== Claude API (í•„ìˆ˜) =====
CLAUDE_API_KEY=sk-ant-api...

# ===== OpenAI API (í•„ìˆ˜) =====
OPENAI_API_KEY=sk-proj...

# ===== Supabase (í•„ìˆ˜) =====
SUPABASE_URL=https://xxx.supabase.co
SUPABASE_ANON_KEY=eyJhbGc...

# ===== ì„œë²„ ì„¤ì • (ì„ íƒ) =====
PORT=3000
NODE_ENV=development
```

**ğŸ“Œ API í‚¤ ë°œê¸‰ ë°©ë²•**:

<details>
<summary><b>Claude API í‚¤ ë°œê¸‰ (í´ë¦­í•˜ì—¬ í¼ì¹˜ê¸°)</b></summary>

1. [Anthropic Console](https://console.anthropic.com/) ì ‘ì†
2. ë¡œê·¸ì¸ ë˜ëŠ” íšŒì›ê°€ì…
3. "API Keys" ë©”ë‰´ ì„ íƒ
4. "Create Key" ë²„íŠ¼ í´ë¦­
5. í‚¤ ì´ë¦„ ì…ë ¥ (ì˜ˆ: "SensorGameHub")
6. ìƒì„±ëœ í‚¤ ë³µì‚¬ â†’ `.env` íŒŒì¼ì— ë¶™ì—¬ë„£ê¸°

**ì£¼ì˜**: í‚¤ëŠ” í•œ ë²ˆë§Œ í‘œì‹œë©ë‹ˆë‹¤. ì•ˆì „í•˜ê²Œ ë³´ê´€í•˜ì„¸ìš”!
</details>

<details>
<summary><b>OpenAI API í‚¤ ë°œê¸‰</b></summary>

1. [OpenAI Platform](https://platform.openai.com/) ì ‘ì†
2. ë¡œê·¸ì¸ ë˜ëŠ” íšŒì›ê°€ì…
3. "API keys" ë©”ë‰´ ì„ íƒ
4. "Create new secret key" í´ë¦­
5. ìƒì„±ëœ í‚¤ ë³µì‚¬ â†’ `.env` íŒŒì¼ì— ë¶™ì—¬ë„£ê¸°
</details>

<details>
<summary><b>Supabase í”„ë¡œì íŠ¸ ìƒì„±</b></summary>

1. [Supabase](https://supabase.com/) ì ‘ì†
2. "New Project" í´ë¦­
3. í”„ë¡œì íŠ¸ ì´ë¦„: `sensorgame-hub`
4. ë¦¬ì „ ì„ íƒ: `Singapore (ap-southeast-1)` ê¶Œì¥
5. ë°ì´í„°ë² ì´ìŠ¤ ë¹„ë°€ë²ˆí˜¸ ì„¤ì • (ì•ˆì „í•˜ê²Œ ë³´ê´€!)
6. í”„ë¡œì íŠ¸ ìƒì„± ì™„ë£Œ (1-2ë¶„ ì†Œìš”)

**ì„¤ì • â†’ API**:
- `Project URL` â†’ `SUPABASE_URL`
- `anon public` í‚¤ â†’ `SUPABASE_ANON_KEY`
</details>

### Step 3: ì˜ì¡´ì„± ì„¤ì¹˜

```bash
npm install
```

**ì˜ˆìƒ ì¶œë ¥**:
```
added 293 packages in 15s
```

**ì„¤ì¹˜ë˜ëŠ” ì£¼ìš” íŒ¨í‚¤ì§€**:
- `express` (4.18.2) - ì›¹ ì„œë²„
- `socket.io` (4.7.2) - WebSocket í†µì‹ 
- `@anthropic-ai/sdk` (0.30.1) - Claude API
- `@supabase/supabase-js` (2.58.0) - Supabase í´ë¼ì´ì–¸íŠ¸
- `openai` (4.71.1) - OpenAI Embeddings
- `langchain` (0.3.7) - RAG íŒŒì´í”„ë¼ì¸

**ë¬¸ì œ ë°œìƒ ì‹œ**:
```bash
# ìºì‹œ ì‚­ì œ í›„ ì¬ì„¤ì¹˜
rm -rf node_modules package-lock.json
npm install
```

### Step 4: ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”

**4.1 Vector í™•ì¥ í™œì„±í™”**

Supabase ëŒ€ì‹œë³´ë“œì—ì„œ:
1. **SQL Editor** ë©”ë‰´ ì„ íƒ
2. "New query" í´ë¦­
3. ë‹¤ìŒ SQL ì‹¤í–‰:

```sql
-- pgvector í™•ì¥ í™œì„±í™”
CREATE EXTENSION IF NOT EXISTS vector;

-- UUID ìƒì„± í•¨ìˆ˜ í™œì„±í™”
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
```

**4.2 í…Œì´ë¸” ìƒì„±**

```sql
-- game_knowledge í…Œì´ë¸” (RAGìš©)
CREATE TABLE game_knowledge (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    content TEXT NOT NULL,
    metadata JSONB,
    embedding VECTOR(1536),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ë²¡í„° ì¸ë±ìŠ¤ ìƒì„± (ê²€ìƒ‰ ì†ë„ í–¥ìƒ)
CREATE INDEX ON game_knowledge
USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);
```

**4.3 ë¬¸ì„œ ì„ë² ë”© ìƒì„±**

```bash
# í”„ë¡œì íŠ¸ ë£¨íŠ¸ì—ì„œ ì‹¤í–‰
node server/DocumentEmbedder.js
```

**ì˜ˆìƒ ì¶œë ¥**:
```
ğŸš€ ì„ë² ë”© í”„ë¡œì„¸ìŠ¤ ì‹œì‘...
ğŸ“„ ë¬¸ì„œ ë¡œë“œ: docs/PERFECT_GAME_DEVELOPMENT_GUIDE.md
ğŸ“„ ë¬¸ì„œ ë¡œë“œ: docs/SENSOR_GAME_TROUBLESHOOTING.md
...
âœ… 35ê°œ ë¬¸ì„œ â†’ 400ê°œ ì²­í¬ ìƒì„±
ğŸ’¾ Supabase ì €ì¥ ì¤‘...
âœ… ì„ë² ë”© ì™„ë£Œ! (ì´ ì†Œìš”: 45ì´ˆ)
```

## 1.4 ì²« ì‹¤í–‰ ë° ë™ì‘ í™•ì¸

### Step 1: ì„œë²„ ì‹œì‘

```bash
npm start
```

**ì„±ê³µ ì‹œ ì¶œë ¥**:
```
ğŸš€ GameServer v6.0 ì´ˆê¸°í™” ì™„ë£Œ
ğŸ“ 18ê°œ ê²Œì„ ìŠ¤ìº” ì™„ë£Œ
ğŸ¯ ëŒ€í™”í˜• ê²Œì„ ìƒì„±ê¸° ì´ˆê¸°í™” ì¤‘...
âœ… Claude API ì—°ê²° í™•ì¸
âœ… Supabase Vector Store ì—°ê²° í™•ì¸
âœ… AI Assistant ì¤€ë¹„ ì™„ë£Œ

ğŸŒ ì„œë²„ ì‹¤í–‰ ì¤‘: http://localhost:3000
```

### Step 2: ë¸Œë¼ìš°ì € ì ‘ì†

**ëœë”© í˜ì´ì§€**:
```
http://localhost:3000
```

**ê°œë°œì ì„¼í„°**:
```
http://localhost:3000/developer
```

**ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸** (ëª¨ë°”ì¼):
```
http://localhost:3000/sensor.html
```

### Step 3: ì²« ê²Œì„ ìƒì„± í…ŒìŠ¤íŠ¸

**3.1 ê°œë°œì ì„¼í„° ì ‘ì†**
1. `http://localhost:3000/developer` ì—´ê¸°
2. "ğŸ¤– AI ê²Œì„ ìƒì„±ê¸°" íƒ­ í´ë¦­

**3.2 ê²Œì„ ì•„ì´ë””ì–´ ì…ë ¥**
```
ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ì„œ ê³µì„ êµ´ë ¤ ëª©í‘œ ì§€ì ì— ë„ë‹¬í•˜ëŠ” ê²Œì„
```

**3.3 ëŒ€í™” ì§„í–‰**
- AIê°€ ì¥ë¥´ ì§ˆë¬¸ (ì•„ì¼€ì´ë“œ/í¼ì¦?) â†’ "ì•„ì¼€ì´ë“œ"
- ì„¼ì„œ íƒ€ì… í™•ì¸ â†’ "ê¸°ìš¸ê¸°ë§Œ"
- ìš”êµ¬ì‚¬í•­ ìš”ì•½ â†’ "ë„¤, ìƒì„±í•´ì£¼ì„¸ìš”!"

**3.4 ìƒì„± ì§„í–‰ í™•ì¸**
```
ğŸ¯ ê²Œì„ ìƒì„± ì‹œì‘!

1ï¸âƒ£ ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„ì¤‘... 10%
2ï¸âƒ£ ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ì¤‘... (Vector DB) 25%
3ï¸âƒ£ Claude AIë¡œ ê²Œì„ ì½”ë“œ ìƒì„± ì¤‘... 60%
4ï¸âƒ£ ê²Œì„ ì½”ë“œ ê²€ì¦ ì¤‘... 85%
5ï¸âƒ£ ê²Œì„ ì €ì¥ ë° ë“±ë¡ ì¤‘... 95%

âœ… ê²Œì„ ìƒì„± ì™„ë£Œ! (ì†Œìš” ì‹œê°„: 38ì´ˆ)
```

**3.5 ê²Œì„ í”Œë ˆì´**
1. "ğŸ® ë°”ë¡œ í”Œë ˆì´í•˜ê¸°" ë²„íŠ¼ í´ë¦­
2. PC í™”ë©´ì— ì„¸ì…˜ ì½”ë“œ + QR í‘œì‹œ
3. ëª¨ë°”ì¼ì—ì„œ `http://localhost:3000/sensor.html` ì ‘ì†
4. QR ìŠ¤ìº” ë˜ëŠ” ì„¸ì…˜ ì½”ë“œ ì…ë ¥
5. ì„¼ì„œ ê¶Œí•œ í—ˆìš©
6. ê²Œì„ í”Œë ˆì´ ì‹œì‘!

### Step 4: ë™ì‘ í™•ì¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

```markdown
- [ ] ì„œë²„ê°€ 3000 í¬íŠ¸ì—ì„œ ì‹¤í–‰ë¨
- [ ] ëœë”© í˜ì´ì§€ê°€ ì •ìƒ í‘œì‹œë¨
- [ ] ê°œë°œì ì„¼í„° ì ‘ì† ê°€ëŠ¥
- [ ] AI ê²Œì„ ìƒì„±ê¸° íƒ­ì´ ë³´ì„
- [ ] ê²Œì„ ì•„ì´ë””ì–´ ì…ë ¥ ê°€ëŠ¥
- [ ] ìƒì„± ì§„í–‰ë¥ ì´ ì‹¤ì‹œê°„ í‘œì‹œë¨
- [ ] ê²Œì„ ìƒì„± ì™„ë£Œ (30-60ì´ˆ)
- [ ] QR ì½”ë“œ ìƒì„±ë¨
- [ ] ëª¨ë°”ì¼ ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ ì ‘ì†ë¨
- [ ] ì„¼ì„œ ì—°ê²° í›„ ê²Œì„ í”Œë ˆì´ ê°€ëŠ¥
```

**ëª¨ë‘ ì²´í¬ë˜ì—ˆë‚˜ìš”? ì¶•í•˜í•©ë‹ˆë‹¤! ğŸ‰**

## 1.5 ê°œë°œ ë„êµ¬ ì„¤ì •

### VSCode ê¶Œì¥ ì„¤ì •

**1.1 í•„ìˆ˜ í™•ì¥ í”„ë¡œê·¸ë¨**

```json
{
  "recommendations": [
    "dbaeumer.vscode-eslint",
    "esbenp.prettier-vscode",
    "ms-vscode.vscode-node-debug2",
    "christian-kohler.path-intellisense",
    "bierner.markdown-mermaid",
    "ms-vscode.live-server"
  ]
}
```

**ì„¤ì¹˜ ë°©ë²•**:
1. VSCodeì—ì„œ `Cmd+Shift+X` (Extensions)
2. ìœ„ ID ê²€ìƒ‰í•˜ì—¬ ì„¤ì¹˜

**1.2 ì‘ì—… ì˜ì—­ ì„¤ì • (`.vscode/settings.json`)**

```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "editor.codeActionsOnSave": {
    "source.fixAll.eslint": true
  },
  "javascript.suggest.autoImports": true,
  "files.exclude": {
    "**/node_modules": true,
    "**/coverage": true
  }
}
```

**1.3 ë””ë²„ê¹… ì„¤ì • (`.vscode/launch.json`)**

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "node",
      "request": "launch",
      "name": "ì„œë²„ ë””ë²„ê·¸",
      "skipFiles": ["<node_internals>/**"],
      "program": "${workspaceFolder}/server/index.js",
      "envFile": "${workspaceFolder}/.env"
    }
  ]
}
```

**ì‚¬ìš©ë²•**:
1. `server/index.js` ì—´ê¸°
2. ì¤‘ë‹¨ì  ì„¤ì • (ë¼ì¸ ë²ˆí˜¸ í´ë¦­)
3. `F5` í‚¤ ëˆŒëŸ¬ ë””ë²„ê·¸ ì‹œì‘

### ê°œë°œ ì›Œí¬í”Œë¡œìš°

**Hot Reload ì‚¬ìš©**:
```bash
# nodemon ì„¤ì¹˜ (ì „ì—­)
npm install -g nodemon

# íŒŒì¼ ë³€ê²½ ì‹œ ìë™ ì¬ì‹œì‘
nodemon server/index.js
```

**ë¡œê·¸ í•„í„°ë§**:
```bash
# íŠ¹ì • ëª¨ë“ˆë§Œ ë³´ê¸°
DEBUG=GameGenerator npm start

# ëª¨ë“  ë””ë²„ê·¸ ë¡œê·¸
DEBUG=* npm start
```

### ìœ ìš©í•œ ëª…ë ¹ì–´ ëª¨ìŒ

```bash
# ì„œë²„ ì‹œì‘
npm start

# ê°œë°œ ëª¨ë“œ (ìë™ ì¬ì‹œì‘)
npm run dev

# ì½”ë“œ ìŠ¤íƒ€ì¼ ê²€ì‚¬
npm run lint

# ì „ì²´ ê²Œì„ ëª©ë¡ ì¡°íšŒ
curl http://localhost:3000/api/games | jq

# ì„œë²„ í†µê³„
curl http://localhost:3000/api/stats | jq

# ê²Œì„ ì¬ìŠ¤ìº”
curl -X POST http://localhost:3000/api/admin/rescan
```

---

**Part 1 ì™„ë£Œ! âœ…**

ë‹¤ìŒ: [Part 2: í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜](#part-2-í”„ë¡œì íŠ¸-ì•„í‚¤í…ì²˜)ë¡œ ê³„ì†...

---

# Part 2: í”„ë¡œì íŠ¸ ì•„í‚¤í…ì²˜ (Architecture Deep Dive)

## 2.1 ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ ê°œìš”

```mermaid
graph TB
    subgraph "Client Layer"
        C1[ê²Œì„ í™”ë©´<br/>HTML5 Canvas]
        C2[ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸<br/>Mobile Browser]
        C3[ê°œë°œì ì„¼í„°<br/>Web Dashboard]
    end

    subgraph "Communication Layer"
        W1[WebSocket<br/>Socket.IO]
        W2[HTTP REST API<br/>Express]
    end

    subgraph "Application Layer"
        A1[SessionManager<br/>ì„¸ì…˜ ê´€ë¦¬]
        A2[InteractiveGameGenerator<br/>AI ê²Œì„ ìƒì„±]
        A3[GameMaintenanceManager<br/>ê²Œì„ ìœ ì§€ë³´ìˆ˜]
        A4[GameScanner<br/>ê²Œì„ ìŠ¤ìº”]
    end

    subgraph "Service Layer"
        S1[DocumentEmbedder<br/>ë¬¸ì„œ ì„ë² ë”©]
        S2[AIAssistant<br/>ëŒ€í™”í˜• AI]
        S3[AutoFixer<br/>ìë™ ìˆ˜ì •]
        S4[GameCodeTester<br/>ì½”ë“œ í…ŒìŠ¤íŠ¸]
    end

    subgraph "External Services"
        E1[Claude API<br/>Anthropic]
        E2[OpenAI API<br/>Embeddings]
        E3[(Supabase<br/>Vector DB)]
    end

    C1 <--> W1
    C2 <--> W1
    C3 <--> W2

    W1 <--> A1
    W2 <--> A2
    W2 <--> A3
    W1 <--> A4

    A2 --> S1
    A2 --> S2
    A3 --> S3
    A2 --> S4

    S1 --> E2
    S2 --> E1
    S3 --> E1
    S1 --> E3

    style A2 fill:#8b5cf6,color:#fff
    style E1 fill:#10b981,color:#fff
    style E3 fill:#f59e0b,color:#fff
```

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ì—­í• 

| ì»´í¬ë„ŒíŠ¸ | ì—­í•  | í•µì‹¬ ê¸°ëŠ¥ | íŒŒì¼ ìœ„ì¹˜ |
|---------|------|-----------|----------|
| **SessionManager** | ê²Œì„ ì„¸ì…˜ ê´€ë¦¬ | ì„¸ì…˜ ìƒì„±, ì„¼ì„œ ì—°ê²°, ë°ì´í„° ë¼ìš°íŒ… | `server/SessionManager.js:150` |
| **InteractiveGameGenerator** | AI ê²Œì„ ìƒì„± | ëŒ€í™”í˜• ìƒì„±, RAG ê²€ìƒ‰, ì½”ë“œ ìƒì„± | `server/InteractiveGameGenerator.js:1400` |
| **GameMaintenanceManager** | ê²Œì„ ìœ ì§€ë³´ìˆ˜ | ë²„ê·¸ ìˆ˜ì •, ê¸°ëŠ¥ ì¶”ê°€, ë²„ì „ ê´€ë¦¬ | `server/GameMaintenanceManager.js:429` |
| **GameScanner** | ê²Œì„ ìë™ ìŠ¤ìº” | ê²Œì„ ë°œê²¬, ë©”íƒ€ë°ì´í„° íŒŒì‹± | `server/GameScanner.js:200` |
| **AIAssistant** | ëŒ€í™”í˜• AI | ìš”êµ¬ì‚¬í•­ ìˆ˜ì§‘, ì±—ë´‡ ì‘ë‹µ | `server/AIAssistant.js:350` |
| **DocumentEmbedder** | ë¬¸ì„œ ì„ë² ë”© | ë§ˆí¬ë‹¤ìš´ ì²­í‚¹, ë²¡í„° ë³€í™˜ | `server/DocumentEmbedder.js:250` |

## 2.2 ë””ë ‰í† ë¦¬ êµ¬ì¡° ì™„ì „ ë¶„í•´

### í”„ë¡œì íŠ¸ ë£¨íŠ¸ êµ¬ì¡°

```
sensorchatbot/
â”œâ”€â”€ server/                 # ë°±ì—”ë“œ ì½”ë“œ (50ê°œ íŒŒì¼, 25,000 LOC)
â”œâ”€â”€ public/                 # í”„ë¡ íŠ¸ì—”ë“œ ì •ì  íŒŒì¼
â”œâ”€â”€ docs/                   # í”„ë¡œì íŠ¸ ë¬¸ì„œ
â”œâ”€â”€ .env                    # í™˜ê²½ ë³€ìˆ˜ (ë¹„ê³µê°œ)
â”œâ”€â”€ .gitignore              # Git ì œì™¸ íŒŒì¼
â”œâ”€â”€ package.json            # ì˜ì¡´ì„± ë° ìŠ¤í¬ë¦½íŠ¸
â””â”€â”€ README.md               # í”„ë¡œì íŠ¸ ì†Œê°œ
```

### server/ ë””ë ‰í† ë¦¬ ìƒì„¸ ë¶„í•´ (50ê°œ íŒŒì¼)

#### ğŸ“ server/ (ë£¨íŠ¸ ë ˆë²¨ - í•µì‹¬ ëª¨ë“ˆ)

```
server/
â”œâ”€â”€ index.js                           # ë©”ì¸ ì§„ì…ì  (755ì¤„)
â”‚   â”œâ”€â”€ Express ì„œë²„ ì´ˆê¸°í™”
â”‚   â”œâ”€â”€ Socket.IO ì„¤ì •
â”‚   â”œâ”€â”€ ë¼ìš°íŠ¸ ë“±ë¡
â”‚   â””â”€â”€ ê²Œì„ ìŠ¤ìº” ë° ì„¸ì…˜ ê´€ë¦¬ ì‹œì‘
â”‚
â”œâ”€â”€ InteractiveGameGenerator.js        # AI ê²Œì„ ìƒì„±ê¸° (1,400ì¤„) â­
â”‚   â”œâ”€â”€ 4ë‹¨ê³„ ëŒ€í™”í˜• ìƒì„± í”Œë¡œìš°
â”‚   â”œâ”€â”€ RAG ì‹œìŠ¤í…œ í†µí•©
â”‚   â”œâ”€â”€ Claude Sonnet 4.5 API í˜¸ì¶œ
â”‚   â””â”€â”€ 5ë‹¨ê³„ ì§„í–‰ë¥  íŠ¸ë˜í‚¹
â”‚
â”œâ”€â”€ GameMaintenanceManager.js          # ê²Œì„ ìœ ì§€ë³´ìˆ˜ (429ì¤„) â­
â”‚   â”œâ”€â”€ ë²„ê·¸ ë¦¬í¬íŠ¸ ì²˜ë¦¬
â”‚   â”œâ”€â”€ ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­
â”‚   â”œâ”€â”€ ìë™ ë²„ì „ ê´€ë¦¬
â”‚   â””â”€â”€ ì„¸ì…˜ ìœ ì§€ (30ë¶„ íƒ€ì„ì•„ì›ƒ)
â”‚
â”œâ”€â”€ SessionManager.js                  # ì„¸ì…˜ ê´€ë¦¬ (150ì¤„) â­
â”‚   â”œâ”€â”€ 4ìë¦¬ ì„¸ì…˜ ì½”ë“œ ìƒì„±
â”‚   â”œâ”€â”€ ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°
â”‚   â”œâ”€â”€ ë°ì´í„° ë¼ìš°íŒ… (PC â†” ëª¨ë°”ì¼)
â”‚   â””â”€â”€ ì„¸ì…˜ ì •ë¦¬
â”‚
â”œâ”€â”€ GameScanner.js                     # ê²Œì„ ìŠ¤ìº” (200ì¤„)
â”‚   â”œâ”€â”€ public/games/ ìë™ ìŠ¤ìº”
â”‚   â”œâ”€â”€ game.json íŒŒì‹±
â”‚   â””â”€â”€ ê²Œì„ ë©”íƒ€ë°ì´í„° ê´€ë¦¬
â”‚
â”œâ”€â”€ DocumentEmbedder.js                # ë¬¸ì„œ ì„ë² ë”© (250ì¤„)
â”‚   â”œâ”€â”€ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ë¡œë“œ
â”‚   â”œâ”€â”€ ì²­í¬ ë¶„í•  (512í† í°)
â”‚   â”œâ”€â”€ OpenAI Embedding ìƒì„±
â”‚   â””â”€â”€ Supabase ì €ì¥
â”‚
â”œâ”€â”€ AIAssistant.js                     # ëŒ€í™”í˜• AI (350ì¤„)
â”‚   â”œâ”€â”€ Claude API ëŒ€í™” ê´€ë¦¬
â”‚   â”œâ”€â”€ ìš”êµ¬ì‚¬í•­ ì¶”ì¶œ
â”‚   â””â”€â”€ ì»¨í…ìŠ¤íŠ¸ ìœ ì§€
â”‚
â”œâ”€â”€ GameCodeTester.js                  # ì½”ë“œ í…ŒìŠ¤íŠ¸ (400ì¤„)
â”‚   â”œâ”€â”€ Puppeteer ê¸°ë°˜ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ SDK ì—°ê²° ê²€ì¦
â”‚   â”œâ”€â”€ ê²Œì„ ë¡œì§ ê²€ì¦
â”‚   â””â”€â”€ ë²„ê·¸ íƒì§€
â”‚
â””â”€â”€ AutoFixer.js                       # ìë™ ìˆ˜ì • (300ì¤„)
    â”œâ”€â”€ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¶„ì„
    â”œâ”€â”€ Claude APIë¡œ ë²„ê·¸ ìˆ˜ì •
    â””â”€â”€ ìµœëŒ€ 3íšŒ ì¬ì‹œë„
```

#### ğŸ“ server/routes/ (ë¼ìš°íŒ…)

```
server/routes/
â”œâ”€â”€ developerRoutes.js                 # ê°œë°œì ì„¼í„° (2,300ì¤„) â­
â”‚   â”œâ”€â”€ /developer - ëŒ€ì‹œë³´ë“œ HTML ìƒì„±
â”‚   â”œâ”€â”€ /api/start-game-session - ì„¸ì…˜ ì‹œì‘
â”‚   â”œâ”€â”€ /api/game-chat - AI ëŒ€í™”
â”‚   â”œâ”€â”€ /api/finalize-game - ê²Œì„ ìƒì„± ì‹¤í–‰
â”‚   â”œâ”€â”€ /api/download-game/:gameId - ZIP ë‹¤ìš´ë¡œë“œ
â”‚   â””â”€â”€ ì‹¤ì‹œê°„ ì§„í–‰ë¥  WebSocket ì´ë²¤íŠ¸
â”‚
â”œâ”€â”€ gameRoutes.js                      # ê²Œì„ API (150ì¤„)
â”‚   â”œâ”€â”€ /api/games - ê²Œì„ ëª©ë¡
â”‚   â”œâ”€â”€ /api/games/:gameId - ê²Œì„ ì •ë³´
â”‚   â””â”€â”€ /games/:gameId - ê²Œì„ HTML ì œê³µ
â”‚
â”œâ”€â”€ landingRoutes.js                   # ëœë”© í˜ì´ì§€ (100ì¤„)
â”‚   â””â”€â”€ / - ë™ì  í™ˆí˜ì´ì§€ ìƒì„±
â”‚
â”œâ”€â”€ performanceRoutes.js               # ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (80ì¤„)
â”‚   â””â”€â”€ /api/stats - ì„œë²„ í†µê³„
â”‚
â””â”€â”€ testRoutes.js                      # í…ŒìŠ¤íŠ¸ API (120ì¤„)
    â””â”€â”€ /api/test/* - ê°œë°œ ì „ìš© ì—”ë“œí¬ì¸íŠ¸
```

#### ğŸ“ server/generators/ (ë©€í‹° ìŠ¤í…Œì´ì§€ ìƒì„±ê¸°)

```
server/generators/
â”œâ”€â”€ StructureGenerator.js              # Stage 1: êµ¬ì¡° ìƒì„± (200ì¤„)
â”‚   â”œâ”€â”€ HTML ë¼ˆëŒ€ ìƒì„±
â”‚   â”œâ”€â”€ SessionSDK í†µí•©
â”‚   â””â”€â”€ ìº”ë²„ìŠ¤ ì´ˆê¸°í™”
â”‚
â”œâ”€â”€ GameLogicGenerator.js              # Stage 2: ë¡œì§ ìƒì„± (250ì¤„)
â”‚   â”œâ”€â”€ ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜
â”‚   â”œâ”€â”€ ì¶©ëŒ ê°ì§€
â”‚   â””â”€â”€ ê²Œì„ ìƒíƒœ ê´€ë¦¬
â”‚
â””â”€â”€ IntegrationGenerator.js            # Stage 3: í†µí•© (180ì¤„)
    â”œâ”€â”€ Stage 1 + Stage 2 ê²°í•©
    â””â”€â”€ ì„¼ì„œ ì—°ê²° ê²€ì¦
```

#### ğŸ“ server/services/ (ì„œë¹„ìŠ¤ ë ˆì´ì–´)

```
server/services/
â”œâ”€â”€ DocumentChunker.js                 # ë¬¸ì„œ ì²­í‚¹ (120ì¤„)
â”‚   â””â”€â”€ RecursiveCharacterTextSplitter ë˜í¼
â”‚
â”œâ”€â”€ EmbeddingGenerator.js              # ì„ë² ë”© ìƒì„± (150ì¤„)
â”‚   â””â”€â”€ OpenAI API í˜¸ì¶œ ë° ë°°ì¹˜ ì²˜ë¦¬
â”‚
â”œâ”€â”€ VectorEmbeddingService.js          # ë²¡í„° DB ì„œë¹„ìŠ¤ (180ì¤„)
â”‚   â”œâ”€â”€ Supabase ì—°ê²°
â”‚   â””â”€â”€ ìœ ì‚¬ë„ ê²€ìƒ‰
â”‚
â”œâ”€â”€ SearchAPI.js                       # ê²€ìƒ‰ API (100ì¤„)
â”‚   â””â”€â”€ RAG ê²€ìƒ‰ ì¶”ìƒí™”
â”‚
â”œâ”€â”€ LegacyGameValidator.js             # ê²Œì„ ê²€ì¦ (200ì¤„)
â”‚   â””â”€â”€ ìƒì„±ëœ ê²Œì„ í’ˆì§ˆ ê²€ì‚¬
â”‚
â””â”€â”€ SystemIntegrationTester.js         # í†µí•© í…ŒìŠ¤íŠ¸ (150ì¤„)
    â””â”€â”€ E2E í…ŒìŠ¤íŠ¸ ìë™í™”
```

#### ğŸ“ server/core/ (í•µì‹¬ ì‹œìŠ¤í…œ)

```
server/core/
â”œâ”€â”€ GameServer.js                      # ê²Œì„ ì„œë²„ (300ì¤„)
â”‚   â”œâ”€â”€ Express + Socket.IO í†µí•©
â”‚   â””â”€â”€ ì „ì—­ ìƒíƒœ ê´€ë¦¬
â”‚
â””â”€â”€ MiddlewareConfig.js                # ë¯¸ë“¤ì›¨ì–´ (100ì¤„)
    â”œâ”€â”€ CORS ì„¤ì •
    â”œâ”€â”€ Body Parser
    â”œâ”€â”€ Gzip ì••ì¶•
    â””â”€â”€ ì—ëŸ¬ í•¸ë“¤ëŸ¬
```

#### ğŸ“ server/utils/ (ìœ í‹¸ë¦¬í‹°)

```
server/utils/
â”œâ”€â”€ htmlGenerator.js                   # HTML ìƒì„± (180ì¤„)
â”‚   â””â”€â”€ ë™ì  í˜ì´ì§€ ìƒì„±
â”‚
â”œâ”€â”€ markdownRenderer.js                # ë§ˆí¬ë‹¤ìš´ ë Œë”ëŸ¬ (120ì¤„)
â”‚   â””â”€â”€ MD â†’ HTML ë³€í™˜
â”‚
â””â”€â”€ templateCode.js                    # ì½”ë“œ í…œí”Œë¦¿ (150ì¤„)
    â””â”€â”€ ê²Œì„ ì½”ë“œ ìŠ¤ë‹ˆí«
```

#### ğŸ“ server/validation/ (ê²€ì¦)

```
server/validation/
â”œâ”€â”€ CodeValidator.js                   # ì½”ë“œ ê²€ì¦ (200ì¤„)
â”‚   â”œâ”€â”€ SDK í†µí•© í™•ì¸
â”‚   â”œâ”€â”€ ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ ê²€ì¦
â”‚   â””â”€â”€ 100ì  ë§Œì  ì±„ì 
â”‚
â””â”€â”€ ErrorDetectionEngine.js            # ì—ëŸ¬ ê°ì§€ (180ì¤„)
    â””â”€â”€ ì •ì  ë¶„ì„ ë° íŒ¨í„´ ë§¤ì¹­
```

#### ğŸ“ server/monitoring/ (ëª¨ë‹ˆí„°ë§)

```
server/monitoring/
â”œâ”€â”€ PerformanceMonitor.js              # ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (150ì¤„)
â”‚   â”œâ”€â”€ CPU/ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰
â”‚   â””â”€â”€ ì‘ë‹µ ì‹œê°„ ì¶”ì 
â”‚
â””â”€â”€ LiveErrorMonitor.js                # ì‹¤ì‹œê°„ ì—ëŸ¬ (120ì¤„)
    â””â”€â”€ ì—ëŸ¬ ë¡œê¹… ë° ì•Œë¦¼
```

#### ğŸ“ server/templates/, prompts/, context/ (ì§€ì› ëª¨ë“ˆ)

```
server/templates/
â””â”€â”€ GameTemplateStandard.js            # í‘œì¤€ í…œí”Œë¦¿ (200ì¤„)

server/prompts/
â””â”€â”€ StandardizedPromptTemplates.js     # í”„ë¡¬í”„íŠ¸ (300ì¤„)

server/context/
â””â”€â”€ ContextManager.js                  # ì»¨í…ìŠ¤íŠ¸ (150ì¤„)
```

### public/ ë””ë ‰í† ë¦¬ ìƒì„¸ ë¶„í•´

```
public/
â”œâ”€â”€ games/                             # ê²Œì„ ë””ë ‰í† ë¦¬
â”‚   â”œâ”€â”€ solo/                          # ì†”ë¡œ ê²Œì„
â”‚   â”œâ”€â”€ dual/                          # ë“€ì–¼ ê²Œì„
â”‚   â”œâ”€â”€ multi/                         # ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„
â”‚   â”œâ”€â”€ cake-delivery/                 # ì¼€ì´í¬ ë°°ë‹¬ (3D ê²Œì„)
â”‚   â”œâ”€â”€ shot-target/                   # ìŠˆíŒ… ê²Œì„
â”‚   â””â”€â”€ [AI ìƒì„± ê²Œì„ë“¤]/              # ìë™ ìƒì„±ëœ ê²Œì„
â”‚
â”œâ”€â”€ js/
â”‚   â””â”€â”€ SessionSDK.js                  # í†µí•© SDK (500ì¤„) â­
â”‚       â”œâ”€â”€ ì„¸ì…˜ ìƒì„±
â”‚       â”œâ”€â”€ QR ì½”ë“œ ìƒì„±
â”‚       â”œâ”€â”€ WebSocket ì—°ê²°
â”‚       â”œâ”€â”€ ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹ 
â”‚       â””â”€â”€ ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ
â”‚
â”œâ”€â”€ sensor.html                        # ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ (300ì¤„)
â”‚   â”œâ”€â”€ ì„¸ì…˜ ì½”ë“œ ì…ë ¥
â”‚   â”œâ”€â”€ ì„¼ì„œ ê¶Œí•œ ìš”ì²­
â”‚   â”œâ”€â”€ 50ms ì£¼ê¸° ë°ì´í„° ì „ì†¡
â”‚   â””â”€â”€ ì—°ê²° ìƒíƒœ í‘œì‹œ
â”‚
â””â”€â”€ ai-game-generator.html             # ê²Œì„ ìƒì„±ê¸° UI (êµ¬ ë²„ì „)
```

### docs/ ë””ë ‰í† ë¦¬

```
docs/
â”œâ”€â”€ í”„ë¡œì íŠ¸_ì„¤ê³„_ëª…ì„¸ì„œ.md            # ì„¤ê³„ ëª…ì„¸ì„œ (2,671ì¤„)
â”œâ”€â”€ ê°œë°œì_ì˜¨ë³´ë”©_ê°€ì´ë“œ.md            # ì´ ë¬¸ì„œ!
â”œâ”€â”€ PERFECT_GAME_DEVELOPMENT_GUIDE.md  # ê²Œì„ ê°œë°œ ê°€ì´ë“œ
â”œâ”€â”€ SENSOR_GAME_TROUBLESHOOTING.md     # íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
â””â”€â”€ [35ê°œ ì¶”ê°€ ë§ˆí¬ë‹¤ìš´ íŒŒì¼]          # RAGìš© ë¬¸ì„œ
```

## 2.3 í•µì‹¬ ëª¨ë“ˆ ì—­í•  ë° ìƒí˜¸ì‘ìš©

### ëª¨ë“ˆ 1: InteractiveGameGenerator (AI ê²Œì„ ìƒì„±ê¸°)

**íŒŒì¼**: `server/InteractiveGameGenerator.js:1-1400`

**ì—­í• **: ì‚¬ìš©ìì™€ ëŒ€í™”í•˜ë©° ê²Œì„ì„ ìƒì„±í•˜ëŠ” í•µì‹¬ AI ì‹œìŠ¤í…œ

```mermaid
sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant R as developerRoutes
    participant G as InteractiveGameGenerator
    participant A as AIAssistant
    participant V as VectorEmbeddingService
    participant C as Claude API
    participant S as Supabase

    U->>R: POST /api/start-game-session
    R->>G: startSession()
    G->>G: sessionId ìƒì„±
    G-->>R: { sessionId, message }

    U->>R: POST /api/game-chat
    R->>G: handleUserMessage(sessionId, message)
    G->>A: chat(message, conversationHistory)
    A->>C: messages.create()
    C-->>A: AI ì‘ë‹µ
    A-->>G: { response, nextStage }
    G-->>R: { response, stage, ready }

    U->>R: POST /api/finalize-game
    R->>G: generateFinalGame(sessionId)

    Note over G: 5ë‹¨ê³„ ì§„í–‰ë¥  ì´ë²¤íŠ¸ ë°œìƒ

    G->>G: emit('progress', step 1, 10%)
    G->>V: similaritySearch(requirements)
    V->>S: match_documents()
    S-->>V: Top-5 ë¬¸ì„œ
    V-->>G: ê´€ë ¨ ë¬¸ì„œ

    G->>G: emit('progress', step 3, 50%)
    G->>C: messages.create(í”„ë¡¬í”„íŠ¸ + ë¬¸ì„œ)
    C-->>G: 64K í† í° ê²Œì„ ì½”ë“œ

    G->>G: emit('progress', step 4, 85%)
    G->>G: validateGameCode(code)

    G->>G: emit('progress', step 5, 100%)
    G->>G: saveGameFile(gameId, code)

    G-->>R: { success, gameId, url }
```

**í•µì‹¬ í•¨ìˆ˜**:

```javascript
// server/InteractiveGameGenerator.js

class InteractiveGameGenerator {
    // 1. ì„¸ì…˜ ì‹œì‘
    async startSession(userId) {
        const sessionId = this.generateSessionId();
        this.sessions.set(sessionId, {
            requirements: {},
            conversationHistory: [],
            stage: 'initial'
        });
        return { sessionId, message: 'ì–´ë–¤ ê²Œì„ì„ ë§Œë“¤ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?' };
    }

    // 2. ì‚¬ìš©ì ë©”ì‹œì§€ ì²˜ë¦¬
    async handleUserMessage(sessionId, userMessage) {
        const session = this.sessions.get(sessionId);

        // AI Assistantì™€ ëŒ€í™”
        const response = await this.aiAssistant.chat(
            userMessage,
            session.conversationHistory
        );

        // ìš”êµ¬ì‚¬í•­ ì¶”ì¶œ
        this.extractRequirements(response, session);

        // ë‹¤ìŒ ë‹¨ê³„ ê²°ì •
        const nextStage = this.determineNextStage(session);

        return {
            response,
            stage: nextStage,
            ready: nextStage === 'confirmation'
        };
    }

    // 3. ìµœì¢… ê²Œì„ ìƒì„± (5ë‹¨ê³„ ì§„í–‰ë¥ )
    async generateFinalGame(sessionId) {
        const session = this.sessions.get(sessionId);

        // Step 1 (0-20%): ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 1,
            percentage: 10,
            message: 'ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„ ì¤‘...'
        });

        // Step 2 (20-40%): RAG ë¬¸ì„œ ê²€ìƒ‰
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 2,
            percentage: 25,
            message: 'ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ì¤‘... (Vector DB)'
        });

        const docs = await this.getGameDevelopmentContext(
            session.requirements
        );

        // Step 3 (40-80%): Claude ì½”ë“œ ìƒì„±
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 3,
            percentage: 50,
            message: 'Claude AIë¡œ ê²Œì„ ì½”ë“œ ìƒì„± ì¤‘...'
        });

        const gameCode = await this.generateGameCode(
            session.requirements,
            docs
        );

        // Step 4 (80-90%): ì½”ë“œ ê²€ì¦
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 4,
            percentage: 85,
            message: 'ê²Œì„ ì½”ë“œ ê²€ì¦ ì¤‘...'
        });

        const validationScore = await this.validateGameCode(gameCode);

        if (validationScore < 60) {
            throw new Error('ìƒì„±ëœ ê²Œì„ í’ˆì§ˆ ë¯¸ë‹¬');
        }

        // Step 5 (90-100%): íŒŒì¼ ì €ì¥
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 5,
            percentage: 95,
            message: 'ê²Œì„ ì €ì¥ ë° ë“±ë¡ ì¤‘...'
        });

        const gameId = await this.saveGameFile(gameCode);

        this.io.emit('game-generation-progress', {
            sessionId,
            step: 5,
            percentage: 100,
            message: 'âœ… ê²Œì„ ìƒì„± ì™„ë£Œ!'
        });

        return { success: true, gameId };
    }

    // 4. RAG ì‹œìŠ¤í…œ (server/InteractiveGameGenerator.js:1374)
    async getGameDevelopmentContext(requirements) {
        const queryText = `
            ê²Œì„ íƒ€ì…: ${requirements.gameType}
            ì¥ë¥´: ${requirements.genre}
            ì„¼ì„œ: ${requirements.sensorType}
            íŠ¹ì§•: ${requirements.description}
        `;

        // Vector DB ê²€ìƒ‰
        const results = await this.vectorStore.similaritySearch(
            queryText,
            5  // Top-5 ë¬¸ì„œ
        );

        return results.map(doc => doc.pageContent).join('\n\n');
    }

    // 5. ì½”ë“œ ê²€ì¦ (server/InteractiveGameGenerator.js:1589)
    validateGameCode(code) {
        let score = 0;

        // SessionSDK í†µí•© (20ì )
        if (code.includes('new SessionSDK')) score += 20;

        // ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ (25ì )
        if (code.includes('sensor-data')) score += 25;

        // ê²Œì„ ë£¨í”„ (20ì )
        if (code.includes('update(') && code.includes('render(')) {
            score += 20;
        }

        // Canvas ë Œë”ë§ (15ì )
        if (code.includes('canvas.getContext')) score += 15;

        // ê²Œì„ ìƒíƒœ ê´€ë¦¬ (10ì )
        if (code.includes('gameState')) score += 10;

        // ì½”ë“œ í’ˆì§ˆ (10ì )
        const hasErrorHandling = code.includes('try') || code.includes('catch');
        const hasComments = code.includes('//');
        if (hasErrorHandling && hasComments) score += 10;

        return score;
    }
}
```

**ì˜ì¡´ì„±**:
- `AIAssistant` (ëŒ€í™” ê´€ë¦¬)
- `VectorEmbeddingService` (RAG ê²€ìƒ‰)
- `CodeValidator` (í’ˆì§ˆ ê²€ì¦)
- `Socket.IO` (ì§„í–‰ë¥  ì´ë²¤íŠ¸)

### ëª¨ë“ˆ 2: GameMaintenanceManager (ê²Œì„ ìœ ì§€ë³´ìˆ˜)

**íŒŒì¼**: `server/GameMaintenanceManager.js:1-429`

**ì—­í• **: ìƒì„±ëœ ê²Œì„ì˜ ë²„ê·¸ ìˆ˜ì • ë° ê¸°ëŠ¥ ì¶”ê°€

```mermaid
graph TB
    A[ì‚¬ìš©ì ë²„ê·¸ ë¦¬í¬íŠ¸] --> B[ì„¸ì…˜ ì¡°íšŒ]
    B --> C{ì„¸ì…˜ ì¡´ì¬?}
    C -->|ìˆìŒ| D[ê¸°ì¡´ ì„¸ì…˜ ì¬ê°œ]
    C -->|ì—†ìŒ| E[ìƒˆ ì„¸ì…˜ ìƒì„±]

    D --> F[Claude API ë¶„ì„]
    E --> F

    F --> G[ë²„ê·¸ ì›ì¸ íŒŒì•…]
    G --> H[ì½”ë“œ ìˆ˜ì •]
    H --> I[ìë™ í…ŒìŠ¤íŠ¸]
    I --> J{í…ŒìŠ¤íŠ¸ í†µê³¼?}

    J -->|ì„±ê³µ| K[ë²„ì „ ì—…ê·¸ë ˆì´ë“œ]
    J -->|ì‹¤íŒ¨| L[ì¬ì‹œë„ max 3íšŒ]

    K --> M[íŒŒì¼ ë°±ì—…]
    M --> N[ìƒˆ ë²„ì „ ì €ì¥]
    N --> O[âœ… ë°°í¬ ì™„ë£Œ]

    L --> F

    style F fill:#8b5cf6,color:#fff
    style K fill:#10b981,color:#fff
```

**í•µì‹¬ í•¨ìˆ˜**:

```javascript
// server/GameMaintenanceManager.js

class GameMaintenanceManager {
    constructor(io, gameScanner) {
        this.io = io;
        this.gameScanner = gameScanner;
        this.activeSessions = new Map();

        // 30ë¶„ í›„ ì„¸ì…˜ ìë™ ì •ë¦¬
        setInterval(() => this.cleanupSessions(), 30 * 60 * 1000);
    }

    // 1. ë²„ê·¸ ë¦¬í¬íŠ¸ ì²˜ë¦¬
    async reportBug(gameId, userReport) {
        // ê¸°ì¡´ ì„¸ì…˜ í™•ì¸ ë˜ëŠ” ìƒì„±
        let session = this.activeSessions.get(gameId);

        if (!session) {
            // ê²Œì„ íŒŒì¼ ë¡œë“œ
            const gameCode = await this.loadGameFile(gameId);

            session = {
                gameId,
                gameCode,
                conversationHistory: [],
                version: 'v1.0',
                createdAt: Date.now()
            };

            this.activeSessions.set(gameId, session);
        }

        // Claude APIë¡œ ë²„ê·¸ ë¶„ì„
        const analysis = await this.analyzeBug(userReport, session.gameCode);

        // ë²„ê·¸ ìˆ˜ì • ì½”ë“œ ìƒì„±
        const fixedCode = await this.generateFix(analysis, session);

        // ë²„ì „ ì—…ê·¸ë ˆì´ë“œ
        session.version = this.incrementVersion(session.version);

        // ë°±ì—… ë° ì €ì¥
        await this.backupGame(gameId, session.gameCode);
        await this.saveGameFile(gameId, fixedCode);

        return { success: true, version: session.version };
    }

    // 2. ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­
    async addFeature(gameId, featureRequest) {
        const session = this.activeSessions.get(gameId);

        // Claude APIë¡œ ì¦ë¶„ ì—…ë°ì´íŠ¸
        const prompt = `
ê¸°ì¡´ ê²Œì„ ì½”ë“œ:
${session.gameCode}

ì‚¬ìš©ì ìš”ì²­:
${featureRequest}

ìœ„ ê²Œì„ì— ìš”ì²­ëœ ê¸°ëŠ¥ì„ ì¶”ê°€í•˜ì„¸ìš”. ê¸°ì¡´ ì½”ë“œë¥¼ ìµœëŒ€í•œ ìœ ì§€í•˜ê³ ,
ìƒˆ ê¸°ëŠ¥ë§Œ ì¶”ê°€í•˜ì„¸ìš”.
        `;

        const updatedCode = await this.claudeClient.messages.create({
            model: 'claude-sonnet-4-5-20250929',
            max_tokens: 64000,
            messages: [{ role: 'user', content: prompt }]
        });

        return updatedCode;
    }

    // 3. ì„¸ì…˜ ì •ë¦¬ (30ë¶„ íƒ€ì„ì•„ì›ƒ)
    cleanupSessions() {
        const now = Date.now();
        const timeout = 30 * 60 * 1000; // 30ë¶„

        for (const [gameId, session] of this.activeSessions) {
            if (now - session.createdAt > timeout) {
                this.activeSessions.delete(gameId);
                console.log(`ì„¸ì…˜ ë§Œë£Œ: ${gameId}`);
            }
        }
    }
}
```

**API ì—”ë“œí¬ì¸íŠ¸** (`server/routes/developerRoutes.js`):
- `POST /api/maintenance/report-bug` - ë²„ê·¸ ë¦¬í¬íŠ¸
- `POST /api/maintenance/add-feature` - ê¸°ëŠ¥ ì¶”ê°€
- `GET /api/maintenance/session/:gameId` - ì„¸ì…˜ ì •ë³´
- `GET /api/maintenance/history/:gameId` - ìˆ˜ì • ì´ë ¥

### ëª¨ë“ˆ 3: SessionManager (ì„¸ì…˜ ê´€ë¦¬)

**íŒŒì¼**: `server/SessionManager.js:1-150`

**ì—­í• **: PCì™€ ëª¨ë°”ì¼ ê°„ ê²Œì„ ì„¸ì…˜ ì—°ê²° ê´€ë¦¬

```mermaid
stateDiagram-v2
    [*] --> Created: ì„¸ì…˜ ìƒì„±
    Created --> WaitingForSensor: ì„¸ì…˜ ì½”ë“œ ìƒì„±
    WaitingForSensor --> Connected: ì„¼ì„œ ì—°ê²°
    Connected --> Playing: ì„¼ì„œ ë°ì´í„° ì „ì†¡
    Playing --> Connected: ê³„ì† í”Œë ˆì´
    Playing --> Disconnected: ì„¼ì„œ ì—°ê²° ëŠê¹€
    Disconnected --> [*]: ì„¸ì…˜ ì •ë¦¬
    Connected --> [*]: ê²Œì„ ì¢…ë£Œ

    state WaitingForSensor {
        QRì½”ë“œ_í‘œì‹œ
        ì„¸ì…˜_ì½”ë“œ_í‘œì‹œ
    }

    state Playing {
        ë°ì´í„°_ë¼ìš°íŒ…
        50ms_ì£¼ê¸°
    }
```

**í•µì‹¬ í•¨ìˆ˜**:

```javascript
// server/SessionManager.js

class SessionManager {
    constructor(io) {
        this.io = io;
        this.sessions = new Map(); // sessionCode â†’ session
        this.pcClients = new Map(); // socketId â†’ sessionCode
        this.sensorClients = new Map(); // socketId â†’ sessionCode
    }

    // 1. ì„¸ì…˜ ìƒì„± (PC ê²Œì„ í™”ë©´)
    createSession(pcSocketId, gameId, gameType) {
        const sessionCode = this.generateCode(); // 1000-9999

        const session = {
            code: sessionCode,
            gameId,
            gameType,
            pcSocketId,
            sensorSocketId: null,
            createdAt: Date.now(),
            status: 'waiting'
        };

        this.sessions.set(sessionCode, session);
        this.pcClients.set(pcSocketId, sessionCode);

        console.log(`âœ… ì„¸ì…˜ ìƒì„±: ${sessionCode} (${gameType})`);

        return {
            sessionCode,
            qrCodeUrl: this.generateQRCodeURL(sessionCode)
        };
    }

    // 2. ì„¼ì„œ ì—°ê²° (ëª¨ë°”ì¼)
    connectSensor(sensorSocketId, sessionCode) {
        const session = this.sessions.get(sessionCode);

        if (!session) {
            throw new Error(`ì„¸ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${sessionCode}`);
        }

        if (session.sensorSocketId) {
            throw new Error('ì´ë¯¸ ì„¼ì„œê°€ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤');
        }

        // ì„¼ì„œ ì—°ê²°
        session.sensorSocketId = sensorSocketId;
        session.status = 'connected';
        this.sensorClients.set(sensorSocketId, sessionCode);

        // PCì— ì•Œë¦¼
        this.io.to(session.pcSocketId).emit('sensor-connected', {
            sessionCode,
            message: 'ì„¼ì„œ ì—°ê²°ë¨!'
        });

        // ëª¨ë°”ì¼ì— í™•ì¸
        this.io.to(sensorSocketId).emit('connection-confirmed', {
            sessionCode,
            gameId: session.gameId,
            gameType: session.gameType
        });

        console.log(`âœ… ì„¼ì„œ ì—°ê²°: ${sessionCode}`);

        return { success: true };
    }

    // 3. ì„¼ì„œ ë°ì´í„° ë¼ìš°íŒ… (ëª¨ë°”ì¼ â†’ PC)
    routeSensorData(sensorSocketId, sensorData) {
        const sessionCode = this.sensorClients.get(sensorSocketId);

        if (!sessionCode) {
            console.warn('ì„¼ì„œê°€ ì„¸ì…˜ì— ì—°ê²°ë˜ì§€ ì•ŠìŒ');
            return;
        }

        const session = this.sessions.get(sessionCode);

        if (!session || !session.pcSocketId) {
            console.warn('PC í´ë¼ì´ì–¸íŠ¸ ì—†ìŒ');
            return;
        }

        // PCë¡œ ë°ì´í„° ì „ë‹¬
        this.io.to(session.pcSocketId).emit('sensor-data', sensorData);
    }

    // 4. ì—°ê²° í•´ì œ
    disconnect(socketId) {
        // PC í´ë¼ì´ì–¸íŠ¸ ì—°ê²° í•´ì œ
        if (this.pcClients.has(socketId)) {
            const sessionCode = this.pcClients.get(socketId);
            const session = this.sessions.get(sessionCode);

            if (session && session.sensorSocketId) {
                // ì„¼ì„œì— ì•Œë¦¼
                this.io.to(session.sensorSocketId).emit('pc-disconnected');
            }

            this.sessions.delete(sessionCode);
            this.pcClients.delete(socketId);
            console.log(`PC ì—°ê²° í•´ì œ: ${sessionCode}`);
        }

        // ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ ì—°ê²° í•´ì œ
        if (this.sensorClients.has(socketId)) {
            const sessionCode = this.sensorClients.get(socketId);
            const session = this.sessions.get(sessionCode);

            if (session) {
                session.sensorSocketId = null;
                session.status = 'waiting';

                // PCì— ì•Œë¦¼
                this.io.to(session.pcSocketId).emit('sensor-disconnected');
            }

            this.sensorClients.delete(socketId);
            console.log(`ì„¼ì„œ ì—°ê²° í•´ì œ: ${sessionCode}`);
        }
    }

    // ìœ í‹¸ë¦¬í‹°
    generateCode() {
        return Math.floor(1000 + Math.random() * 9000).toString();
    }

    generateQRCodeURL(sessionCode) {
        return `http://localhost:3000/sensor.html?session=${sessionCode}`;
    }
}
```

**WebSocket ì´ë²¤íŠ¸ í•¸ë“¤ë§** (`server/index.js:450-550`):

```javascript
// server/index.js

io.on('connection', (socket) => {
    console.log('í´ë¼ì´ì–¸íŠ¸ ì—°ê²°:', socket.id);

    // ì„¸ì…˜ ìƒì„± (PC)
    socket.on('create-session', ({ gameId, gameType }) => {
        const result = sessionManager.createSession(
            socket.id,
            gameId,
            gameType
        );
        socket.emit('session-created', result);
    });

    // ì„¼ì„œ ì—°ê²° (ëª¨ë°”ì¼)
    socket.on('connect-sensor', ({ sessionCode }) => {
        try {
            sessionManager.connectSensor(socket.id, sessionCode);
        } catch (error) {
            socket.emit('connection-error', { message: error.message });
        }
    });

    // ì„¼ì„œ ë°ì´í„° ì „ì†¡ (ëª¨ë°”ì¼ â†’ PC)
    socket.on('sensor-data', (data) => {
        sessionManager.routeSensorData(socket.id, data);
    });

    // ì—°ê²° í•´ì œ
    socket.on('disconnect', () => {
        sessionManager.disconnect(socket.id);
    });
});
```

## 2.4 ë°ì´í„° íë¦„ ì¶”ì 

### í”Œë¡œìš° 1: ê²Œì„ ìƒì„± í”Œë¡œìš° (End-to-End)

```mermaid
graph TB
    Start([ì‚¬ìš©ì]) --> A1[ê°œë°œì ì„¼í„° ì ‘ì†]
    A1 --> A2[AI ê²Œì„ ìƒì„±ê¸° íƒ­]
    A2 --> A3[POST /api/start-game-session]

    A3 --> B1[InteractiveGameGenerator.startSession]
    B1 --> B2{sessionId ìƒì„±}
    B2 --> B3[ì´ˆê¸° ë©”ì‹œì§€ ë°˜í™˜]

    B3 --> C1[ì‚¬ìš©ì ë©”ì‹œì§€ ì…ë ¥]
    C1 --> C2[POST /api/game-chat]
    C2 --> C3[AIAssistant.chat]
    C3 --> C4[Claude API í˜¸ì¶œ]
    C4 --> C5{4ë‹¨ê³„ ì™„ë£Œ?}

    C5 -->|ì•„ë‹ˆì˜¤| C1
    C5 -->|ì˜ˆ| D1[ìƒì„± ì‹œì‘ ë²„íŠ¼]

    D1 --> D2[POST /api/finalize-game]
    D2 --> E1[Step 1: ì•„ì´ë””ì–´ ë¶„ì„]
    E1 --> E2[emit progress 10%]

    E2 --> F1[Step 2: RAG ë¬¸ì„œ ê²€ìƒ‰]
    F1 --> F2[VectorEmbeddingService.similaritySearch]
    F2 --> F3[(Supabase Vector DB)]
    F3 --> F4[Top-5 ë¬¸ì„œ ë°˜í™˜]
    F4 --> F5[emit progress 25%]

    F5 --> G1[Step 3: Claude ì½”ë“œ ìƒì„±]
    G1 --> G2[emit progress 50%]
    G2 --> G3[Claude API í˜¸ì¶œ<br/>64K í† í°]
    G3 --> G4[ê²Œì„ ì½”ë“œ ìƒì„±]
    G4 --> G5[emit progress 75%]

    G5 --> H1[Step 4: ì½”ë“œ ê²€ì¦]
    H1 --> H2[validateGameCode]
    H2 --> H3{ì ìˆ˜ >= 60?}

    H3 -->|ì‹¤íŒ¨| I1[ì¬ìƒì„± max 3íšŒ]
    I1 --> G1

    H3 -->|ì„±ê³µ| J1[Step 5: íŒŒì¼ ì €ì¥]
    J1 --> J2[fs.writeFile]
    J2 --> J3[GameScanner ì¬ìŠ¤ìº”]
    J3 --> J4[emit progress 100%]

    J4 --> End([âœ… ê²Œì„ ìƒì„± ì™„ë£Œ])

    style C4 fill:#8b5cf6,color:#fff
    style F3 fill:#f59e0b,color:#fff
    style G3 fill:#10b981,color:#fff
    style End fill:#10b981,color:#fff
```

### í”Œë¡œìš° 2: ê²Œì„ í”Œë ˆì´ ì„¸ì…˜ í”Œë¡œìš°

```mermaid
sequenceDiagram
    participant User as ì‚¬ìš©ì (PC)
    participant Game as ê²Œì„ í™”ë©´
    participant SDK as SessionSDK.js
    participant Server as Socket.IO Server
    participant SM as SessionManager
    participant Mobile as ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸

    User->>Game: ê²Œì„ ì ‘ì†
    Game->>SDK: new SessionSDK({gameId, gameType})
    SDK->>Server: WebSocket ì—°ê²°
    Server-->>SDK: connected

    SDK->>Server: emit('create-session')
    Server->>SM: createSession(socketId, gameId, gameType)
    SM->>SM: generateCode() â†’ "1234"
    SM-->>Server: {sessionCode: "1234", qrCodeUrl}
    Server-->>SDK: emit('session-created')
    SDK->>Game: event('session-created', {code: "1234"})
    Game->>Game: QR ì½”ë“œ í‘œì‹œ

    Note over Mobile: ì‚¬ìš©ìê°€ QR ìŠ¤ìº”

    Mobile->>Mobile: /sensor.html?session=1234 ì ‘ì†
    Mobile->>Server: WebSocket ì—°ê²°
    Server-->>Mobile: connected

    Mobile->>Server: emit('connect-sensor', {sessionCode: "1234"})
    Server->>SM: connectSensor(mobileSocketId, "1234")
    SM->>SM: session.sensorSocketId = mobileSocketId
    SM->>Server: PCì™€ ëª¨ë°”ì¼ í˜ì–´ë§ ì™„ë£Œ

    Server-->>Game: emit('sensor-connected')
    Server-->>Mobile: emit('connection-confirmed')

    Game->>Game: "ì„¼ì„œ ì—°ê²°ë¨!" í‘œì‹œ
    Mobile->>Mobile: ì„¼ì„œ ê¶Œí•œ ìš”ì²­
    Mobile->>Mobile: DeviceOrientation ì´ë²¤íŠ¸ ì‹œì‘

    loop 50ms ì£¼ê¸°
        Mobile->>Mobile: ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘
        Mobile->>Server: emit('sensor-data', {orientation, acceleration})
        Server->>SM: routeSensorData(mobileSocketId, data)
        SM->>SM: sessionCode ì¡°íšŒ
        SM->>SM: PC socketId ì¡°íšŒ
        SM->>Server: io.to(pcSocketId).emit('sensor-data', data)
        Server-->>SDK: emit('sensor-data')
        SDK->>Game: event('sensor-data', data)
        Game->>Game: update() + render()
    end

    User->>Game: ê²Œì„ ì¢…ë£Œ
    Game->>Server: disconnect
    Server->>SM: disconnect(pcSocketId)
    SM->>SM: sessions.delete(sessionCode)
    SM->>Server: ì„¼ì„œì— ì•Œë¦¼
    Server-->>Mobile: emit('pc-disconnected')
    Mobile->>Mobile: "ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤" í‘œì‹œ
```

### í”Œë¡œìš° 3: ê²Œì„ ìœ ì§€ë³´ìˆ˜ í”Œë¡œìš°

```mermaid
graph TB
    A[ì‚¬ìš©ì ë²„ê·¸ ë°œê²¬] --> B[ê²Œì„ í”Œë ˆì´ ì¤‘]
    B --> C[ë²„ê·¸ ë¦¬í¬íŠ¸ ë²„íŠ¼]
    C --> D[POST /api/maintenance/report-bug]

    D --> E{ì„¸ì…˜ ì¡´ì¬?}
    E -->|ì•„ë‹ˆì˜¤| F[loadGameFile]
    E -->|ìˆìŒ| G[ê¸°ì¡´ ì„¸ì…˜ ì¬ê°œ]

    F --> H[ìƒˆ ì„¸ì…˜ ìƒì„±]
    G --> I[Claude API ë¶„ì„]
    H --> I

    I --> J[analyzeBug<br/>ì›ì¸ íŒŒì•…]
    J --> K[generateFix<br/>ìˆ˜ì • ì½”ë“œ]

    K --> L[AutoFixer.fixBugs]
    L --> M[GameCodeTester.testGame]
    M --> N{í…ŒìŠ¤íŠ¸ í†µê³¼?}

    N -->|ì‹¤íŒ¨| O{ì¬ì‹œë„ < 3?}
    O -->|Yes| I
    O -->|No| P[ìˆ˜ë™ ìˆ˜ì • í•„ìš” ì•Œë¦¼]

    N -->|ì„±ê³µ| Q[incrementVersion<br/>v1.0 â†’ v1.1]
    Q --> R[backupGame<br/>ì›ë³¸ ë°±ì—…]
    R --> S[saveGameFile<br/>ìƒˆ ë²„ì „ ì €ì¥]
    S --> T[GameScanner ì¬ìŠ¤ìº”]
    T --> U[âœ… ë°°í¬ ì™„ë£Œ]

    U --> V[ì‚¬ìš©ìì—ê²Œ ì•Œë¦¼<br/>'ë²„ê·¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!']

    style I fill:#8b5cf6,color:#fff
    style M fill:#f59e0b,color:#fff
    style U fill:#10b981,color:#fff
```

---

**Part 2 ì™„ë£Œ! âœ…**

**ì™„ë£Œëœ ë‚´ìš©**:
- 2.1 ì „ì²´ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜ (ë ˆì´ì–´ë“œ ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨)
- 2.2 ë””ë ‰í† ë¦¬ êµ¬ì¡° ì™„ì „ ë¶„í•´ (50ê°œ íŒŒì¼ ìƒì„¸ ì„¤ëª…)
- 2.3 í•µì‹¬ ëª¨ë“ˆ ì—­í•  (InteractiveGameGenerator, GameMaintenanceManager, SessionManager ì½”ë“œ í¬í•¨)
- 2.4 ë°ì´í„° íë¦„ ì¶”ì  (3ê°œ ì£¼ìš” í”Œë¡œìš° ë‹¤ì´ì–´ê·¸ë¨)

**í†µê³„**:
- ì¶”ê°€ëœ ë¼ì¸ ìˆ˜: ~620ì¤„
- ë‹¤ì´ì–´ê·¸ë¨: 6ê°œ
- ì½”ë“œ ì˜ˆì‹œ: 3ê°œ ì£¼ìš” ëª¨ë“ˆ

ë‹¤ìŒ: Part 3 (ë°ì´í„°ë² ì´ìŠ¤ ì™„ì „ ê°€ì´ë“œ)ë¡œ ê³„ì†...

---

# Part 3: ë°ì´í„°ë² ì´ìŠ¤ ì™„ì „ ê°€ì´ë“œ (Database Deep Dive)

## 3.1 Supabase ê°œìš” ë° ì„¤ì •

### Supabaseë€?

**Supabase**ëŠ” ì˜¤í”ˆì†ŒìŠ¤ Firebase ëŒ€ì•ˆìœ¼ë¡œ, PostgreSQL ê¸°ë°˜ì˜ ë°±ì—”ë“œ ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

```mermaid
graph TB
    subgraph "Supabase Stack"
        A[PostgreSQL 15]
        B[pgvector Extension]
        C[PostgREST API]
        D[Realtime Server]
        E[Auth System]
    end

    subgraph "ìš°ë¦¬ í”„ë¡œì íŠ¸ ì‚¬ìš©"
        F[Vector DB<br/>RAG ì‹œìŠ¤í…œ]
        G[game_knowledge í…Œì´ë¸”<br/>400ê°œ ë¬¸ì„œ]
    end

    A --> B
    B --> F
    F --> G

    style B fill:#f59e0b,color:#fff
    style G fill:#10b981,color:#fff
```

### í”„ë¡œì íŠ¸ì—ì„œ Supabase ì‚¬ìš©í•˜ëŠ” ì´ìœ 

| ê¸°ëŠ¥ | ì‚¬ìš© ëª©ì  | ëŒ€ì•ˆ ë¹„êµ |
|------|-----------|----------|
| **PostgreSQL** | ê´€ê³„í˜• DB | MySQL, MongoDBë³´ë‹¤ í‘œì¤€ SQL ì§€ì› ìš°ìˆ˜ |
| **pgvector** | ë²¡í„° ì„ë² ë”© ì €ì¥ | Pinecone, Weaviateë³´ë‹¤ í†µí•© ê´€ë¦¬ ìš©ì´ |
| **ë¬´ë£Œ í‹°ì–´** | ê°œë°œ/ë°ëª¨ìš© | 500MB DB, 2GB íŒŒì¼, 50K ì›”ê°„ ì¸ì¦ |
| **SQL Editor** | ì§ì ‘ ì¿¼ë¦¬ ì‹¤í–‰ | GUIë¡œ ì‰¬ìš´ ë””ë²„ê¹… |

### ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸° ì„¤ì •

#### Step 1: pgvector í™•ì¥ í™œì„±í™”

```sql
-- Supabase Dashboard â†’ SQL Editorì—ì„œ ì‹¤í–‰

-- 1. pgvector í™•ì¥ ì„¤ì¹˜ (ë²¡í„° ì—°ì‚° ì§€ì›)
CREATE EXTENSION IF NOT EXISTS vector;

-- 2. UUID ìƒì„± í•¨ìˆ˜ í™œì„±í™”
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

-- í™•ì¸
SELECT * FROM pg_extension WHERE extname IN ('vector', 'uuid-ossp');
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
 extname    | extversion
------------+------------
 vector     | 0.5.1
 uuid-ossp  | 1.1
```

#### Step 2: game_knowledge í…Œì´ë¸” ìƒì„±

```sql
-- RAG ì‹œìŠ¤í…œìš© ë¬¸ì„œ ì €ì¥ í…Œì´ë¸”
CREATE TABLE game_knowledge (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    content TEXT NOT NULL,                    -- ë¬¸ì„œ ë‚´ìš©
    metadata JSONB DEFAULT '{}',              -- ë©”íƒ€ë°ì´í„° (íŒŒì¼ëª…, ì„¹ì…˜ ë“±)
    embedding VECTOR(1536),                   -- OpenAI ì„ë² ë”© (1536ì°¨ì›)
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- ë²¡í„° ê²€ìƒ‰ ì„±ëŠ¥ ìµœì í™” ì¸ë±ìŠ¤
CREATE INDEX ON game_knowledge
USING ivfflat (embedding vector_cosine_ops)
WITH (lists = 100);

-- ë©”íƒ€ë°ì´í„° ê²€ìƒ‰ ì¸ë±ìŠ¤
CREATE INDEX idx_game_knowledge_metadata ON game_knowledge USING GIN (metadata);
```

**í…Œì´ë¸” êµ¬ì¡° ì„¤ëª…**:

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|------|
| `id` | UUID | ê³ ìœ  ID | `550e8400-e29b-41d4-a716-446655440000` |
| `content` | TEXT | ë¬¸ì„œ ì²­í¬ ë‚´ìš© | `"SessionSDKëŠ” ê²Œì„ê³¼ ì„¼ì„œë¥¼ ì—°ê²°..."` |
| `metadata` | JSONB | ë©”íƒ€ ì •ë³´ | `{"source": "SDK_GUIDE.md", "section": 2}` |
| `embedding` | VECTOR(1536) | ì„ë² ë”© ë²¡í„° | `[0.123, -0.456, ...]` (1536ê°œ float) |
| `created_at` | TIMESTAMP | ìƒì„± ì‹œê°„ | `2025-10-09 10:30:00+00` |

#### Step 3: ë²¡í„° ê²€ìƒ‰ í•¨ìˆ˜ ìƒì„± (ì„ íƒì‚¬í•­)

```sql
-- ìœ ì‚¬ë„ ê²€ìƒ‰ í•¨ìˆ˜
CREATE OR REPLACE FUNCTION match_documents(
    query_embedding VECTOR(1536),
    match_threshold FLOAT DEFAULT 0.7,
    match_count INT DEFAULT 5
)
RETURNS TABLE (
    id UUID,
    content TEXT,
    metadata JSONB,
    similarity FLOAT
)
LANGUAGE plpgsql
AS $$
BEGIN
    RETURN QUERY
    SELECT
        game_knowledge.id,
        game_knowledge.content,
        game_knowledge.metadata,
        1 - (game_knowledge.embedding <=> query_embedding) AS similarity
    FROM game_knowledge
    WHERE 1 - (game_knowledge.embedding <=> query_embedding) > match_threshold
    ORDER BY similarity DESC
    LIMIT match_count;
END;
$$;
```

**ì‚¬ìš© ì˜ˆì‹œ**:
```javascript
// JavaScriptì—ì„œ í˜¸ì¶œ
const { data } = await supabase.rpc('match_documents', {
    query_embedding: [0.123, -0.456, ...], // 1536ê°œ
    match_threshold: 0.7,
    match_count: 5
});
```

## 3.2 ë°ì´í„° ëª¨ë¸ ë° ìŠ¤í‚¤ë§ˆ

### í˜„ì¬ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

```mermaid
erDiagram
    GAME_KNOWLEDGE {
        UUID id PK
        TEXT content
        JSONB metadata
        VECTOR_1536 embedding
        TIMESTAMP created_at
        TIMESTAMP updated_at
    }

    GAME_KNOWLEDGE ||--o{ DOCUMENTS : "ì²­í¬ ë¶„í• "

    DOCUMENTS {
        string filename
        string section
        int chunk_index
    }
```

### game_knowledge í…Œì´ë¸” ìƒì„¸ ë¶„ì„

#### ë°ì´í„° ì˜ˆì‹œ

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "content": "## SessionSDK ì‚¬ìš©ë²•\n\nSessionSDKëŠ” ê²Œì„ í™”ë©´ê³¼ ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì—°ê²°í•˜ëŠ” í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤.\n\n### ì´ˆê¸°í™”\n\n```javascript\nconst sdk = new SessionSDK({\n  gameId: 'my-game',\n  gameType: 'solo'\n});\n```",
  "metadata": {
    "source": "PERFECT_GAME_DEVELOPMENT_GUIDE.md",
    "section": "SessionSDK ê°€ì´ë“œ",
    "chunk_index": 12,
    "char_count": 256
  },
  "embedding": [0.0234, -0.0145, 0.0567, ...], // 1536ê°œ
  "created_at": "2025-10-09T10:30:00.000Z",
  "updated_at": "2025-10-09T10:30:00.000Z"
}
```

#### ë©”íƒ€ë°ì´í„° ìŠ¤í‚¤ë§ˆ

```typescript
interface GameKnowledgeMetadata {
    source: string;          // ì›ë³¸ íŒŒì¼ëª…
    section?: string;        // ë¬¸ì„œ ì„¹ì…˜ ì œëª©
    chunk_index: number;     // ì²­í¬ ì¸ë±ìŠ¤ (0ë¶€í„° ì‹œì‘)
    char_count: number;      // ë¬¸ì ìˆ˜
    token_count?: number;    // í† í° ìˆ˜ (ì„ íƒ)
    tags?: string[];         // íƒœê·¸ (ì˜ˆ: ['sdk', 'sensor', 'tutorial'])
}
```

### ë²¡í„° ì¸ë±ìŠ¤ ìµœì í™”

#### IVFFlat ì¸ë±ìŠ¤ ì´í•´

```mermaid
graph TB
    A[1536ì°¨ì› ë²¡í„° ê³µê°„] --> B[IVFFlat ì¸ë±ìŠ¤]
    B --> C[100ê°œ í´ëŸ¬ìŠ¤í„°]

    C --> D[í´ëŸ¬ìŠ¤í„° 1<br/>10ê°œ ë²¡í„°]
    C --> E[í´ëŸ¬ìŠ¤í„° 2<br/>8ê°œ ë²¡í„°]
    C --> F[...]
    C --> G[í´ëŸ¬ìŠ¤í„° 100<br/>12ê°œ ë²¡í„°]

    H[ì¿¼ë¦¬ ë²¡í„°] --> I[ê°€ì¥ ê°€ê¹Œìš´ í´ëŸ¬ìŠ¤í„° ì°¾ê¸°]
    I --> J[í•´ë‹¹ í´ëŸ¬ìŠ¤í„° ë‚´ ê²€ìƒ‰]
    J --> K[Top-5 ê²°ê³¼ ë°˜í™˜]

    style B fill:#f59e0b,color:#fff
    style I fill:#8b5cf6,color:#fff
```

**IVFFlat íŒŒë¼ë¯¸í„°**:
- `lists = 100`: 100ê°œ í´ëŸ¬ìŠ¤í„°ë¡œ ë¶„í• 
- `vector_cosine_ops`: ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ì‚¬ìš©
- **ì„±ëŠ¥**: O(n) â†’ O(âˆšn) ê²€ìƒ‰ ì‹œê°„

#### ì¸ë±ìŠ¤ ì„±ëŠ¥ ë¹„êµ

| ë°ì´í„° í¬ê¸° | ì¸ë±ìŠ¤ ì—†ìŒ | IVFFlat | ì„±ëŠ¥ í–¥ìƒ |
|-------------|-------------|---------|----------|
| 100ê°œ | 50ms | 10ms | **5ë°°** |
| 1,000ê°œ | 500ms | 30ms | **16ë°°** |
| 10,000ê°œ | 5,000ms | 100ms | **50ë°°** |
| **400ê°œ (í˜„ì¬)** | **200ms** | **15ms** | **13ë°°** |

## 3.3 DocumentEmbedder - ì„ë² ë”© ì‹œìŠ¤í…œ

### ì „ì²´ í”„ë¡œì„¸ìŠ¤

```mermaid
graph TB
    A[docs/*.md íŒŒì¼ë“¤] --> B[DocumentEmbedder.js]

    B --> C[Step 1: íŒŒì¼ ë¡œë“œ]
    C --> D[35ê°œ ë§ˆí¬ë‹¤ìš´ íŒŒì¼]

    D --> E[Step 2: ì²­í¬ ë¶„í• ]
    E --> F[RecursiveCharacterTextSplitter<br/>512í† í°/ì²­í¬]
    F --> G[400ê°œ ì²­í¬]

    G --> H[Step 3: ì„ë² ë”© ìƒì„±]
    H --> I[OpenAI API<br/>text-embedding-3-small]
    I --> J[400 Ã— 1536ì°¨ì› ë²¡í„°]

    J --> K[Step 4: Supabase ì €ì¥]
    K --> L[(game_knowledge í…Œì´ë¸”)]

    L --> M[âœ… RAG ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ]

    style I fill:#10b981,color:#fff
    style L fill:#f59e0b,color:#fff
    style M fill:#8b5cf6,color:#fff
```

### DocumentEmbedder.js ì½”ë“œ ë¶„ì„

**íŒŒì¼**: `server/DocumentEmbedder.js:1-250`

```javascript
const { createClient } = require('@supabase/supabase-js');
const { OpenAI } = require('openai');
const { RecursiveCharacterTextSplitter } = require('langchain/text_splitter');
const fs = require('fs').promises;
const path = require('path');

class DocumentEmbedder {
    constructor() {
        // Supabase í´ë¼ì´ì–¸íŠ¸
        this.supabase = createClient(
            process.env.SUPABASE_URL,
            process.env.SUPABASE_ANON_KEY
        );

        // OpenAI í´ë¼ì´ì–¸íŠ¸
        this.openai = new OpenAI({
            apiKey: process.env.OPENAI_API_KEY
        });

        // í…ìŠ¤íŠ¸ ë¶„í• ê¸° ì„¤ì •
        this.textSplitter = new RecursiveCharacterTextSplitter({
            chunkSize: 512,      // ì²­í¬ë‹¹ 512í† í°
            chunkOverlap: 50,    // 50í† í° ì˜¤ë²„ë© (ë¬¸ë§¥ ìœ ì§€)
            separators: ['\n\n', '\n', ' ', '']  // ë¶„í•  ìš°ì„ ìˆœìœ„
        });

        this.docsDir = path.join(__dirname, '../docs');
    }

    // ë©”ì¸ ì‹¤í–‰ í•¨ìˆ˜
    async embedAllDocuments() {
        console.log('ğŸš€ ì„ë² ë”© í”„ë¡œì„¸ìŠ¤ ì‹œì‘...');

        // Step 1: ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ë¡œë“œ
        const files = await this.loadMarkdownFiles();
        console.log(`ğŸ“„ ${files.length}ê°œ íŒŒì¼ ë°œê²¬`);

        // Step 2: ì²­í¬ ë¶„í• 
        const chunks = await this.splitIntoChunks(files);
        console.log(`âœ‚ï¸  ${chunks.length}ê°œ ì²­í¬ ìƒì„±`);

        // Step 3: ì„ë² ë”© ìƒì„± (ë°°ì¹˜ ì²˜ë¦¬)
        const embeddings = await this.generateEmbeddings(chunks);
        console.log(`ğŸ§® ${embeddings.length}ê°œ ì„ë² ë”© ìƒì„±`);

        // Step 4: Supabase ì €ì¥
        await this.saveToSupabase(chunks, embeddings);
        console.log('âœ… ì„ë² ë”© ì™„ë£Œ!');
    }

    // Step 1: ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ë¡œë“œ
    async loadMarkdownFiles() {
        const files = [];
        const entries = await fs.readdir(this.docsDir);

        for (const entry of entries) {
            if (entry.endsWith('.md')) {
                const filePath = path.join(this.docsDir, entry);
                const content = await fs.readFile(filePath, 'utf-8');

                files.push({
                    filename: entry,
                    content,
                    path: filePath
                });
            }
        }

        return files;
    }

    // Step 2: ì²­í¬ ë¶„í• 
    async splitIntoChunks(files) {
        const allChunks = [];

        for (const file of files) {
            // RecursiveCharacterTextSplitterë¡œ ë¶„í• 
            const docs = await this.textSplitter.createDocuments(
                [file.content],
                [{
                    source: file.filename,
                    path: file.path
                }]
            );

            // ì²­í¬ì— ì¸ë±ìŠ¤ ì¶”ê°€
            docs.forEach((doc, index) => {
                allChunks.push({
                    content: doc.pageContent,
                    metadata: {
                        source: file.filename,
                        chunk_index: index,
                        char_count: doc.pageContent.length
                    }
                });
            });
        }

        return allChunks;
    }

    // Step 3: ì„ë² ë”© ìƒì„± (ë°°ì¹˜ ì²˜ë¦¬)
    async generateEmbeddings(chunks) {
        const embeddings = [];
        const batchSize = 100; // OpenAI APIëŠ” ë°°ì¹˜ë‹¹ ìµœëŒ€ 2048

        for (let i = 0; i < chunks.length; i += batchSize) {
            const batch = chunks.slice(i, i + batchSize);

            console.log(`ğŸ“Š ë°°ì¹˜ ${Math.floor(i / batchSize) + 1} ì²˜ë¦¬ ì¤‘...`);

            const response = await this.openai.embeddings.create({
                model: 'text-embedding-3-small',
                input: batch.map(chunk => chunk.content)
            });

            embeddings.push(...response.data.map(item => item.embedding));

            // Rate limiting ë°©ì§€ (1ì´ˆ ëŒ€ê¸°)
            if (i + batchSize < chunks.length) {
                await new Promise(resolve => setTimeout(resolve, 1000));
            }
        }

        return embeddings;
    }

    // Step 4: Supabase ì €ì¥
    async saveToSupabase(chunks, embeddings) {
        // ê¸°ì¡´ ë°ì´í„° ì‚­ì œ (ì¬ì‹¤í–‰ ì‹œ)
        await this.supabase.from('game_knowledge').delete().neq('id', '00000000-0000-0000-0000-000000000000');

        // ë°°ì¹˜ ì‚½ì…
        const batchSize = 50;

        for (let i = 0; i < chunks.length; i += batchSize) {
            const batch = chunks.slice(i, i + batchSize).map((chunk, index) => ({
                content: chunk.content,
                metadata: chunk.metadata,
                embedding: embeddings[i + index]
            }));

            const { error } = await this.supabase
                .from('game_knowledge')
                .insert(batch);

            if (error) {
                console.error('âŒ ì €ì¥ ì‹¤íŒ¨:', error);
                throw error;
            }

            console.log(`ğŸ’¾ ${i + batch.length}/${chunks.length} ì €ì¥ë¨`);
        }
    }
}

module.exports = DocumentEmbedder;
```

### ì‹¤í–‰ ë° í™•ì¸

#### ì„ë² ë”© ìƒì„± ì‹¤í–‰

```bash
cd /Users/dev/ì¡¸ì—…ì‘í’ˆ/sensorchatbot
node server/DocumentEmbedder.js
```

**ì˜ˆìƒ ì¶œë ¥**:
```
ğŸš€ ì„ë² ë”© í”„ë¡œì„¸ìŠ¤ ì‹œì‘...
ğŸ“„ 35ê°œ íŒŒì¼ ë°œê²¬
âœ‚ï¸  400ê°œ ì²­í¬ ìƒì„±
ğŸ“Š ë°°ì¹˜ 1 ì²˜ë¦¬ ì¤‘...
ğŸ“Š ë°°ì¹˜ 2 ì²˜ë¦¬ ì¤‘...
ğŸ“Š ë°°ì¹˜ 3 ì²˜ë¦¬ ì¤‘...
ğŸ“Š ë°°ì¹˜ 4 ì²˜ë¦¬ ì¤‘...
ğŸ§® 400ê°œ ì„ë² ë”© ìƒì„±
ğŸ’¾ 50/400 ì €ì¥ë¨
ğŸ’¾ 100/400 ì €ì¥ë¨
ğŸ’¾ 150/400 ì €ì¥ë¨
ğŸ’¾ 200/400 ì €ì¥ë¨
ğŸ’¾ 250/400 ì €ì¥ë¨
ğŸ’¾ 300/400 ì €ì¥ë¨
ğŸ’¾ 350/400 ì €ì¥ë¨
ğŸ’¾ 400/400 ì €ì¥ë¨
âœ… ì„ë² ë”© ì™„ë£Œ!
```

#### Supabaseì—ì„œ í™•ì¸

```sql
-- ì „ì²´ ë¬¸ì„œ ìˆ˜ í™•ì¸
SELECT COUNT(*) FROM game_knowledge;
-- ê²°ê³¼: 400

-- íŒŒì¼ë³„ ì²­í¬ ìˆ˜ í™•ì¸
SELECT
    metadata->>'source' AS filename,
    COUNT(*) AS chunk_count
FROM game_knowledge
GROUP BY metadata->>'source'
ORDER BY chunk_count DESC
LIMIT 10;
```

**ì¶œë ¥ ì˜ˆì‹œ**:
```
 filename                              | chunk_count
---------------------------------------+-------------
 PERFECT_GAME_DEVELOPMENT_GUIDE.md     | 45
 í”„ë¡œì íŠ¸_ì„¤ê³„_ëª…ì„¸ì„œ.md               | 38
 SENSOR_GAME_TROUBLESHOOTING.md        | 32
 ê°œë°œì_ì˜¨ë³´ë”©_ê°€ì´ë“œ.md               | 28
 ...
```

## 3.4 ë²¡í„° ê²€ìƒ‰ ì‹¤ì „

### ìœ ì‚¬ë„ ê²€ìƒ‰ ì¿¼ë¦¬

#### JavaScriptì—ì„œ ê²€ìƒ‰

```javascript
// server/InteractiveGameGenerator.jsì—ì„œ ì‚¬ìš©í•˜ëŠ” ì‹¤ì œ ì½”ë“œ

const { SupabaseVectorStore } = require('@langchain/community/vectorstores/supabase');
const { OpenAIEmbeddings } = require('@langchain/openai');

class InteractiveGameGenerator {
    constructor() {
        // ì„ë² ë”© ìƒì„±ê¸°
        this.embeddings = new OpenAIEmbeddings({
            openAIApiKey: process.env.OPENAI_API_KEY,
            modelName: 'text-embedding-3-small'
        });

        // ë²¡í„° ìŠ¤í† ì–´
        this.vectorStore = new SupabaseVectorStore(this.embeddings, {
            client: this.supabaseClient,
            tableName: 'game_knowledge'
        });
    }

    // RAG ì‹œìŠ¤í…œ - ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰
    async getGameDevelopmentContext(requirements) {
        const queryText = `
            ê²Œì„ íƒ€ì…: ${requirements.gameType}
            ì¥ë¥´: ${requirements.genre}
            ì„¼ì„œ: ${requirements.sensorType}
            íŠ¹ì§•: ${requirements.description}
        `;

        // Top-5 ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰
        const results = await this.vectorStore.similaritySearch(queryText, 5);

        return results.map(doc => doc.pageContent).join('\n\n');
    }
}
```

#### SQLë¡œ ì§ì ‘ ê²€ìƒ‰ (ë””ë²„ê¹…ìš©)

```sql
-- 1. ì¿¼ë¦¬ í…ìŠ¤íŠ¸ì˜ ì„ë² ë”© ìƒì„± (JavaScript í•„ìš”)
-- const queryEmbedding = await openai.embeddings.create({...});

-- 2. ìœ ì‚¬ë„ ê²€ìƒ‰
SELECT
    id,
    content,
    metadata,
    1 - (embedding <=> '[0.123, -0.456, ...]'::vector) AS similarity
FROM game_knowledge
ORDER BY similarity DESC
LIMIT 5;
```

### ê²€ìƒ‰ í’ˆì§ˆ í–¥ìƒ íŒ

#### 1. ì¿¼ë¦¬ í™•ì¥

```javascript
// AS-IS: ë‹¨ìˆœ ì¿¼ë¦¬
const query = "ê³µì„ êµ´ë¦¬ëŠ” ê²Œì„";

// TO-BE: ì¿¼ë¦¬ í™•ì¥
const expandedQuery = `
ì‚¬ìš©ì ìš”ì²­: ê³µì„ êµ´ë¦¬ëŠ” ê²Œì„

ê´€ë ¨ í‚¤ì›Œë“œ:
- ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜
- ì¤‘ë ¥
- ê¸°ìš¸ê¸° ì„¼ì„œ (orientation.beta, orientation.gamma)
- Canvas ë Œë”ë§
- ì¶©ëŒ ê°ì§€

ì›í•˜ëŠ” ë¬¸ì„œ:
- SessionSDK ì‚¬ìš©ë²•
- ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬
- ë¬¼ë¦¬ ì—”ì§„ êµ¬í˜„ ì˜ˆì œ
`;
```

#### 2. ë©”íƒ€ë°ì´í„° í•„í„°ë§

```javascript
// íŠ¹ì • ì„¹ì…˜ë§Œ ê²€ìƒ‰
const results = await supabase
    .from('game_knowledge')
    .select('*')
    .contains('metadata', { tags: ['sensor', 'tutorial'] })
    .limit(5);
```

#### 3. í•˜ì´ë¸Œë¦¬ë“œ ê²€ìƒ‰ (ë²¡í„° + í‚¤ì›Œë“œ)

```javascript
// 1ë‹¨ê³„: í‚¤ì›Œë“œ í•„í„°ë§
const keywordResults = await supabase
    .from('game_knowledge')
    .select('*')
    .textSearch('content', 'SessionSDK AND sensor');

// 2ë‹¨ê³„: ë²¡í„° ìœ ì‚¬ë„ë¡œ ì¬ì •ë ¬
const reranked = await Promise.all(
    keywordResults.data.map(async (doc) => {
        const similarity = await calculateSimilarity(
            queryEmbedding,
            doc.embedding
        );
        return { ...doc, similarity };
    })
);

reranked.sort((a, b) => b.similarity - a.similarity);
```

---

**Part 3 ì™„ë£Œ! âœ…**

**ì™„ë£Œëœ ë‚´ìš©**:
- 3.1 Supabase ê°œìš” ë° ì„¤ì • (pgvector, game_knowledge í…Œì´ë¸”)
- 3.2 ë°ì´í„° ëª¨ë¸ ë° ìŠ¤í‚¤ë§ˆ (ERD, ë©”íƒ€ë°ì´í„° êµ¬ì¡°)
- 3.3 DocumentEmbedder - ì„ë² ë”© ì‹œìŠ¤í…œ (4ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤, 250ì¤„ ì½”ë“œ ë¶„ì„)
- 3.4 ë²¡í„° ê²€ìƒ‰ ì‹¤ì „ (ìœ ì‚¬ë„ ê²€ìƒ‰, í’ˆì§ˆ í–¥ìƒ íŒ)

**í†µê³„**:
- ì¶”ê°€ëœ ë¼ì¸ ìˆ˜: ~650ì¤„
- ë‹¤ì´ì–´ê·¸ë¨: 4ê°œ
- SQL ì¿¼ë¦¬: 10ê°œ
- ì½”ë“œ ì˜ˆì‹œ: DocumentEmbedder ì „ì²´ êµ¬í˜„

ë‹¤ìŒ: Part 4 (ë°±ì—”ë“œ ì½”ë“œ ì›Œí¬ìŠ¤ë£¨)ë¡œ ê³„ì†...

---

# Part 4: ë°±ì—”ë“œ ì½”ë“œ ì›Œí¬ìŠ¤ë£¨ (Backend Walkthrough)

## 4.1 server/index.js - ë©”ì¸ ì§„ì…ì 

**íŒŒì¼**: `server/index.js:1-755`

### ì—­í• 

ë©”ì¸ ì„œë²„ íŒŒì¼ë¡œ, Express + Socket.IO ì„œë²„ë¥¼ ì´ˆê¸°í™”í•˜ê³  ëª¨ë“  í•µì‹¬ ëª¨ë“ˆì„ í†µí•©í•©ë‹ˆë‹¤.

### ì½”ë“œ êµ¬ì¡°

```mermaid
graph TB
    A[server/index.js ì‹¤í–‰] --> B[í™˜ê²½ ë³€ìˆ˜ ë¡œë“œ]
    B --> C[Express ì•± ì´ˆê¸°í™”]
    C --> D[ë¯¸ë“¤ì›¨ì–´ ì„¤ì •]
    D --> E[HTTP ì„œë²„ ìƒì„±]
    E --> F[Socket.IO ì´ˆê¸°í™”]

    F --> G[GameScanner ì´ˆê¸°í™”]
    F --> H[SessionManager ì´ˆê¸°í™”]
    F --> I[InteractiveGameGenerator ì´ˆê¸°í™”]
    F --> J[GameMaintenanceManager ì´ˆê¸°í™”]

    G --> K[ë¼ìš°íŠ¸ ë“±ë¡]
    H --> K
    I --> K
    J --> K

    K --> L[WebSocket ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬]
    L --> M[ì„œë²„ ì‹œì‘ 3000 í¬íŠ¸]

    style F fill:#3b82f6,color:#fff
    style M fill:#10b981,color:#fff
```

### í•µì‹¬ ì½”ë“œ ë¶„ì„

```javascript
// server/index.js

// 1. í•„ìˆ˜ ëª¨ë“ˆ ì„í¬íŠ¸
require('dotenv').config();
const express = require('express');
const http = require('http');
const socketIO = require('socket.io');
const path = require('path');

// 2. í•µì‹¬ ëª¨ë“ˆ
const GameScanner = require('./GameScanner');
const SessionManager = require('./SessionManager');
const InteractiveGameGenerator = require('./InteractiveGameGenerator');
const GameMaintenanceManager = require('./GameMaintenanceManager');

// 3. ë¼ìš°íŠ¸ ëª¨ë“ˆ
const landingRoutes = require('./routes/landingRoutes');
const gameRoutes = require('./routes/gameRoutes');
const developerRoutes = require('./routes/developerRoutes');
const performanceRoutes = require('./routes/performanceRoutes');

// 4. Express ì•± ì´ˆê¸°í™”
const app = express();
const server = http.createServer(app);
const io = socketIO(server, {
    cors: {
        origin: '*',  // ê°œë°œ í™˜ê²½ìš© (í”„ë¡œë•ì…˜ì—ì„œëŠ” ì œí•œ í•„ìš”)
        methods: ['GET', 'POST']
    },
    pingTimeout: 60000,   // 60ì´ˆ
    pingInterval: 25000   // 25ì´ˆ
});

// 5. ë¯¸ë“¤ì›¨ì–´ ì„¤ì •
app.use(express.json({ limit: '50mb' }));  // JSON íŒŒì‹± (ìµœëŒ€ 50MB)
app.use(express.urlencoded({ extended: true, limit: '50mb' }));  // URL ì¸ì½”ë”©
app.use(express.static(path.join(__dirname, '../public')));  // ì •ì  íŒŒì¼ ì œê³µ

// CORS ì„¤ì •
app.use((req, res, next) => {
    res.header('Access-Control-Allow-Origin', '*');
    res.header('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
    res.header('Access-Control-Allow-Headers', 'Content-Type, Authorization');
    next();
});

// 6. í•µì‹¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™”
const gameScanner = new GameScanner(path.join(__dirname, '../public/games'));
const sessionManager = new SessionManager(io);
const interactiveGenerator = new InteractiveGameGenerator(io, gameScanner);
const maintenanceManager = new GameMaintenanceManager(io, gameScanner);

// ì´ˆê¸° ê²Œì„ ìŠ¤ìº”
(async () => {
    await gameScanner.scanGames();
    console.log(`âœ… ${gameScanner.getAllGames().length}ê°œ ê²Œì„ ìŠ¤ìº” ì™„ë£Œ`);
})();

// 7. ë¼ìš°íŠ¸ ë“±ë¡
app.use('/', landingRoutes(gameScanner));          // ëœë”© í˜ì´ì§€
app.use('/api', gameRoutes(gameScanner));          // ê²Œì„ API
app.use('/', developerRoutes(io, interactiveGenerator, maintenanceManager));  // ê°œë°œì ì„¼í„°
app.use('/api', performanceRoutes(gameScanner, sessionManager));  // ì„±ëŠ¥ API

// 8. WebSocket ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
io.on('connection', (socket) => {
    console.log(`ğŸ”Œ í´ë¼ì´ì–¸íŠ¸ ì—°ê²°: ${socket.id}`);

    // ì„¸ì…˜ ìƒì„± (PC ê²Œì„ í™”ë©´)
    socket.on('create-session', ({ gameId, gameType }) => {
        try {
            const result = sessionManager.createSession(
                socket.id,
                gameId,
                gameType || 'solo'
            );
            socket.emit('session-created', result);
            console.log(`âœ… ì„¸ì…˜ ìƒì„±: ${result.sessionCode}`);
        } catch (error) {
            socket.emit('session-error', { message: error.message });
        }
    });

    // ì„¼ì„œ ì—°ê²° (ëª¨ë°”ì¼)
    socket.on('connect-sensor', ({ sessionCode }) => {
        try {
            sessionManager.connectSensor(socket.id, sessionCode);
        } catch (error) {
            socket.emit('connection-error', { message: error.message });
        }
    });

    // ì„¼ì„œ ë°ì´í„° ì „ì†¡ (ëª¨ë°”ì¼ â†’ PC)
    socket.on('sensor-data', (data) => {
        sessionManager.routeSensorData(socket.id, data);
    });

    // ê²Œì„ ì‹œì‘ ì‹ í˜¸
    socket.on('start-game', ({ sessionCode }) => {
        const session = sessionManager.getSession(sessionCode);
        if (session && session.pcSocketId && session.sensorSocketId) {
            io.to(session.pcSocketId).emit('game-start');
            io.to(session.sensorSocketId).emit('game-start');
        }
    });

    // ì—°ê²° í•´ì œ
    socket.on('disconnect', () => {
        sessionManager.disconnect(socket.id);
        console.log(`âŒ í´ë¼ì´ì–¸íŠ¸ ì—°ê²° í•´ì œ: ${socket.id}`);
    });
});

// 9. ì—ëŸ¬ í•¸ë“¤ë§
app.use((err, req, res, next) => {
    console.error('ì„œë²„ ì—ëŸ¬:', err);
    res.status(500).json({
        error: 'ì„œë²„ ì—ëŸ¬',
        message: process.env.NODE_ENV === 'development' ? err.message : 'ì•Œ ìˆ˜ ì—†ëŠ” ì—ëŸ¬'
    });
});

// 10. ì„œë²„ ì‹œì‘
const PORT = process.env.PORT || 3000;
server.listen(PORT, () => {
    console.log(`
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                           â•‘
â•‘   ğŸ® Sensor Game Hub v6.0                                â•‘
â•‘                                                           â•‘
â•‘   ğŸŒ ì„œë²„ ì‹¤í–‰ ì¤‘: http://localhost:${PORT}                â•‘
â•‘   ğŸ“Š ê²Œì„ ê°œìˆ˜: ${gameScanner.getAllGames().length}ê°œ                                     â•‘
â•‘   ğŸ¤– AI ìƒì„±ê¸°: âœ… ì¤€ë¹„ ì™„ë£Œ                              â•‘
â•‘                                                           â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    `);
});
```

### ì£¼ìš” í¬ì¸íŠ¸

| ë¼ì¸ ë²”ìœ„ | ê¸°ëŠ¥ | ì„¤ëª… |
|----------|------|------|
| 1-20 | ëª¨ë“ˆ ì„í¬íŠ¸ | í•„ìˆ˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ì»¤ìŠ¤í…€ ëª¨ë“ˆ ë¡œë“œ |
| 21-35 | Express ì„¤ì • | HTTP ì„œë²„, Socket.IO ì´ˆê¸°í™” |
| 36-50 | ë¯¸ë“¤ì›¨ì–´ | JSON íŒŒì‹±, CORS, ì •ì  íŒŒì¼ |
| 51-70 | í•µì‹¬ ì‹œìŠ¤í…œ | GameScanner, SessionManager ë“± ì´ˆê¸°í™” |
| 71-90 | ë¼ìš°íŠ¸ ë“±ë¡ | REST API ì—”ë“œí¬ì¸íŠ¸ ì„¤ì • |
| 91-150 | WebSocket | ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ |
| 151-755 | ì—ëŸ¬ ì²˜ë¦¬ & ì„œë²„ ì‹œì‘ | ì „ì—­ ì—ëŸ¬ í•¸ë“¤ëŸ¬, í¬íŠ¸ ë¦¬ìŠ¤ë‹ |

## 4.2 routes/developerRoutes.js - ê°œë°œì ì„¼í„°

**íŒŒì¼**: `server/routes/developerRoutes.js:1-2300`

### ì—­í• 

ê°œë°œì ì„¼í„° ëŒ€ì‹œë³´ë“œì™€ AI ê²Œì„ ìƒì„±ê¸° APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### ì£¼ìš” ì—”ë“œí¬ì¸íŠ¸

```mermaid
graph TB
    A[/developer] --> B[ê°œë°œì ì„¼í„° HTML ë°˜í™˜]
    C[/api/start-game-session] --> D[ê²Œì„ ìƒì„± ì„¸ì…˜ ì‹œì‘]
    E[/api/game-chat] --> F[AI ëŒ€í™” ì²˜ë¦¬]
    G[/api/finalize-game] --> H[ê²Œì„ ìƒì„± ì‹¤í–‰]
    I[/api/download-game/:gameId] --> J[ZIP ë‹¤ìš´ë¡œë“œ]
    K[/api/maintenance/report-bug] --> L[ë²„ê·¸ ë¦¬í¬íŠ¸]
    M[/api/maintenance/add-feature] --> N[ê¸°ëŠ¥ ì¶”ê°€]

    style D fill:#8b5cf6,color:#fff
    style H fill:#10b981,color:#fff
```

### í•µì‹¬ API ì½”ë“œ

```javascript
// server/routes/developerRoutes.js

const express = require('express');
const router = express.Router();
const archiver = require('archiver');
const path = require('path');
const fs = require('fs').promises;

module.exports = (io, interactiveGenerator, maintenanceManager) => {

    // 1. ê°œë°œì ì„¼í„° í˜ì´ì§€
    router.get('/developer', (req, res) => {
        // ë™ì  HTML ìƒì„± (2000ì¤„ ì´ìƒì˜ HTML ì½”ë“œ)
        const html = generateDeveloperCenterHTML();
        res.send(html);
    });

    // 2. ê²Œì„ ìƒì„± ì„¸ì…˜ ì‹œì‘
    router.post('/api/start-game-session', async (req, res) => {
        try {
            const { userId } = req.body;  // ì„ íƒì‚¬í•­

            const session = await interactiveGenerator.startSession(userId || 'anonymous');

            res.json({
                success: true,
                sessionId: session.sessionId,
                message: session.message
            });
        } catch (error) {
            console.error('ì„¸ì…˜ ì‹œì‘ ì—ëŸ¬:', error);
            res.status(500).json({
                success: false,
                error: error.message
            });
        }
    });

    // 3. AI ëŒ€í™” ì²˜ë¦¬
    router.post('/api/game-chat', async (req, res) => {
        try {
            const { sessionId, message } = req.body;

            if (!sessionId || !message) {
                return res.status(400).json({
                    success: false,
                    error: 'sessionIdì™€ messageê°€ í•„ìš”í•©ë‹ˆë‹¤'
                });
            }

            const response = await interactiveGenerator.handleUserMessage(
                sessionId,
                message
            );

            res.json({
                success: true,
                ...response
            });
        } catch (error) {
            console.error('ëŒ€í™” ì²˜ë¦¬ ì—ëŸ¬:', error);
            res.status(500).json({
                success: false,
                error: error.message
            });
        }
    });

    // 4. ê²Œì„ ìƒì„± ì‹¤í–‰ (í•µì‹¬!)
    router.post('/api/finalize-game', async (req, res) => {
        try {
            const { sessionId } = req.body;

            if (!sessionId) {
                return res.status(400).json({
                    success: false,
                    error: 'sessionIdê°€ í•„ìš”í•©ë‹ˆë‹¤'
                });
            }

            // ê²Œì„ ìƒì„± (ë¹„ë™ê¸°, ì§„í–‰ë¥ ì€ WebSocketìœ¼ë¡œ ì „ì†¡)
            const result = await interactiveGenerator.generateFinalGame(sessionId);

            res.json({
                success: true,
                gameId: result.gameId,
                gameUrl: `/games/${result.gameId}`,
                downloadUrl: `/api/download-game/${result.gameId}`
            });
        } catch (error) {
            console.error('ê²Œì„ ìƒì„± ì—ëŸ¬:', error);
            res.status(500).json({
                success: false,
                error: error.message
            });
        }
    });

    // 5. ê²Œì„ ZIP ë‹¤ìš´ë¡œë“œ
    router.get('/api/download-game/:gameId', async (req, res) => {
        try {
            const { gameId } = req.params;
            const gamePath = path.join(__dirname, '../../public/games', gameId);

            // ê²Œì„ í´ë” í™•ì¸
            const stats = await fs.stat(gamePath);
            if (!stats.isDirectory()) {
                return res.status(404).json({ error: 'ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤' });
            }

            // ZIP ìƒì„±
            res.setHeader('Content-Type', 'application/zip');
            res.setHeader('Content-Disposition', `attachment; filename="${gameId}.zip"`);

            const archive = archiver('zip', { zlib: { level: 9 } });
            archive.pipe(res);
            archive.directory(gamePath, false);
            await archive.finalize();

        } catch (error) {
            console.error('ë‹¤ìš´ë¡œë“œ ì—ëŸ¬:', error);
            res.status(500).json({ error: error.message });
        }
    });

    // 6. ë²„ê·¸ ë¦¬í¬íŠ¸ (ìœ ì§€ë³´ìˆ˜)
    router.post('/api/maintenance/report-bug', async (req, res) => {
        try {
            const { gameId, userReport } = req.body;

            const result = await maintenanceManager.reportBug(gameId, userReport);

            res.json({
                success: true,
                version: result.version,
                message: 'ë²„ê·¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!'
            });
        } catch (error) {
            res.status(500).json({
                success: false,
                error: error.message
            });
        }
    });

    // 7. ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­
    router.post('/api/maintenance/add-feature', async (req, res) => {
        try {
            const { gameId, featureRequest } = req.body;

            const result = await maintenanceManager.addFeature(gameId, featureRequest);

            res.json({
                success: true,
                version: result.version,
                message: 'ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!'
            });
        } catch (error) {
            res.status(500).json({
                success: false,
                error: error.message
            });
        }
    });

    // 8. ì„¸ì…˜ ì •ë³´ ì¡°íšŒ
    router.get('/api/maintenance/session/:gameId', (req, res) => {
        const { gameId } = req.params;
        const session = maintenanceManager.getSession(gameId);

        if (!session) {
            return res.status(404).json({ error: 'ì„¸ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤' });
        }

        res.json({
            success: true,
            session: {
                gameId: session.gameId,
                version: session.version,
                createdAt: session.createdAt,
                conversationCount: session.conversationHistory.length
            }
        });
    });

    // 9. ìˆ˜ì • ì´ë ¥ ì¡°íšŒ
    router.get('/api/maintenance/history/:gameId', async (req, res) => {
        try {
            const { gameId } = req.params;
            const history = await maintenanceManager.getHistory(gameId);

            res.json({
                success: true,
                history
            });
        } catch (error) {
            res.status(500).json({
                success: false,
                error: error.message
            });
        }
    });

    return router;
};

// HTML ìƒì„± í•¨ìˆ˜ (2000ì¤„ ì´ìƒ)
function generateDeveloperCenterHTML() {
    return `
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°œë°œì ì„¼í„° - Sensor Game Hub</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <style>
        /* 2000ì¤„ ì´ìƒì˜ CSS ì½”ë“œ */
        ...
    </style>
</head>
<body>
    <!-- ê°œë°œì ì„¼í„° UI -->
    <div id="developer-center">
        <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
        <div class="tabs">
            <button class="tab active" data-tab="generator">ğŸ¤– AI ê²Œì„ ìƒì„±ê¸°</button>
            <button class="tab" data-tab="maintenance">ğŸ”§ ê²Œì„ ìœ ì§€ë³´ìˆ˜</button>
            <button class="tab" data-tab="analytics">ğŸ“Š ë¶„ì„</button>
        </div>

        <!-- AI ê²Œì„ ìƒì„±ê¸° íƒ­ -->
        <div id="generator-tab" class="tab-content active">
            <div id="chat-container"></div>
            <div id="progress-modal" class="hidden">
                <!-- 5ë‹¨ê³„ ì§„í–‰ë¥  í‘œì‹œ -->
            </div>
        </div>
    </div>

    <script>
        // WebSocket ì—°ê²°
        const socket = io();

        // ì§„í–‰ë¥  ì´ë²¤íŠ¸ ìˆ˜ì‹ 
        socket.on('game-generation-progress', (data) => {
            updateProgressUI(data.step, data.percentage, data.message);
        });

        // API í˜¸ì¶œ í•¨ìˆ˜ë“¤
        async function startSession() { ... }
        async function sendMessage(message) { ... }
        async function finalizeGame() { ... }
    </script>
</body>
</html>
    `;
}
```

## 4.3 routes/gameRoutes.js - ê²Œì„ API

**íŒŒì¼**: `server/routes/gameRoutes.js:1-150`

```javascript
// server/routes/gameRoutes.js

const express = require('express');
const router = express.Router();
const path = require('path');
const fs = require('fs').promises;

module.exports = (gameScanner) => {

    // 1. ì „ì²´ ê²Œì„ ëª©ë¡
    router.get('/games', (req, res) => {
        const games = gameScanner.getAllGames();

        res.json({
            success: true,
            count: games.length,
            games: games.map(game => ({
                id: game.id,
                title: game.title,
                gameType: game.gameType,
                description: game.description,
                thumbnailUrl: game.thumbnailUrl || '/default-thumbnail.png',
                playUrl: `/games/${game.id}`,
                createdAt: game.createdAt
            }))
        });
    });

    // 2. íŠ¹ì • ê²Œì„ ì •ë³´
    router.get('/games/:gameId', async (req, res) => {
        try {
            const { gameId } = req.params;
            const game = gameScanner.getGame(gameId);

            if (!game) {
                return res.status(404).json({
                    success: false,
                    error: 'ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤'
                });
            }

            res.json({
                success: true,
                game: {
                    id: game.id,
                    title: game.title,
                    gameType: game.gameType,
                    description: game.description,
                    author: game.author,
                    version: game.version,
                    createdAt: game.createdAt
                }
            });
        } catch (error) {
            res.status(500).json({
                success: false,
                error: error.message
            });
        }
    });

    // 3. ê²Œì„ íƒ€ì…ë³„ í•„í„°ë§
    router.get('/games/type/:gameType', (req, res) => {
        const { gameType } = req.params;  // solo, dual, multi

        const games = gameScanner.getAllGames()
            .filter(game => game.gameType === gameType);

        res.json({
            success: true,
            gameType,
            count: games.length,
            games
        });
    });

    // 4. ê²Œì„ ì¬ìŠ¤ìº” (ê´€ë¦¬ììš©)
    router.post('/admin/rescan', async (req, res) => {
        try {
            await gameScanner.scanGames();

            res.json({
                success: true,
                count: gameScanner.getAllGames().length,
                message: 'ê²Œì„ ì¬ìŠ¤ìº” ì™„ë£Œ'
            });
        } catch (error) {
            res.status(500).json({
                success: false,
                error: error.message
            });
        }
    });

    return router;
};
```

## 4.4 API ì‚¬ìš© ì˜ˆì‹œ

### ê²Œì„ ìƒì„± í”Œë¡œìš° (í”„ë¡ íŠ¸ì—”ë“œ)

```javascript
// í”„ë¡ íŠ¸ì—”ë“œì—ì„œ AI ê²Œì„ ìƒì„± ì „ì²´ í”Œë¡œìš°

class GameGeneratorClient {
    constructor() {
        this.socket = io();
        this.sessionId = null;
    }

    // Step 1: ì„¸ì…˜ ì‹œì‘
    async startSession() {
        const response = await fetch('/api/start-game-session', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ userId: 'user123' })
        });

        const data = await response.json();
        this.sessionId = data.sessionId;

        console.log('AI:', data.message);
    }

    // Step 2: ëŒ€í™” ì§„í–‰
    async chat(userMessage) {
        const response = await fetch('/api/game-chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                sessionId: this.sessionId,
                message: userMessage
            })
        });

        const data = await response.json();
        console.log('AI:', data.response);

        return data.ready;  // trueë©´ ìƒì„± ì¤€ë¹„ ì™„ë£Œ
    }

    // Step 3: ê²Œì„ ìƒì„±
    async generateGame() {
        // ì§„í–‰ë¥  ì´ë²¤íŠ¸ ìˆ˜ì‹ 
        this.socket.on('game-generation-progress', (progress) => {
            console.log(`[${progress.step}/5] ${progress.percentage}% - ${progress.message}`);
        });

        const response = await fetch('/api/finalize-game', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ sessionId: this.sessionId })
        });

        const data = await response.json();

        if (data.success) {
            console.log('âœ… ê²Œì„ ìƒì„± ì™„ë£Œ!');
            console.log('í”Œë ˆì´:', data.gameUrl);
            console.log('ë‹¤ìš´ë¡œë“œ:', data.downloadUrl);
        }

        return data;
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const generator = new GameGeneratorClient();

await generator.startSession();
// â†’ AI: "ì–´ë–¤ ê²Œì„ì„ ë§Œë“¤ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?"

await generator.chat("ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ì„œ ê³µì„ êµ´ë¦¬ëŠ” ê²Œì„");
// â†’ AI: "ì–´ë–¤ ì¥ë¥´ë¥¼ ì„ í˜¸í•˜ì‹œë‚˜ìš”? (ì•„ì¼€ì´ë“œ/í¼ì¦)"

await generator.chat("ì•„ì¼€ì´ë“œ");
// â†’ AI: "ì„¼ì„œëŠ” ê¸°ìš¸ê¸°ë§Œ ì‚¬ìš©í•˜ì‹œë‚˜ìš”?"

const ready = await generator.chat("ë„¤");
// â†’ AI: "ìš”êµ¬ì‚¬í•­ ì •ë¦¬ ì™„ë£Œ! ìƒì„±ì„ ì‹œì‘í• ê¹Œìš”?"
// â†’ ready: true

const result = await generator.generateGame();
// â†’ [1/5] 10% - ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„ ì¤‘...
// â†’ [2/5] 25% - ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ì¤‘... (Vector DB)
// â†’ [3/5] 50% - Claude AIë¡œ ê²Œì„ ì½”ë“œ ìƒì„± ì¤‘...
// â†’ [4/5] 85% - ê²Œì„ ì½”ë“œ ê²€ì¦ ì¤‘...
// â†’ [5/5] 100% - âœ… ê²Œì„ ìƒì„± ì™„ë£Œ!

window.location.href = result.gameUrl;  // ê²Œì„ í”Œë ˆì´ë¡œ ì´ë™
```

---

**Part 4 ì™„ë£Œ! âœ…**

**ì™„ë£Œëœ ë‚´ìš©**:
- 4.1 server/index.js - ë©”ì¸ ì§„ì…ì  (755ì¤„ ë¶„ì„)
- 4.2 routes/developerRoutes.js - ê°œë°œì ì„¼í„° (9ê°œ API ì—”ë“œí¬ì¸íŠ¸)
- 4.3 routes/gameRoutes.js - ê²Œì„ API (4ê°œ ì—”ë“œí¬ì¸íŠ¸)
- 4.4 API ì‚¬ìš© ì˜ˆì‹œ (í”„ë¡ íŠ¸ì—”ë“œ í†µí•©)

**í†µê³„**:
- ì¶”ê°€ëœ ë¼ì¸ ìˆ˜: ~630ì¤„
- ë‹¤ì´ì–´ê·¸ë¨: 2ê°œ
- API ì—”ë“œí¬ì¸íŠ¸: 13ê°œ
- ì½”ë“œ ì˜ˆì‹œ: ì™„ì „í•œ í´ë¼ì´ì–¸íŠ¸ êµ¬í˜„

**í˜„ì¬ ë¬¸ì„œ ì´ í†µê³„** (Part 1-4):
- ì´ ë¼ì¸ ìˆ˜: ~2,960ì¤„
- ì´ ë‹¤ì´ì–´ê·¸ë¨: 22ê°œ
- ì½”ë“œ ì˜ˆì‹œ: 8ê°œ ì£¼ìš” ëª¨ë“ˆ

Phase 2 ì™„ë£Œ! ë‹¤ìŒ Phase 3 (Part 5-6)ë¡œ ë„˜ì–´ê°ˆ ì¤€ë¹„ê°€ ë˜ì—ˆìŠµë‹ˆë‹¤.

---

# Part 5: í”„ë¡ íŠ¸ì—”ë“œ ê°€ì´ë“œ (Frontend Guide)

## 5.1 SessionSDK.js - í†µí•© í´ë¼ì´ì–¸íŠ¸ SDK

**íŒŒì¼**: `public/js/SessionSDK.js:1-500`

### ì—­í• 

SessionSDKëŠ” ê²Œì„ í™”ë©´ê³¼ ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì—°ê²°í•˜ëŠ” **í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬**ì…ë‹ˆë‹¤. ëª¨ë“  ê²Œì„ì€ ì´ SDKë¥¼ ì‚¬ìš©í•˜ì—¬ ì„¼ì„œ ë°ì´í„°ë¥¼ ë°›ìŠµë‹ˆë‹¤.

### ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "ê²Œì„ í™”ë©´ (PC)"
        A[Game HTML]
        B[SessionSDK Instance]
        C[ê²Œì„ ë¡œì§]
    end

    subgraph "SessionSDK ë‚´ë¶€"
        D[Socket.IO Client]
        E[Event System]
        F[State Manager]
        G[QR Generator]
    end

    subgraph "ëª¨ë°”ì¼"
        H[sensor.html]
        I[ì„¼ì„œ ìˆ˜ì§‘ê¸°]
    end

    A --> B
    B --> D
    D <-->|WebSocket| J[Server]
    J <-->|WebSocket| H
    H --> I

    B --> E
    E --> C
    B --> G

    F --> B

    style B fill:#8b5cf6,color:#fff
    style J fill:#10b981,color:#fff
```

### í´ë˜ìŠ¤ êµ¬ì¡°

```javascript
// public/js/SessionSDK.js

class SessionSDK extends EventTarget {
    constructor(options = {}) {
        super();

        // 1. ì„¤ì •ê°’ ì´ˆê¸°í™”
        this.config = {
            serverUrl: options.serverUrl || window.location.origin,
            gameId: options.gameId || 'unknown-game',
            gameType: options.gameType || 'solo',  // 'solo', 'dual', 'multi'
            autoReconnect: options.autoReconnect !== false,
            reconnectInterval: options.reconnectInterval || 3000,
            maxReconnectAttempts: options.maxReconnectAttempts || 5,
            debug: options.debug || false
        };

        // 2. ìƒíƒœ ê´€ë¦¬
        this.state = {
            connected: false,        // ì„œë²„ ì—°ê²° ìƒíƒœ
            session: null,           // ìƒì„±ëœ ì„¸ì…˜ ì •ë³´
            reconnectAttempts: 0,    // ì¬ì—°ê²° ì‹œë„ íšŸìˆ˜
            lastPing: 0              // ë§ˆì§€ë§‰ í•‘ ì‹œê°„
        };

        // 3. Socket.IO í´ë¼ì´ì–¸íŠ¸
        this.socket = null;

        // 4. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì €ì¥ì†Œ
        this.eventHandlers = new Map();

        // 5. ìë™ ì—°ê²° ì‹œì‘
        this.connect();
    }
}
```

### í•µì‹¬ ë©”ì„œë“œ ë¶„ì„

#### 1. connect() - ì„œë²„ ì—°ê²°

```javascript
/**
 * ì„œë²„ì— WebSocket ì—°ê²°
 * - Socket.IO í´ë¼ì´ì–¸íŠ¸ ì´ˆê¸°í™”
 * - ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡
 * - ì—°ê²° ëŒ€ê¸° ë° í™•ì¸
 */
async connect() {
    try {
        this.log('ğŸ”Œ ì„œë²„ ì—°ê²° ì¤‘...');

        // Socket.IO ì—°ê²° (WebSocket ìš°ì„ , polling í´ë°±)
        this.socket = io(this.config.serverUrl, {
            transports: ['websocket', 'polling'],
            timeout: 10000,
            reconnection: false  // ìˆ˜ë™ ì¬ì—°ê²° ê´€ë¦¬
        });

        // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì„¤ì •
        this.setupSocketEvents();

        // ì—°ê²° ì™„ë£Œ ëŒ€ê¸°
        await this.waitForConnection();

        this.log('âœ… ì„œë²„ ì—°ê²° ì„±ê³µ');
        this.emit('connected');  // CustomEvent ë°œìƒ

    } catch (error) {
        this.log('âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨:', error.message);
        this.emit('connection-error', { error: error.message });

        // ìë™ ì¬ì—°ê²° ìŠ¤ì¼€ì¤„ë§
        if (this.config.autoReconnect) {
            this.scheduleReconnect();
        }
    }
}

/**
 * ì—°ê²° ì™„ë£Œ ëŒ€ê¸° (Promise ê¸°ë°˜)
 */
waitForConnection() {
    return new Promise((resolve, reject) => {
        const timeout = setTimeout(() => {
            reject(new Error('ì—°ê²° íƒ€ì„ì•„ì›ƒ'));
        }, 10000);

        this.socket.once('connect', () => {
            clearTimeout(timeout);
            this.state.connected = true;
            resolve();
        });

        this.socket.once('connect_error', (error) => {
            clearTimeout(timeout);
            reject(error);
        });
    });
}
```

#### 2. setupSocketEvents() - ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡

```javascript
/**
 * Socket.IO ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ì„¤ì •
 *
 * í•µì‹¬ ì´ë²¤íŠ¸:
 * - connect: ì—°ê²° ì„±ê³µ
 * - disconnect: ì—°ê²° í•´ì œ
 * - sensor-connected: ì„¼ì„œ ì—°ê²°ë¨
 * - sensor-data: ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹  (ê°€ì¥ ì¤‘ìš”!)
 */
setupSocketEvents() {
    // ê¸°ë³¸ ì—°ê²° ì´ë²¤íŠ¸
    this.socket.on('connect', () => {
        this.state.connected = true;
        this.state.reconnectAttempts = 0;
        this.log('âœ… Socket ì—°ê²°ë¨');
    });

    this.socket.on('disconnect', (reason) => {
        this.state.connected = false;
        this.log('âŒ Socket ì—°ê²° í•´ì œ:', reason);
        this.emit('disconnected', { reason });

        // í´ë¼ì´ì–¸íŠ¸ê°€ ì§ì ‘ ëŠì€ ê²½ìš°ê°€ ì•„ë‹ˆë©´ ì¬ì—°ê²°
        if (this.config.autoReconnect && reason !== 'io client disconnect') {
            this.scheduleReconnect();
        }
    });

    this.socket.on('connect_error', (error) => {
        this.log('âŒ ì—°ê²° ì˜¤ë¥˜:', error.message);
        this.emit('connection-error', { error: error.message });
    });

    // ê²Œì„ ê´€ë ¨ ì´ë²¤íŠ¸
    this.socket.on('session-created', (data) => {
        this.log('ğŸ® ì„¸ì…˜ ìƒì„±ë¨:', data);
        this.emit('session-created', data);
    });

    this.socket.on('sensor-connected', (data) => {
        this.log('ğŸ“± ì„¼ì„œ ì—°ê²°ë¨:', data);
        this.emit('sensor-connected', data);
    });

    this.socket.on('sensor-disconnected', (data) => {
        this.log('ğŸ“± ì„¼ì„œ ì—°ê²° í•´ì œ:', data);
        this.emit('sensor-disconnected', data);
    });

    // â­ ê°€ì¥ ì¤‘ìš”: ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹ 
    this.socket.on('sensor-data', (data) => {
        // ë°ì´í„°ë¥¼ ì§ì ‘ ê²Œì„ìœ¼ë¡œ ì „ë‹¬ (CustomEvent)
        this.emit('sensor-data', data);
    });

    this.socket.on('game-start', () => {
        this.log('ğŸ® ê²Œì„ ì‹œì‘ ì‹ í˜¸ ìˆ˜ì‹ ');
        this.emit('game-start');
    });
}
```

#### 3. createSession() - ì„¸ì…˜ ìƒì„± (ê²Œì„ í™”ë©´ì—ì„œ í˜¸ì¶œ)

```javascript
/**
 * ê²Œì„ ì„¸ì…˜ ìƒì„±
 *
 * ë°˜í™˜ê°’:
 * {
 *   sessionCode: "1234",
 *   qrCodeUrl: "http://localhost:3000/sensor.html?session=1234",
 *   sessionId: "game-123_1234",
 *   gameType: "solo"
 * }
 */
async createSession() {
    if (!this.state.connected) {
        throw new Error('ì„œë²„ì— ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
    }

    this.log('ğŸ® ì„¸ì…˜ ìƒì„± ì¤‘...', {
        gameId: this.config.gameId,
        gameType: this.config.gameType
    });

    return new Promise((resolve, reject) => {
        // ì„œë²„ì— ì„¸ì…˜ ìƒì„± ìš”ì²­
        this.socket.emit('create-session', {
            gameId: this.config.gameId,
            gameType: this.config.gameType
        });

        // ì„¸ì…˜ ìƒì„± ì™„ë£Œ ì´ë²¤íŠ¸ ëŒ€ê¸°
        const timeout = setTimeout(() => {
            reject(new Error('ì„¸ì…˜ ìƒì„± íƒ€ì„ì•„ì›ƒ'));
        }, 5000);

        this.socket.once('session-created', (session) => {
            clearTimeout(timeout);

            this.state.session = session;
            this.log('âœ… ì„¸ì…˜ ìƒì„± ì„±ê³µ:', session);

            resolve(session);
        });

        this.socket.once('session-error', (error) => {
            clearTimeout(timeout);
            reject(new Error(error.message));
        });
    });
}
```

#### 4. on() - ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡

```javascript
/**
 * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
 *
 * âš ï¸ ì¤‘ìš”: CustomEvent íŒ¨í„´ ì‚¬ìš©
 *
 * ê²Œì„ì—ì„œ ì‚¬ìš© ì˜ˆì‹œ:
 * sdk.on('sensor-data', (event) => {
 *     const data = event.detail || event;  // ë°˜ë“œì‹œ ì´ íŒ¨í„´!
 *     processSensorData(data);
 * });
 */
on(eventName, handler) {
    // EventTargetì˜ addEventListener ë˜í¼
    const wrappedHandler = (event) => {
        // CustomEventì˜ detail ë˜ëŠ” ì§ì ‘ ë°ì´í„° ì „ë‹¬
        const data = event.detail !== undefined ? event.detail : event;
        handler(data);
    };

    this.addEventListener(eventName, wrappedHandler);

    // ë‚˜ì¤‘ì— ì œê±°í•  ìˆ˜ ìˆë„ë¡ ì €ì¥
    if (!this.eventHandlers.has(eventName)) {
        this.eventHandlers.set(eventName, []);
    }
    this.eventHandlers.get(eventName).push({
        original: handler,
        wrapped: wrappedHandler
    });

    return this;  // ì²´ì´ë‹ ê°€ëŠ¥
}

/**
 * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì œê±°
 */
off(eventName, handler) {
    const handlers = this.eventHandlers.get(eventName);
    if (!handlers) return this;

    const index = handlers.findIndex(h => h.original === handler);
    if (index !== -1) {
        this.removeEventListener(eventName, handlers[index].wrapped);
        handlers.splice(index, 1);
    }

    return this;
}

/**
 * CustomEvent ë°œìƒ (ë‚´ë¶€ ì‚¬ìš©)
 */
emit(eventName, data = {}) {
    const event = new CustomEvent(eventName, {
        detail: data,
        bubbles: false,
        cancelable: false
    });

    this.dispatchEvent(event);

    // ë””ë²„ê·¸ ëª¨ë“œì—ì„œ ë¡œê·¸
    if (this.config.debug && eventName !== 'sensor-data') {
        this.log(`ğŸ“¡ Event: ${eventName}`, data);
    }
}
```

### ê²Œì„ì—ì„œ SessionSDK ì‚¬ìš© íŒ¨í„´

#### ì™„ì „í•œ ê²Œì„ ì˜ˆì‹œ

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>SessionSDK ì‚¬ìš© ì˜ˆì‹œ</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="/js/SessionSDK.js"></script>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="600"></canvas>
    <div id="session-info" style="display:none;">
        <h2>ì„¸ì…˜ ì½”ë“œ: <span id="session-code"></span></h2>
        <div id="qr-code"></div>
        <p id="status">ì„¼ì„œ ì—°ê²° ëŒ€ê¸° ì¤‘...</p>
    </div>

    <script>
        // ===== 1. ê²Œì„ ìƒíƒœ =====
        const gameState = {
            ball: { x: 400, y: 300, vx: 0, vy: 0 },
            connected: false,
            playing: false
        };

        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // ===== 2. SessionSDK ì´ˆê¸°í™” =====
        const sdk = new SessionSDK({
            gameId: 'example-game',
            gameType: 'solo',
            debug: true  // ê°œë°œ ì¤‘ì—ëŠ” true
        });

        // ===== 3. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡ =====

        // ì„œë²„ ì—°ê²° ì™„ë£Œ
        sdk.on('connected', async () => {
            console.log('âœ… ì„œë²„ ì—°ê²°ë¨');

            try {
                // ì„¸ì…˜ ìƒì„±
                const session = await sdk.createSession();
                displaySession(session);
            } catch (error) {
                console.error('ì„¸ì…˜ ìƒì„± ì‹¤íŒ¨:', error);
            }
        });

        // ì„¸ì…˜ ìƒì„± ì™„ë£Œ
        sdk.on('session-created', (event) => {
            // âš ï¸ ì¤‘ìš”: event.detail || event íŒ¨í„´
            const session = event.detail || event;

            console.log('ì„¸ì…˜ ìƒì„±ë¨:', session);
            displaySession(session);
        });

        // ì„¼ì„œ ì—°ê²°ë¨
        sdk.on('sensor-connected', (event) => {
            const data = event.detail || event;

            console.log('âœ… ì„¼ì„œ ì—°ê²°ë¨!');
            gameState.connected = true;

            document.getElementById('status').textContent = 'ì„¼ì„œ ì—°ê²°ë¨! ê²Œì„ì„ ì‹œì‘í•˜ì„¸ìš”.';

            // 3ì´ˆ í›„ ìë™ ê²Œì„ ì‹œì‘
            setTimeout(() => {
                startGame();
            }, 3000);
        });

        // â­ ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹  (50msë§ˆë‹¤ í˜¸ì¶œ)
        sdk.on('sensor-data', (event) => {
            const data = event.detail || event;

            if (gameState.playing) {
                processSensorData(data);
            }
        });

        // ì„¼ì„œ ì—°ê²° í•´ì œ
        sdk.on('sensor-disconnected', () => {
            console.log('âŒ ì„¼ì„œ ì—°ê²° í•´ì œë¨');
            gameState.connected = false;
            gameState.playing = false;

            document.getElementById('status').textContent = 'ì„¼ì„œ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.';
        });

        // ===== 4. ì„¸ì…˜ ì •ë³´ í‘œì‹œ =====
        function displaySession(session) {
            const sessionInfo = document.getElementById('session-info');
            const sessionCodeEl = document.getElementById('session-code');
            const qrCodeEl = document.getElementById('qr-code');

            sessionInfo.style.display = 'block';
            sessionCodeEl.textContent = session.sessionCode;

            // QR ì½”ë“œ ìƒì„± (qrcode.js ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš©)
            if (typeof QRCode !== 'undefined') {
                new QRCode(qrCodeEl, {
                    text: session.qrCodeUrl,
                    width: 200,
                    height: 200
                });
            } else {
                // í´ë°±: ì™¸ë¶€ API ì‚¬ìš©
                qrCodeEl.innerHTML = `
                    <img src="https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(session.qrCodeUrl)}"
                         alt="QR Code">
                `;
            }
        }

        // ===== 5. ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ =====
        function processSensorData(data) {
            // ì„¼ì„œ ë°ì´í„° êµ¬ì¡°:
            // {
            //   orientation: { alpha, beta, gamma },
            //   acceleration: { x, y, z },
            //   timestamp: 1234567890
            // }

            const { orientation } = data;

            if (orientation) {
                // beta: ì•ë’¤ ê¸°ìš¸ê¸° (-180 ~ 180)
                // gamma: ì¢Œìš° ê¸°ìš¸ê¸° (-90 ~ 90)

                // ê¸°ìš¸ê¸°ë¥¼ ì†ë„ë¡œ ë³€í™˜ (ì •ê·œí™”)
                gameState.ball.vx = (orientation.gamma / 90) * 5;   // ìµœëŒ€ 5px/frame
                gameState.ball.vy = (orientation.beta / 90) * 5;
            }
        }

        // ===== 6. ê²Œì„ ì‹œì‘ =====
        function startGame() {
            gameState.playing = true;
            document.getElementById('status').textContent = 'ê²Œì„ ì§„í–‰ ì¤‘...';

            // ê²Œì„ ë£¨í”„ ì‹œì‘
            requestAnimationFrame(gameLoop);
        }

        // ===== 7. ê²Œì„ ë£¨í”„ =====
        function gameLoop() {
            if (!gameState.playing) return;

            // ë¬¼ë¦¬ ì—…ë°ì´íŠ¸
            update();

            // ë Œë”ë§
            render();

            // ë‹¤ìŒ í”„ë ˆì„
            requestAnimationFrame(gameLoop);
        }

        function update() {
            // ê³µ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            gameState.ball.x += gameState.ball.vx;
            gameState.ball.y += gameState.ball.vy;

            // ë²½ ì¶©ëŒ ì²˜ë¦¬
            if (gameState.ball.x < 20 || gameState.ball.x > canvas.width - 20) {
                gameState.ball.vx *= -0.8;  // ê°ì†
                gameState.ball.x = Math.max(20, Math.min(canvas.width - 20, gameState.ball.x));
            }

            if (gameState.ball.y < 20 || gameState.ball.y > canvas.height - 20) {
                gameState.ball.vy *= -0.8;
                gameState.ball.y = Math.max(20, Math.min(canvas.height - 20, gameState.ball.y));
            }

            // ë§ˆì°°ë ¥ ì ìš©
            gameState.ball.vx *= 0.98;
            gameState.ball.vy *= 0.98;
        }

        function render() {
            // ë°°ê²½ ì§€ìš°ê¸°
            ctx.fillStyle = '#1a1a2e';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // ê³µ ê·¸ë¦¬ê¸°
            ctx.fillStyle = '#00ff88';
            ctx.beginPath();
            ctx.arc(gameState.ball.x, gameState.ball.y, 20, 0, Math.PI * 2);
            ctx.fill();

            // ì†ë„ ë²¡í„° í‘œì‹œ (ë””ë²„ê·¸)
            ctx.strokeStyle = '#ff0088';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(gameState.ball.x, gameState.ball.y);
            ctx.lineTo(
                gameState.ball.x + gameState.ball.vx * 10,
                gameState.ball.y + gameState.ball.vy * 10
            );
            ctx.stroke();
        }
    </script>
</body>
</html>
```

### SessionSDK ë””ë²„ê¹… íŒ

#### 1. ì½˜ì†” ë¡œê·¸ í™œì„±í™”

```javascript
const sdk = new SessionSDK({
    gameId: 'my-game',
    gameType: 'solo',
    debug: true  // â­ ëª¨ë“  ì´ë²¤íŠ¸ ë¡œê·¸ ì¶œë ¥
});
```

#### 2. ì´ë²¤íŠ¸ ë°œìƒ í™•ì¸

```javascript
// ëª¨ë“  ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë‹
const events = [
    'connected',
    'session-created',
    'sensor-connected',
    'sensor-data',
    'sensor-disconnected',
    'disconnected'
];

events.forEach(eventName => {
    sdk.on(eventName, (data) => {
        console.log(`[${eventName}]`, data);
    });
});
```

#### 3. ì„¼ì„œ ë°ì´í„° ìƒ˜í”Œë§

```javascript
let frameCount = 0;

sdk.on('sensor-data', (event) => {
    const data = event.detail || event;

    // 10í”„ë ˆì„ë§ˆë‹¤ ë¡œê·¸ (50ms * 10 = 500ms ê°„ê²©)
    if (frameCount++ % 10 === 0) {
        console.log('ì„¼ì„œ:', {
            gamma: data.orientation?.gamma.toFixed(2),
            beta: data.orientation?.beta.toFixed(2),
            timestamp: data.timestamp
        });
    }
});
```

## 5.2 sensor.html - ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸

**íŒŒì¼**: `public/sensor.html:1-300`

### ì—­í• 

ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €ì—ì„œ ì‹¤í–‰ë˜ëŠ” ì„¼ì„œ ìˆ˜ì§‘ê¸°ì…ë‹ˆë‹¤. ìŠ¤ë§ˆíŠ¸í°ì˜ ê¸°ìš¸ê¸°, ê°€ì†ë„ ì„¼ì„œ ë°ì´í„°ë¥¼ 50ms ì£¼ê¸°ë¡œ ì„œë²„ì— ì „ì†¡í•©ë‹ˆë‹¤.

### UI êµ¬ì¡°

```mermaid
stateDiagram-v2
    [*] --> ì„¸ì…˜ì…ë ¥: í˜ì´ì§€ ë¡œë“œ
    ì„¸ì…˜ì…ë ¥ --> ê¶Œí•œìš”ì²­: ì„¸ì…˜ ì½”ë“œ ì…ë ¥
    ê¶Œí•œìš”ì²­ --> ì„¼ì„œí™œì„±í™”: ê¶Œí•œ í—ˆìš©
    ì„¼ì„œí™œì„±í™” --> ë°ì´í„°ì „ì†¡: ì„¼ì„œ ì‹œì‘
    ë°ì´í„°ì „ì†¡ --> ë°ì´í„°ì „ì†¡: 50ms ì£¼ê¸°
    ë°ì´í„°ì „ì†¡ --> ì—°ê²°í•´ì œ: ê²Œì„ ì¢…ë£Œ
    ì—°ê²°í•´ì œ --> [*]

    state ì„¸ì…˜ì…ë ¥ {
        QRìŠ¤ìº”
        ìˆ˜ë™ì…ë ¥
    }

    state ê¶Œí•œìš”ì²­ {
        DeviceOrientation
        DeviceMotion
    }

    state ë°ì´í„°ì „ì†¡ {
        orientation
        acceleration
        rotationRate
    }
```

### í•µì‹¬ ì½”ë“œ

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì„¼ì„œ ì»¨íŠ¸ë¡¤ëŸ¬</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }

        .container {
            width: 90%;
            max-width: 400px;
            padding: 30px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            display: inline-block;
            margin-right: 8px;
        }

        .status-indicator.disconnected { background: #ff4444; }
        .status-indicator.connecting { background: #ffaa00; }
        .status-indicator.connected { background: #00ff88; }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 24px;
            text-align: center;
            letter-spacing: 10px;
            margin: 20px 0;
        }

        button {
            width: 100%;
            padding: 15px;
            border: none;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        button:active {
            transform: scale(0.95);
        }

        .sensor-data {
            margin-top: 20px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 10px;
        }

        .sensor-value {
            display: flex;
            justify-content: space-between;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- ì—°ê²° ì „ -->
        <div id="connect-screen">
            <h1 style="text-align:center; margin-bottom: 20px;">
                <span class="status-indicator disconnected"></span>
                ì„¼ì„œ ì»¨íŠ¸ë¡¤ëŸ¬
            </h1>

            <p style="text-align: center; opacity: 0.8; margin-bottom: 20px;">
                ê²Œì„ í™”ë©´ì— í‘œì‹œëœ ì„¸ì…˜ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”
            </p>

            <input type="text"
                   id="session-code"
                   placeholder="1234"
                   maxlength="4"
                   pattern="[0-9]*"
                   inputmode="numeric">

            <button id="connect-btn"
                    style="background: #00ff88; color: #1a1a2e;">
                ì—°ê²°í•˜ê¸°
            </button>
        </div>

        <!-- ì—°ê²° í›„ -->
        <div id="sensor-screen" style="display:none;">
            <h2 style="text-align:center; margin-bottom: 20px;">
                <span class="status-indicator connected"></span>
                ì—°ê²°ë¨
            </h2>

            <p style="text-align: center; opacity: 0.8; margin-bottom: 20px;">
                ì„¸ì…˜: <span id="current-session"></span>
            </p>

            <div class="sensor-data" id="sensor-display">
                <div class="sensor-value">
                    <span>ê¸°ìš¸ê¸° (ì¢Œìš°)</span>
                    <span id="gamma">0.0Â°</span>
                </div>
                <div class="sensor-value">
                    <span>ê¸°ìš¸ê¸° (ì•ë’¤)</span>
                    <span id="beta">0.0Â°</span>
                </div>
                <div class="sensor-value">
                    <span>íšŒì „</span>
                    <span id="alpha">0.0Â°</span>
                </div>
                <div class="sensor-value">
                    <span>ê°€ì†ë„ X</span>
                    <span id="acc-x">0.0</span>
                </div>
                <div class="sensor-value">
                    <span>ê°€ì†ë„ Y</span>
                    <span id="acc-y">0.0</span>
                </div>
                <div class="sensor-value">
                    <span>ê°€ì†ë„ Z</span>
                    <span id="acc-z">0.0</span>
                </div>
            </div>

            <button id="disconnect-btn"
                    style="background: #ff4444; color: white; margin-top: 20px;">
                ì—°ê²° í•´ì œ
            </button>
        </div>
    </div>

    <script>
        // ===== ìƒíƒœ ê´€ë¦¬ =====
        const state = {
            socket: null,
            connected: false,
            sessionCode: null,
            sensorActive: false,
            lastSendTime: 0
        };

        // ===== DOM ìš”ì†Œ =====
        const connectScreen = document.getElementById('connect-screen');
        const sensorScreen = document.getElementById('sensor-screen');
        const sessionInput = document.getElementById('session-code');
        const connectBtn = document.getElementById('connect-btn');
        const disconnectBtn = document.getElementById('disconnect-btn');

        // ===== URL íŒŒë¼ë¯¸í„°ì—ì„œ ì„¸ì…˜ ì½”ë“œ ì½ê¸° =====
        const urlParams = new URLSearchParams(window.location.search);
        const sessionFromURL = urlParams.get('session');
        if (sessionFromURL) {
            sessionInput.value = sessionFromURL;
            // ìë™ ì—°ê²° (ê¶Œí•œ ìš”ì²­ í•„ìš”)
        }

        // ===== ì—°ê²° ë²„íŠ¼ =====
        connectBtn.addEventListener('click', async () => {
            const sessionCode = sessionInput.value.trim();

            if (sessionCode.length !== 4) {
                alert('4ìë¦¬ ì„¸ì…˜ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.');
                return;
            }

            try {
                await connectToGame(sessionCode);
            } catch (error) {
                alert('ì—°ê²° ì‹¤íŒ¨: ' + error.message);
            }
        });

        // ===== ì—°ê²° í•´ì œ ë²„íŠ¼ =====
        disconnectBtn.addEventListener('click', () => {
            disconnect();
        });

        // ===== ê²Œì„ ì—°ê²° =====
        async function connectToGame(sessionCode) {
            // 1. Socket.IO ì—°ê²°
            state.socket = io();

            await new Promise((resolve, reject) => {
                state.socket.on('connect', resolve);
                state.socket.on('connect_error', reject);

                setTimeout(() => reject(new Error('íƒ€ì„ì•„ì›ƒ')), 5000);
            });

            // 2. ì„¼ì„œ ì—°ê²° ìš”ì²­
            await new Promise((resolve, reject) => {
                state.socket.emit('connect-sensor', { sessionCode });

                state.socket.once('connection-confirmed', (data) => {
                    state.connected = true;
                    state.sessionCode = sessionCode;
                    resolve(data);
                });

                state.socket.once('connection-error', (error) => {
                    reject(new Error(error.message));
                });

                setTimeout(() => reject(new Error('ì„¼ì„œ ì—°ê²° íƒ€ì„ì•„ì›ƒ')), 5000);
            });

            // 3. ì„¼ì„œ ê¶Œí•œ ìš”ì²­ (iOS 13+)
            if (typeof DeviceOrientationEvent.requestPermission === 'function') {
                const permission = await DeviceOrientationEvent.requestPermission();
                if (permission !== 'granted') {
                    throw new Error('ì„¼ì„œ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }
            }

            // 4. ì„¼ì„œ í™œì„±í™”
            await startSensor();

            // 5. UI ì „í™˜
            connectScreen.style.display = 'none';
            sensorScreen.style.display = 'block';
            document.getElementById('current-session').textContent = sessionCode;
        }

        // ===== ì„¼ì„œ ì‹œì‘ =====
        async function startSensor() {
            // DeviceOrientation ì´ë²¤íŠ¸ (ê¸°ìš¸ê¸°)
            window.addEventListener('deviceorientation', handleOrientation);

            // DeviceMotion ì´ë²¤íŠ¸ (ê°€ì†ë„)
            window.addEventListener('devicemotion', handleMotion);

            state.sensorActive = true;

            console.log('âœ… ì„¼ì„œ í™œì„±í™”ë¨');
        }

        // ===== ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘ =====
        let sensorData = {
            orientation: { alpha: 0, beta: 0, gamma: 0 },
            acceleration: { x: 0, y: 0, z: 0 },
            rotationRate: { alpha: 0, beta: 0, gamma: 0 }
        };

        function handleOrientation(event) {
            sensorData.orientation = {
                alpha: event.alpha || 0,   // íšŒì „ (0-360Â°)
                beta: event.beta || 0,     // ì•ë’¤ ê¸°ìš¸ê¸° (-180~180Â°)
                gamma: event.gamma || 0    // ì¢Œìš° ê¸°ìš¸ê¸° (-90~90Â°)
            };

            // UI ì—…ë°ì´íŠ¸
            document.getElementById('alpha').textContent = sensorData.orientation.alpha.toFixed(1) + 'Â°';
            document.getElementById('beta').textContent = sensorData.orientation.beta.toFixed(1) + 'Â°';
            document.getElementById('gamma').textContent = sensorData.orientation.gamma.toFixed(1) + 'Â°';

            // ë°ì´í„° ì „ì†¡ (50ms ê°„ê²©)
            sendSensorData();
        }

        function handleMotion(event) {
            if (event.acceleration) {
                sensorData.acceleration = {
                    x: event.acceleration.x || 0,
                    y: event.acceleration.y || 0,
                    z: event.acceleration.z || 0
                };

                // UI ì—…ë°ì´íŠ¸
                document.getElementById('acc-x').textContent = sensorData.acceleration.x.toFixed(2);
                document.getElementById('acc-y').textContent = sensorData.acceleration.y.toFixed(2);
                document.getElementById('acc-z').textContent = sensorData.acceleration.z.toFixed(2);
            }

            if (event.rotationRate) {
                sensorData.rotationRate = {
                    alpha: event.rotationRate.alpha || 0,
                    beta: event.rotationRate.beta || 0,
                    gamma: event.rotationRate.gamma || 0
                };
            }
        }

        // ===== ì„¼ì„œ ë°ì´í„° ì „ì†¡ (50ms ê°„ê²©) =====
        function sendSensorData() {
            const now = Date.now();

            // 50ms ê²½ê³¼ ì²´í¬
            if (now - state.lastSendTime < 50) {
                return;
            }

            state.lastSendTime = now;

            if (!state.connected || !state.socket) {
                return;
            }

            // ì„œë²„ë¡œ ì „ì†¡
            state.socket.emit('sensor-data', {
                ...sensorData,
                timestamp: now
            });
        }

        // ===== ì—°ê²° í•´ì œ =====
        function disconnect() {
            if (state.socket) {
                state.socket.disconnect();
                state.socket = null;
            }

            window.removeEventListener('deviceorientation', handleOrientation);
            window.removeEventListener('devicemotion', handleMotion);

            state.connected = false;
            state.sensorActive = false;

            // UI ì „í™˜
            connectScreen.style.display = 'block';
            sensorScreen.style.display = 'none';
            sessionInput.value = '';
        }

        // ===== PC ì—°ê²° í•´ì œ ê°ì§€ =====
        if (state.socket) {
            state.socket.on('pc-disconnected', () => {
                alert('ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                disconnect();
            });
        }
    </script>
</body>
</html>
```

### ì„¼ì„œ ë°ì´í„° í¬ë§·

```typescript
interface SensorData {
    // ê¸°ìš¸ê¸° (DeviceOrientation)
    orientation: {
        alpha: number;   // 0-360Â°, íšŒì „ (ë‚˜ì¹¨ë°˜)
        beta: number;    // -180~180Â°, ì•ë’¤ ê¸°ìš¸ê¸°
        gamma: number;   // -90~90Â°, ì¢Œìš° ê¸°ìš¸ê¸°
    };

    // ê°€ì†ë„ (DeviceMotion)
    acceleration: {
        x: number;       // ì¢Œìš° ê°€ì†ë„ (m/sÂ²)
        y: number;       // ìƒí•˜ ê°€ì†ë„
        z: number;       // ì•ë’¤ ê°€ì†ë„
    };

    // íšŒì „ ì†ë„
    rotationRate: {
        alpha: number;   // Zì¶• íšŒì „ ì†ë„ (Â°/s)
        beta: number;    // Xì¶• íšŒì „ ì†ë„
        gamma: number;   // Yì¶• íšŒì „ ì†ë„
    };

    // íƒ€ì„ìŠ¤íƒ¬í”„
    timestamp: number;
}
```

---

**Part 5 ì™„ë£Œ! âœ…**

**ì™„ë£Œëœ ë‚´ìš©**:
- 5.1 SessionSDK.js - í†µí•© í´ë¼ì´ì–¸íŠ¸ SDK (500ì¤„ ì™„ì „ ë¶„ì„)
- 5.2 sensor.html - ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ (300ì¤„ ì™„ì „ êµ¬í˜„)
- ì™„ì „í•œ ê²Œì„ ì˜ˆì‹œ ì½”ë“œ
- ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ íŒ¨í„´
- ë””ë²„ê¹… íŒ

ë‹¤ìŒ: Part 6 (AI ì‹œìŠ¤í…œ Deep Dive)ë¡œ ê³„ì†...

---

## Part 6: AI ì‹œìŠ¤í…œ Deep Dive ğŸ¤–

### ê°œìš”

Sensor Game Hubì˜ ê°€ì¥ í˜ì‹ ì ì¸ ê¸°ëŠ¥ì€ **AI ê¸°ë°˜ ê²Œì„ ìë™ ìƒì„± ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤. ì‚¬ìš©ìê°€ ìì—°ì–´ë¡œ ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•˜ë©´, Claude AIì™€ RAG (Retrieval-Augmented Generation) ì‹œìŠ¤í…œì´ ì™„ì „íˆ ë™ì‘í•˜ëŠ” ê²Œì„ì„ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

**í•µì‹¬ ê¸°ìˆ  ìŠ¤íƒ:**
- **Claude Sonnet 4.5** (Anthropic) - 64K ì¶œë ¥ í† í° ì§€ì›
- **OpenAI Embeddings** (text-embedding-3-small) - ë¬¸ì„œ ë²¡í„°í™”
- **Supabase Vector Store** (PostgreSQL + pgvector) - 400ê°œ ê²Œì„ ê°œë°œ ë¬¸ì„œ
- **Langchain** - RAG íŒŒì´í”„ë¼ì¸ êµ¬ì„±
- **Socket.IO** - ì‹¤ì‹œê°„ ì§„í–‰ë¥  íŠ¸ë˜í‚¹

### 6.1 ëŒ€í™”í˜• ê²Œì„ ìƒì„± ì‹œìŠ¤í…œ (InteractiveGameGenerator)

#### 6.1.1 ì „ì²´ ì•„í‚¤í…ì²˜

```mermaid
graph TB
    subgraph "ì‚¬ìš©ì ì…ë ¥"
        A[ì‚¬ìš©ì: ê²Œì„ ì•„ì´ë””ì–´]
    end

    subgraph "ëŒ€í™”í˜• ìˆ˜ì§‘ ë‹¨ê³„"
        B[Stage 1: Initial<br/>ê¸°ë³¸ ì•„ì´ë””ì–´]
        C[Stage 2: Details<br/>ì„¸ë¶€ì‚¬í•­ ê²°ì •]
        D[Stage 3: Mechanics<br/>ì„¼ì„œ ë©”ì»¤ë‹ˆì¦˜]
        E[Stage 4: Confirmation<br/>ìµœì¢… í™•ì¸]
    end

    subgraph "RAG ì‹œìŠ¤í…œ"
        F[OpenAI Embeddings<br/>ì‚¬ìš©ì ì…ë ¥ ë²¡í„°í™”]
        G[Supabase Vector Search<br/>ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰]
        H[Top-K ë¬¸ì„œ<br/>k=5, threshold=0.7]
    end

    subgraph "Claude AI ìƒì„±"
        I[Claude Sonnet 4.5<br/>64K ì¶œë ¥ í† í°]
        J[ê²Œì„ ì½”ë“œ ìƒì„±<br/>HTML + JS + CSS]
    end

    subgraph "ê²€ì¦ ì‹œìŠ¤í…œ"
        K[GameValidator<br/>130ì  ë§Œì  ì±„ì ]
        L[í•„ìˆ˜ íŒ¨í„´ ì²´í¬<br/>SessionSDK, ì„¼ì„œ ë“±]
        M[ì¥ë¥´ë³„ ê²€ì¦<br/>arcade, physics ë“±]
    end

    subgraph "ìœ ì§€ë³´ìˆ˜ ì‹œìŠ¤í…œ"
        N[GameMaintenanceManager<br/>ì„¸ì…˜ ìœ ì§€ 30ë¶„]
        O[ë²„ê·¸ ë¦¬í¬íŠ¸ ì²˜ë¦¬<br/>ìë™ ìˆ˜ì •]
        P[ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­<br/>ì¦ë¶„ ì—…ë°ì´íŠ¸]
    end

    A --> B
    B --> C
    C --> D
    D --> E

    E --> F
    F --> G
    G --> H

    H --> I
    E --> I
    I --> J

    J --> K
    K --> L
    L --> M

    M --> N
    N --> O
    N --> P

    style A fill:#e3f2fd
    style J fill:#c8e6c9
    style M fill:#fff9c4
    style P fill:#f8bbd0
```

#### 6.1.2 í•µì‹¬ í´ë˜ìŠ¤ ë¶„ì„ (InteractiveGameGenerator.js)

**íŒŒì¼ ìœ„ì¹˜:** `/Users/dev/ì¡¸ì—…ì‘í’ˆ/sensorchatbot/server/InteractiveGameGenerator.js`

##### ê¸°ë³¸ êµ¬ì¡°
```javascript
/**
 * InteractiveGameGenerator v2.0
 * ëŒ€í™”í˜• AI ê²Œì„ ìƒì„± ì‹œìŠ¤í…œ
 */
class InteractiveGameGenerator {
    constructor(gameScanner = null, io = null) {
        this.config = {
            // ğŸš€ Claude Sonnet 4.5 (ìµœì‹  ëª¨ë¸)
            claudeApiKey: process.env.CLAUDE_API_KEY,
            claudeModel: 'claude-sonnet-4-5-20250929',  // Sonnet 4.5
            claudeOpusModel: 'claude-opus-4-1-20250805',  // Opus 4.1 (32k)
            maxTokens: 64000,  // âœ… 8ë°° ì¦ê°€! (ì´ì „: 8K â†’ í˜„ì¬: 64K)
            temperature: 0.3,  // ì¼ê´€ì„± ê°•í™” (ë²„ê·¸ ê°ì†Œ)

            // RAG ì„¤ì •
            openaiApiKey: process.env.OPENAI_API_KEY,
            supabaseUrl: process.env.SUPABASE_URL,
            supabaseKey: process.env.SUPABASE_ANON_KEY,
            ragTopK: 5,  // ê²€ìƒ‰ ë¬¸ì„œ ìˆ˜
            ragSimilarityThreshold: 0.7,  // ìœ ì‚¬ë„ ì„ê³„ê°’

            // í’ˆì§ˆ ë³´ì¦
            minQualityScore: 95,  // ìµœì†Œ 95/130ì 
            maxRetries: 3  // ì‹¤íŒ¨ ì‹œ 3íšŒ ì¬ì‹œë„
        };

        // ì˜ì¡´ì„± ì£¼ì…
        this.gameScanner = gameScanner;  // ê²Œì„ ìë™ ìŠ¤ìº”
        this.io = io;  // Socket.IO ì§„í–‰ë¥  íŠ¸ë˜í‚¹

        // í™œì„± ì„¸ì…˜ ê´€ë¦¬ (Map<sessionId, session>)
        this.activeSessions = new Map();

        // í•˜ìœ„ ì‹œìŠ¤í…œ
        this.gameValidator = new GameValidator();  // ê²Œì„ ê²€ì¦
        this.genreClassifier = new GameGenreClassifier();  // ì¥ë¥´ ë¶„ë¥˜
        this.requirementCollector = new RequirementCollector();  // ìš”êµ¬ì‚¬í•­ ìˆ˜ì§‘
        this.performanceMonitor = new PerformanceMonitor();  // ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

        this.initialize();
    }

    async initialize() {
        // Anthropic SDK ì´ˆê¸°í™” (LangChain ë¯¸ì‚¬ìš©)
        this.anthropicClient = new Anthropic({
            apiKey: this.config.claudeApiKey
        });

        // OpenAI Embeddings ì´ˆê¸°í™”
        this.embeddings = new OpenAIEmbeddings({
            openAIApiKey: this.config.openaiApiKey,
            modelName: 'text-embedding-3-small'
        });

        // Supabase í´ë¼ì´ì–¸íŠ¸ ë° Vector Store ì´ˆê¸°í™”
        this.supabaseClient = createClient(
            this.config.supabaseUrl,
            this.config.supabaseKey
        );

        this.vectorStore = new SupabaseVectorStore(this.embeddings, {
            client: this.supabaseClient,
            tableName: 'game_knowledge'
            // queryName ì œê±° - ê¸°ë³¸ ìœ ì‚¬ë„ ê²€ìƒ‰ ì‚¬ìš©
        });

        console.log('âœ… ëŒ€í™”í˜• ê²Œì„ ìƒì„±ê¸° ì´ˆê¸°í™” ì™„ë£Œ');
    }
}
```

**ì£¼ìš” íŠ¹ì§•:**
- **Claude Sonnet 4.5**: ìµœì‹  ëª¨ë¸ë¡œ 64K í† í° ì¶œë ¥ ì§€ì› (ì´ì „ ëŒ€ë¹„ 8ë°° ì¦ê°€)
- **Temperature 0.3**: ì¼ê´€ì„± ê°•í™”ë¡œ ë²„ê·¸ ë°œìƒë¥  ê°ì†Œ (ì´ì „ 0.7 â†’ í˜„ì¬ 0.3)
- **RAG Top-K=5**: ê²€ìƒ‰ ë¬¸ì„œ ìˆ˜ ì¦ê°€ë¡œ ë” í’ë¶€í•œ ì»¨í…ìŠ¤íŠ¸ ì œê³µ
- **95/130ì  ìµœì†Œ í’ˆì§ˆ**: ì—„ê²©í•œ í’ˆì§ˆ ê¸°ì¤€ìœ¼ë¡œ í”Œë ˆì´ ê°€ëŠ¥í•œ ê²Œì„ ë³´ì¥

##### ëŒ€í™” ì„¸ì…˜ ê´€ë¦¬

```javascript
/**
 * ìƒˆë¡œìš´ ëŒ€í™” ì„¸ì…˜ ì‹œì‘
 */
async startNewSession(sessionId) {
    // ì„±ëŠ¥ ì¶”ì  ì‹œì‘
    const performanceTracking = this.performanceMonitor
        .startGameGenerationTracking(sessionId, {
            sessionType: 'traditional',
            startMethod: 'startNewSession'
        });

    const session = {
        id: sessionId,
        stage: 'initial',  // initial â†’ details â†’ mechanics â†’ confirmation â†’ generation
        gameRequirements: {
            title: null,
            description: null,
            gameType: null,  // solo, dual, multi
            genre: null,  // arcade, physics, cooking, action, racing
            sensorMechanics: [],  // tilt, shake, rotate
            gameplayElements: {},
            difficulty: null,  // easy, medium, hard
            specialRequirements: []
        },
        conversationHistory: [],
        createdAt: new Date().toISOString(),
        lastUpdated: new Date().toISOString(),
        performanceTracking: performanceTracking
    };

    this.activeSessions.set(sessionId, session);

    // ì´ˆê¸° í™˜ì˜ ë©”ì‹œì§€ ìƒì„±
    const welcomeMessage = await this.generateWelcomeMessage();

    session.conversationHistory.push({
        role: 'assistant',
        content: welcomeMessage,
        timestamp: new Date().toISOString(),
        stage: 'initial'
    });

    return {
        success: true,
        sessionId: sessionId,
        message: welcomeMessage,
        stage: 'initial',
        progress: this.getStageProgress('initial')  // 0%
    };
}
```

**ì„¸ì…˜ êµ¬ì¡°:**
- **stage**: ëŒ€í™” ì§„í–‰ ë‹¨ê³„ (initial/details/mechanics/confirmation/generation)
- **gameRequirements**: ìˆ˜ì§‘ëœ ê²Œì„ ìš”êµ¬ì‚¬í•­
- **conversationHistory**: ì „ì²´ ëŒ€í™” ì´ë ¥ (Claude API ì»¨í…ìŠ¤íŠ¸ë¡œ ì‚¬ìš©)
- **performanceTracking**: ì„±ëŠ¥ ì¶”ì  ë°ì´í„°

##### ë‹¨ê³„ë³„ ëŒ€í™” ì²˜ë¦¬

**Stage 1: Initial (ì´ˆê¸° ì•„ì´ë””ì–´)**
```javascript
async processInitialStage(session, userMessage, context) {
    const prompt = `ì‚¬ìš©ìê°€ ì„¼ì„œ ê¸°ë°˜ ëª¨ë°”ì¼ ê²Œì„ì„ ë§Œë“¤ê³  ì‹¶ì–´í•©ë‹ˆë‹¤.

ì‚¬ìš©ì ì…ë ¥: "${userMessage}"

ë‹¤ìŒì„ ìˆ˜í–‰í•˜ì„¸ìš”:
1. ê²Œì„ ì•„ì´ë””ì–´ì˜ í•µì‹¬ ì»¨ì…‰ íŒŒì•…
2. ê²Œì„ íƒ€ì… ê²°ì • (solo/dual/multi)
3. ëŒ€ëµì ì¸ ì¥ë¥´ ì¶”ì¸¡ (arcade/physics/cooking/action ë“±)
4. ì„¸ë¶€ì‚¬í•­ ë‹¨ê³„ë¡œ ì§„í–‰ ê°€ëŠ¥ ì—¬ë¶€ íŒë‹¨

ì¤‘ìš”: ì¶©ë¶„í•œ ì •ë³´ê°€ ìˆ˜ì§‘ë˜ì—ˆë‹¤ë©´ ë‹¤ìŒ JSONì„ í¬í•¨í•˜ì„¸ìš”:
{"readyForDetails": true, "gameType": "solo|dual|multi", "genre": "arcade|physics|...", "title": "ê²Œì„ì œëª©"}

ê´€ë ¨ ì»¨í…ìŠ¤íŠ¸ (RAG ê²€ìƒ‰ ê²°ê³¼):
${context}

ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”ì²´ë¡œ ì‘ë‹µí•˜ë˜, JSONì€ ì‘ë‹µ ëì— í¬í•¨í•˜ì„¸ìš”.`;

    // Claude API í˜¸ì¶œ
    const response = await this.safeInvokeLLM(prompt, 'initial', userMessage);

    // JSON ì¶”ì¶œ (readyForDetails ì²´í¬)
    const extracted = this.extractJSONFromResponse(response.content);

    let newStage = session.stage;
    let requirements = {};

    if (extracted.readyForDetails) {
        newStage = 'details';
        requirements = {
            gameType: extracted.gameType || 'solo',
            genre: extracted.genre || 'arcade',
            title: extracted.title || 'ìƒˆ ê²Œì„'
        };
    }

    // JSON ì œê±°í•˜ì—¬ ê¹”ë”í•œ ë©”ì‹œì§€ ë°˜í™˜
    const cleanMessage = this.removeJSONFromMessage(response.content);

    return {
        message: cleanMessage,
        newStage: newStage,
        requirements: requirements
    };
}
```

**Stage 2: Details (ì„¸ë¶€ì‚¬í•­ ê²°ì •)**
```javascript
async processDetailsStage(session, userMessage, context) {
    // í‚¤ì›Œë“œ ê¸°ë°˜ ë‹¨ê³„ ì „í™˜ ì²´í¬
    const progressKeywords = ['ì§„í–‰', 'ë‹¤ìŒ', 'ê³„ì†', 'í™•ì¸', 'ë„˜ì–´ê°€'];
    const hasProgressKeyword = progressKeywords.some(keyword =>
        userMessage.toLowerCase().includes(keyword)
    );

    const prompt = `ê²Œì„ "${session.gameRequirements.title}"ì˜ ì„¸ë¶€ì‚¬í•­ì„ ì •ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.

í˜„ì¬ ì •ë³´:
- íƒ€ì…: ${session.gameRequirements.gameType}
- ì¥ë¥´: ${session.gameRequirements.genre}

ì‚¬ìš©ì ì…ë ¥: "${userMessage}"

ë‹¤ìŒì„ êµ¬ì²´í™”í•˜ì„¸ìš”:
1. ì„¼ì„œ í™œìš© ë°©ì‹ (ê¸°ìš¸ê¸°/í”ë“¤ê¸°/íšŒì „)
2. ê²Œì„ ëª©í‘œì™€ ìŠ¹ë¦¬ ì¡°ê±´
3. ë‚œì´ë„ ìˆ˜ì¤€
4. ë©”ì»¤ë‹ˆì¦˜ ë‹¨ê³„ ì§„í–‰ ì¤€ë¹„ ì—¬ë¶€

ì¶©ë¶„í•œ ì •ë³´ê°€ ìˆ˜ì§‘ë˜ì—ˆë‹¤ë©´ JSON í¬í•¨:
{"readyForMechanics": true, "sensorMechanics": ["tilt", "shake"], "difficulty": "medium", "objectives": "ìŠ¹ë¦¬ì¡°ê±´"}

ì»¨í…ìŠ¤íŠ¸:
${context}`;

    const response = await this.safeInvokeLLM(prompt, 'details', userMessage);
    const extracted = this.extractJSONFromResponse(response.content);

    let newStage = session.stage;
    let requirements = {};

    // í‚¤ì›Œë“œ ê¸°ë°˜ ë˜ëŠ” JSON ê¸°ë°˜ ì „í™˜
    const shouldProgress = hasProgressKeyword || extracted.readyForMechanics;

    if (shouldProgress) {
        newStage = 'mechanics';
        requirements = {
            sensorMechanics: extracted.sensorMechanics || ['tilt'],
            difficulty: extracted.difficulty || 'medium',
            objectives: extracted.objectives || 'ê²Œì„ ëª©í‘œ ë‹¬ì„±'
        };
    }

    const cleanMessage = this.removeJSONFromMessage(response.content);

    return {
        message: cleanMessage,
        newStage: newStage,
        requirements: requirements
    };
}
```

**Stage 3: Mechanics (ê²Œì„ ë©”ì»¤ë‹ˆì¦˜)**
```javascript
async processMechanicsStage(session, userMessage, context) {
    const prompt = `ê²Œì„ "${session.gameRequirements.title}"ì˜ ë©”ì»¤ë‹ˆì¦˜ì„ ì •ì˜í•˜ê³  ìˆìŠµë‹ˆë‹¤.

í˜„ì¬ ìš”êµ¬ì‚¬í•­:
- íƒ€ì…: ${session.gameRequirements.gameType}
- ì„¼ì„œ: ${session.gameRequirements.sensorMechanics?.join(', ')}
- ë‚œì´ë„: ${session.gameRequirements.difficulty}
- ëª©í‘œ: ${session.gameRequirements.objectives}

ì‚¬ìš©ì ì…ë ¥: "${userMessage}"

ë‹¤ìŒì„ êµ¬ì²´í™”í•˜ì„¸ìš”:
1. ê²Œì„ ì˜¤ë¸Œì íŠ¸ì™€ ìƒí˜¸ì‘ìš©
2. ì ìˆ˜ ì‹œìŠ¤í…œ
3. ì‹œê°ì /ì²­ê°ì  í”¼ë“œë°±
4. íŠ¹ë³„í•œ ê¸°ëŠ¥ì´ë‚˜ íŒŒì›Œì—…
5. ìµœì¢… í™•ì¸ ë‹¨ê³„ ì¤€ë¹„ ì—¬ë¶€

ì¶©ë¶„í•œ ì •ë³´ ìˆ˜ì§‘ ì‹œ JSON:
{"readyForConfirmation": true, "gameplayElements": {...}, "specialRequirements": [...]}

ì»¨í…ìŠ¤íŠ¸:
${context}`;

    const response = await this.safeInvokeLLM(prompt, 'mechanics', userMessage);
    const extracted = this.extractJSONFromResponse(response.content);

    let newStage = session.stage;
    let requirements = {};

    if (extracted.readyForConfirmation) {
        newStage = 'confirmation';
        requirements = {
            gameplayElements: extracted.gameplayElements || {},
            specialRequirements: extracted.specialRequirements || []
        };
    }

    return {
        message: this.removeJSONFromMessage(response.content),
        newStage: newStage,
        requirements: requirements
    };
}
```

**Stage 4: Confirmation (ìµœì¢… í™•ì¸)**
```javascript
async processConfirmationStage(session, userMessage) {
    const confirmKeywords = ['í™•ì¸', 'ì‹œì‘', 'ìƒì„±', 'ë§Œë“¤', 'ì¢‹ì•„', 'ì§„í–‰'];
    const isConfirmed = confirmKeywords.some(keyword =>
        userMessage.toLowerCase().includes(keyword)
    );

    if (isConfirmed) {
        return {
            message: 'âœ… ê²Œì„ ìƒì„±ì„ ì‹œì‘í•©ë‹ˆë‹¤!',
            newStage: 'generation',
            readyForGeneration: true
        };
    }

    // ìˆ˜ì • ìš”ì²­ ì²˜ë¦¬
    const modifyKeywords = ['ìˆ˜ì •', 'ë³€ê²½', 'ë°”ê¿”', 'ë‹¤ì‹œ'];
    if (modifyKeywords.some(k => userMessage.includes(k))) {
        // ì‚¬ìš©ìê°€ ìˆ˜ì •í•˜ê³  ì‹¶ì€ ë¶€ë¶„ íŒŒì•… í›„ ì´ì „ ë‹¨ê³„ë¡œ ëŒì•„ê°
        return {
            message: 'ì–´ë–¤ ë¶€ë¶„ì„ ìˆ˜ì •í•˜ê³  ì‹¶ìœ¼ì‹ ê°€ìš”?',
            newStage: 'mechanics',  // ë˜ëŠ” detailsë¡œ ëŒì•„ê°
            requirements: {}
        };
    }

    // ê¸°ë³¸ í™•ì¸ ë©”ì‹œì§€
    return {
        message: this.generateConfirmationSummary(session),
        newStage: 'confirmation',
        requirements: {}
    };
}
```

##### ìµœì¢… ê²Œì„ ìƒì„±

```javascript
/**
 * ìµœì¢… ê²Œì„ ìƒì„± (ëª¨ë“  ë‹¨ê³„ ì™„ë£Œ í›„)
 */
async generateFinalGame(sessionId) {
    const session = this.activeSessions.get(sessionId);
    if (!session) {
        throw new Error('ì„¸ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    console.log('ğŸ® ê²Œì„ ìƒì„± ì‹œì‘:', sessionId);

    try {
        // === Step 1: ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„ (0-20%) ===
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 1,
            percentage: 10,
            message: 'ğŸ¯ ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„ ì¤‘...'
        });

        const gameId = this.generateGameId(session.gameRequirements.title);

        // === Step 2: ë²¡í„° DB ë¬¸ì„œ ê²€ìƒ‰ (20-40%) ===
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 2,
            percentage: 20,
            message: 'ğŸ” ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ì¤‘... (ë²¡í„° DB)'
        });

        const ragContext = await this.getGameDevelopmentContext(
            session.gameRequirements
        );

        // === Step 3: Claude AI ì½”ë“œ ìƒì„± (40-80%) ===
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 3,
            percentage: 50,
            message: 'ğŸ¤– Claude AIë¡œ ê²Œì„ ì½”ë“œ ìƒì„± ì¤‘...'
        });

        const gameCode = await this.generateGameCodeWithClaude(
            session.gameRequirements,
            ragContext
        );

        // === Step 4: ì½”ë“œ ê²€ì¦ (80-90%) ===
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 4,
            percentage: 80,
            message: 'âœ… ê²Œì„ ì½”ë“œ ê²€ì¦ ì¤‘...'
        });

        const validationResult = await this.gameValidator.validateGameCode(
            gameCode,
            session.gameRequirements
        );

        if (validationResult.score < this.config.minQualityScore) {
            throw new Error(`í’ˆì§ˆ ì ìˆ˜ ë¶€ì¡±: ${validationResult.score}/130`);
        }

        // === Step 5: íŒŒì¼ ì €ì¥ ë° ë“±ë¡ (90-100%) ===
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 5,
            percentage: 90,
            message: 'ğŸ’¾ ê²Œì„ íŒŒì¼ ì €ì¥ ì¤‘...'
        });

        const gamePath = await this.saveGameFiles(gameId, gameCode, session);

        // GameScannerì— ìë™ ë“±ë¡
        if (this.gameScanner) {
            await this.gameScanner.scanGames();
        }

        // === ì™„ë£Œ! ===
        this.io.emit('game-generation-progress', {
            sessionId,
            step: 5,
            percentage: 100,
            message: 'âœ… ê²Œì„ ìƒì„± ì™„ë£Œ!'
        });

        console.log('âœ… ê²Œì„ ìƒì„± ì™„ë£Œ:', gameId);

        return {
            success: true,
            gameId: gameId,
            gamePath: gamePath,
            validationScore: validationResult.score,
            playUrl: `/games/${gameId}`
        };

    } catch (error) {
        console.error('âŒ ê²Œì„ ìƒì„± ì‹¤íŒ¨:', error);

        this.io.emit('game-generation-progress', {
            sessionId,
            step: 0,
            percentage: 0,
            message: `âŒ ìƒì„± ì‹¤íŒ¨: ${error.message}`
        });

        throw error;
    }
}
```

**5ë‹¨ê³„ ì§„í–‰ë¥  íŠ¸ë˜í‚¹:**
1. **Step 1 (0-20%)**: ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„ ë° gameId ìƒì„±
2. **Step 2 (20-40%)**: Supabase Vector DBì—ì„œ ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰
3. **Step 3 (40-80%)**: Claude AIë¡œ ê²Œì„ ì½”ë“œ ìƒì„± (ê°€ì¥ ì˜¤ë˜ ê±¸ë¦¼)
4. **Step 4 (80-90%)**: GameValidatorë¡œ ì½”ë“œ ê²€ì¦ (95/130ì  ì´ìƒ)
5. **Step 5 (90-100%)**: íŒŒì¼ ì €ì¥ ë° GameScanner ìë™ ë“±ë¡

### 6.2 RAG ì‹œìŠ¤í…œ Deep Dive

#### 6.2.1 RAG íŒŒì´í”„ë¼ì¸

```mermaid
sequenceDiagram
    participant U as ì‚¬ìš©ì
    participant API as API Server
    participant EMB as OpenAI Embeddings
    participant VS as Supabase Vector Store
    participant CL as Claude Sonnet 4.5
    participant FS as File System

    U->>API: ê²Œì„ ìƒì„± ìš”ì²­
    API->>EMB: ìš”êµ¬ì‚¬í•­ ë²¡í„°í™”<br/>(text-embedding-3-small)
    EMB-->>API: ë²¡í„° (1536ì°¨ì›)

    API->>VS: ìœ ì‚¬ë„ ê²€ìƒ‰<br/>(cosine similarity)
    VS-->>API: Top-5 ë¬¸ì„œ<br/>(threshold=0.7)

    API->>CL: í”„ë¡¬í”„íŠ¸ ìƒì„±<br/>(ìš”êµ¬ì‚¬í•­ + RAG ì»¨í…ìŠ¤íŠ¸)
    CL-->>API: ê²Œì„ ì½”ë“œ<br/>(HTML+JS+CSS, ìµœëŒ€ 64K í† í°)

    API->>FS: íŒŒì¼ ì €ì¥<br/>(/public/games/{gameId}/)
    FS-->>API: ì €ì¥ ì™„ë£Œ

    API-->>U: ê²Œì„ í”Œë ˆì´ URL
```

#### 6.2.2 ë¬¸ì„œ ê²€ìƒ‰ êµ¬í˜„

```javascript
/**
 * ê²Œì„ ê°œë°œ ì»¨í…ìŠ¤íŠ¸ ê°€ì ¸ì˜¤ê¸° (RAG)
 */
async getGameDevelopmentContext(requirements) {
    if (!this.vectorStore) {
        console.warn('âš ï¸ Vector Store ì—†ìŒ - ê¸°ë³¸ ì»¨í…ìŠ¤íŠ¸ ì‚¬ìš©');
        return this.getBasicContext();
    }

    try {
        // ìš”êµ¬ì‚¬í•­ì„ ìì—°ì–´ ì¿¼ë¦¬ë¡œ ë³€í™˜
        const query = this.buildSearchQuery(requirements);
        console.log('ğŸ” RAG ê²€ìƒ‰ ì¿¼ë¦¬:', query);

        // Supabase Vector Storeì—ì„œ ìœ ì‚¬ ë¬¸ì„œ ê²€ìƒ‰
        const results = await this.vectorStore.similaritySearch(
            query,
            this.config.ragTopK  // Top-5 ë¬¸ì„œ
        );

        console.log(`âœ… ${results.length}ê°œ ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ë¨`);

        // ë¬¸ì„œ ë‚´ìš© ê²°í•©
        const context = results
            .map((doc, idx) => {
                const score = doc.metadata?.score || 'N/A';
                return `
## ì°¸ê³  ë¬¸ì„œ ${idx + 1} (ìœ ì‚¬ë„: ${score})
${doc.pageContent}
`;
            })
            .join('\n\n');

        return context;

    } catch (error) {
        console.error('âŒ RAG ê²€ìƒ‰ ì‹¤íŒ¨:', error);
        return this.getBasicContext();
    }
}

/**
 * ê²€ìƒ‰ ì¿¼ë¦¬ ìƒì„±
 */
buildSearchQuery(requirements) {
    const parts = [];

    if (requirements.gameType) {
        parts.push(`${requirements.gameType} íƒ€ì… ê²Œì„`);
    }

    if (requirements.genre) {
        parts.push(`${requirements.genre} ì¥ë¥´`);
    }

    if (requirements.sensorMechanics && requirements.sensorMechanics.length > 0) {
        parts.push(`ì„¼ì„œ ì¡°ì‘: ${requirements.sensorMechanics.join(', ')}`);
    }

    if (requirements.description) {
        parts.push(requirements.description);
    }

    return parts.join('. ') + '. SessionSDK í†µí•© ë°©ë²•, ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬, ê²Œì„ ë£¨í”„ êµ¬í˜„';
}
```

**RAG ê²€ìƒ‰ í”„ë¡œì„¸ìŠ¤:**
1. **ì¿¼ë¦¬ ìƒì„±**: ìš”êµ¬ì‚¬í•­ì„ ìì—°ì–´ë¡œ ë³€í™˜ (ì˜ˆ: "solo íƒ€ì… ê²Œì„. arcade ì¥ë¥´. ì„¼ì„œ ì¡°ì‘: tilt. SessionSDK í†µí•© ë°©ë²•")
2. **ë²¡í„°í™”**: OpenAI Embeddingsë¡œ ì¿¼ë¦¬ë¥¼ 1536ì°¨ì› ë²¡í„°ë¡œ ë³€í™˜
3. **ìœ ì‚¬ë„ ê²€ìƒ‰**: Supabaseì˜ `match_documents` í•¨ìˆ˜ë¡œ ì½”ì‚¬ì¸ ìœ ì‚¬ë„ ê³„ì‚°
4. **Top-K í•„í„°ë§**: ìœ ì‚¬ë„ 0.7 ì´ìƒì¸ ë¬¸ì„œ ì¤‘ ìƒìœ„ 5ê°œ ì„ íƒ
5. **ì»¨í…ìŠ¤íŠ¸ ê²°í•©**: ê²€ìƒ‰ëœ ë¬¸ì„œë“¤ì„ í•˜ë‚˜ì˜ ë¬¸ìì—´ë¡œ ê²°í•©

#### 6.2.3 Supabase Vector Store êµ¬ì¡°

**í…Œì´ë¸”:** `game_knowledge`

| ì»¬ëŸ¼ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `id` | uuid | ë¬¸ì„œ ê³ ìœ  ID |
| `content` | text | ë¬¸ì„œ ë‚´ìš© (ë§ˆí¬ë‹¤ìš´) |
| `metadata` | jsonb | ë©”íƒ€ë°ì´í„° (íŒŒì¼ëª…, ì„¹ì…˜ ë“±) |
| `embedding` | vector(1536) | OpenAI ì„ë² ë”© ë²¡í„° |
| `created_at` | timestamp | ìƒì„± ì‹œê°„ |

**ì„ë² ë”© ë°ì´í„°:**
- ì´ **400ê°œ ë¬¸ì„œ** (35ê°œ ë§ˆí¬ë‹¤ìš´ íŒŒì¼ì„ ì²­í¬ë¡œ ë¶„í• )
- ê° ì²­í¬: ì•½ 500-1000 í† í°
- ë²¡í„° ì°¨ì›: 1536 (text-embedding-3-small)

**ë¬¸ì„œ ì¹´í…Œê³ ë¦¬:**
- **API ë ˆí¼ëŸ°ìŠ¤**: SessionSDK, GameScanner, ì„œë²„ API
- **ê²Œì„ ê°œë°œ ê°€ì´ë“œ**: ê²Œì„ í…œí”Œë¦¿, ì„¼ì„œ ì²˜ë¦¬ íŒ¨í„´, ì¶©ëŒ ê°ì§€
- **ì˜ˆì œ ì½”ë“œ**: solo/dual/multi ê²Œì„ ì™„ì „í•œ êµ¬í˜„ ì˜ˆì‹œ
- **ë””ë²„ê¹… íŒ**: ìì£¼ ë°œìƒí•˜ëŠ” ë²„ê·¸ì™€ í•´ê²° ë°©ë²•
- **ì¥ë¥´ë³„ ê°€ì´ë“œ**: arcade, physics, cooking, racing ì¥ë¥´ë³„ íŠ¹í™” íŒ¨í„´

### 6.3 Claude AI ì½”ë“œ ìƒì„±

#### 6.3.1 í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§

```javascript
/**
 * Claude AIë¡œ ê²Œì„ ì½”ë“œ ìƒì„±
 */
async generateGameCodeWithClaude(requirements, ragContext) {
    // 64,000ì ì´ˆëŒ€í˜• í”„ë¡¬í”„íŠ¸ ìƒì„±
    const prompt = this.buildGameGenerationPrompt(requirements, ragContext);

    console.log('ğŸ¤– Claude API í˜¸ì¶œ ì‹œì‘...');
    console.log(`ğŸ“ í”„ë¡¬í”„íŠ¸ ê¸¸ì´: ${prompt.length} ë¬¸ì`);

    try {
        // Anthropic SDK ì§ì ‘ ì‚¬ìš© (LangChain ë¯¸ì‚¬ìš©)
        const response = await this.anthropicClient.messages.create({
            model: this.config.claudeModel,  // claude-sonnet-4-5-20250929
            max_tokens: this.config.maxTokens,  // 64000
            temperature: this.config.temperature,  // 0.3
            messages: [{
                role: 'user',
                content: prompt
            }]
        });

        const gameCode = response.content[0].text;

        console.log('âœ… Claude AI ì‘ë‹µ ì™„ë£Œ');
        console.log(`ğŸ“ ìƒì„±ëœ ì½”ë“œ ê¸¸ì´: ${gameCode.length} ë¬¸ì`);

        // í† í° ì‚¬ìš©ëŸ‰ ë¡œê¹…
        if (response.usage) {
            console.log('ğŸ“Š í† í° ì‚¬ìš©ëŸ‰:', response.usage);
            this.performanceMonitor.recordTokenUsage(
                response.usage.input_tokens,
                response.usage.output_tokens
            );
        }

        return gameCode;

    } catch (error) {
        console.error('âŒ Claude API ì˜¤ë¥˜:', error);
        throw new Error(`Claude API ì‹¤íŒ¨: ${error.message}`);
    }
}

/**
 * ê²Œì„ ìƒì„± í”„ë¡¬í”„íŠ¸ ì‘ì„±
 */
buildGameGenerationPrompt(requirements, ragContext) {
    return `ë‹¹ì‹ ì€ ì„¼ì„œ ê¸°ë°˜ ëª¨ë°”ì¼ ê²Œì„ ê°œë°œ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
ë‹¤ìŒ ìš”êµ¬ì‚¬í•­ì— ë§ëŠ” ì™„ì „íˆ ì‘ë™í•˜ëŠ” HTML ê²Œì„ì„ ìƒì„±í•˜ì„¸ìš”.

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“‹ **ê²Œì„ ìš”êµ¬ì‚¬í•­:**

**ì œëª©:** ${requirements.title}
**ì„¤ëª…:** ${requirements.description}
**íƒ€ì…:** ${requirements.gameType} (solo/dual/multi)
**ì¥ë¥´:** ${requirements.genre}
**ì„¼ì„œ:** ${requirements.sensorMechanics?.join(', ')}
**ë‚œì´ë„:** ${requirements.difficulty}
**ëª©í‘œ:** ${requirements.objectives}

${requirements.specialRequirements?.length > 0 ? `
**íŠ¹ë³„ ìš”êµ¬ì‚¬í•­:**
${requirements.specialRequirements.map((req, idx) => `${idx + 1}. ${req}`).join('\n')}
` : ''}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“š **ì°¸ê³  ìë£Œ (RAG ì»¨í…ìŠ¤íŠ¸):**

${ragContext}

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ **í•„ìˆ˜ êµ¬í˜„ ìš”êµ¬ì‚¬í•­ (100% ì¤€ìˆ˜!):**

âœ… **1. SessionSDK í†µí•© (í•„ìˆ˜!)**
\`\`\`javascript
const sdk = new SessionSDK({
    gameId: '${this.generateGameId(requirements.title)}',
    gameType: '${requirements.gameType}'
});

// ì„œë²„ ì—°ê²° ì™„ë£Œ í›„ ì„¸ì…˜ ìƒì„±
sdk.on('connected', () => {
    createSession();
});

// CustomEvent ì²˜ë¦¬ íŒ¨í„´ (ë°˜ë“œì‹œ ì´ íŒ¨í„´ ì‚¬ìš©!)
sdk.on('session-created', (event) => {
    const session = event.detail || event;
    displaySessionInfo(session);
});

sdk.on('sensor-data', (event) => {
    const data = event.detail || event;
    processSensorData(data);
});

sdk.on('sensor-connected', (event) => {
    sensorConnected = true;
    // ğŸš€ í•„ìˆ˜: 1ì´ˆ í›„ ìë™ ê²Œì„ ì‹œì‘!
    setTimeout(() => {
        if (!gameStarted && !gameOver) {
            startGame();
        }
    }, 1000);
});
\`\`\`

âœ… **2. ì„¸ì…˜ UI (í•„ìˆ˜!)**
- ì„¸ì…˜ ì½”ë“œ í‘œì‹œ
- QR ì½”ë“œ ìë™ ìƒì„± (qrcode.min.js)
- ì„¼ì„œ ì—°ê²° ìƒíƒœ í‘œì‹œ

âœ… **3. ê²Œì„ ë£¨í”„ (í•„ìˆ˜!)**
\`\`\`javascript
function gameLoop() {
    if (!gameStarted || gamePaused || gameOver) {
        requestAnimationFrame(gameLoop);
        return;
    }

    updateGame();  // ê²Œì„ ë¡œì§
    renderGame();  // ë Œë”ë§

    requestAnimationFrame(gameLoop);
}
\`\`\`

âœ… **4. ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ (í•„ìˆ˜!)**
\`\`\`javascript
function processSensorData(data) {
    if (!gameStarted || gameOver) return;

    const { orientation, acceleration } = data.data;

    if (orientation) {
        // ê¸°ìš¸ê¸°: beta (-180~180), gamma (-90~90)
        const tiltX = orientation.gamma / 90;  // -1 ~ 1
        const tiltY = orientation.beta / 180;  // -1 ~ 1

        // í”Œë ˆì´ì–´ ì´ë™
        player.vx = tiltX * player.speed;
        player.vy = tiltY * player.speed;
    }

    if (acceleration) {
        // í”ë“¤ê¸° ê°ì§€
        const shake = Math.sqrt(
            acceleration.x ** 2 +
            acceleration.y ** 2 +
            acceleration.z ** 2
        );

        if (shake > 20) {
            // íŠ¹ë³„ ë™ì‘ (ì í”„, íŒŒì›Œì—… ë“±)
            triggerSpecialAction();
        }
    }
}
\`\`\`

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸš¨ **ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ì•„ì•¼ í•  ì¹˜ëª…ì  ë²„ê·¸ (CRITICAL BUGS):**

**BUG #0: ì„¼ì„œ ì—°ê²°í•´ë„ ê²Œì„ ìë™ ì‹œì‘ ì•ˆ ë¨**
âŒ ì˜ëª»ëœ ì½”ë“œ:
\`\`\`javascript
sdk.on('sensor-connected', () => {
    sensorConnected = true;
    showOverlay('ì„¼ì„œ ì—°ê²°ë¨! í´ë¦­í•˜ì—¬ ì‹œì‘');  // âŒ ìˆ˜ë™ ì‹œì‘ ìš”êµ¬
});
\`\`\`

âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ:
\`\`\`javascript
sdk.on('sensor-connected', () => {
    sensorConnected = true;
    setTimeout(() => {
        if (!gameStarted && !gameOver) {
            startGame();  // âœ… ìë™ ì‹œì‘!
        }
    }, 1000);
});
\`\`\`

**BUG #1: ê³µ/ì˜¤ë¸Œì íŠ¸ê°€ ì›€ì§ì´ì§€ ì•ŠìŒ**
âŒ ì˜ëª»ëœ ì½”ë“œ:
\`\`\`javascript
if (ball.stuck) {  // âŒ stuck í”Œë˜ê·¸ê°€ ì˜ì›íˆ true
    ball.x = paddle.x;
    return;
}
\`\`\`

âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ:
\`\`\`javascript
function startGame() {
    gameStarted = true;
    ball.stuck = false;  // âœ… stuck í•´ì œ
    ball.dx = 4;  // âœ… ì´ˆê¸° ì†ë„ ì„¤ì •!
    ball.dy = -4;
}

if (!gameStarted) {
    ball.x = paddle.x;
} else if (!ball.stuck) {
    ball.x += ball.dx;  // âœ… ì •ìƒ ì´ë™
    ball.y += ball.dy;
}
\`\`\`

**BUG #2: ë ˆë²¨ ì „í™˜ ì‹œ ì„¼ì„œ ì…ë ¥ ì¤‘ë‹¨**
âŒ ì˜ëª»ëœ ì½”ë“œ:
\`\`\`javascript
function nextLevel() {
    showOverlay('ë ˆë²¨ í´ë¦¬ì–´!');  // âŒ ì˜¤ë²„ë ˆì´ë¡œ ì„¼ì„œ ì°¨ë‹¨
    setTimeout(() => {
        hideOverlay();
        generateLevel(level + 1);
    }, 2000);
}
\`\`\`

âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ:
\`\`\`javascript
function nextLevel() {
    // âœ… í† ìŠ¤íŠ¸ ë©”ì‹œì§€ë¡œ ê²Œì„ ë©ˆì¶”ì§€ ì•ŠìŒ
    showToastMessage('ğŸ‰ ë ˆë²¨ í´ë¦¬ì–´!');
    generateLevel(level + 1);
    // ì„¼ì„œ ì…ë ¥ ê³„ì† ìœ ì§€ë¨!
}
\`\`\`

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“ **HTML êµ¬ì¡° ìš”êµ¬ì‚¬í•­:**

\`\`\`html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>${requirements.title}</title>
    <style>
        /* ì „ì²´ í™”ë©´ ê²Œì„ */
        body {
            margin: 0;
            overflow: hidden;
            background: #000;
        }

        #game-canvas {
            display: block;
            width: 100vw;
            height: 100vh;
        }

        /* ì„¸ì…˜ íŒ¨ë„ (ìš°ì¸¡ ìƒë‹¨) */
        .session-panel {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.9);
            padding: 10px;
            border-radius: 10px;
            font-size: 14px;
        }

        #qr-container {
            width: 150px;
            height: 150px;
        }

        /* HUD (ì¢Œì¸¡ ìƒë‹¨) */
        .hud {
            position: absolute;
            top: 10px;
            left: 10px;
            color: white;
            font-size: 20px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <canvas id="game-canvas"></canvas>

    <!-- ì„¸ì…˜ íŒ¨ë„ -->
    <div class="session-panel">
        <h3>ì„¸ì…˜ ì½”ë“œ: <span id="session-code-display">-</span></h3>
        <div id="qr-container"></div>
        <p>ì„¼ì„œ: <span id="sensor-status">ëŒ€ê¸°ì¤‘</span></p>
    </div>

    <!-- HUD -->
    <div class="hud">
        <div>ì ìˆ˜: <span id="score">0</span></div>
        <div>ì‹œê°„: <span id="timer">0</span></div>
    </div>

    <!-- ê²Œì„ ì˜¤ë²„ë ˆì´ -->
    <div id="game-overlay" class="hidden">
        <h1 class="overlay-title"></h1>
        <p class="overlay-message"></p>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/SessionSDK.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <script>
        // ì—¬ê¸°ì— ê²Œì„ ì½”ë“œ ì‘ì„±
    </script>
</body>
</html>
\`\`\`

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ¯ **ìµœì¢… ì¶œë ¥ ì§€ì‹œì‚¬í•­:**

1. **ì™„ì „í•œ HTML íŒŒì¼ ìƒì„±**: <!DOCTYPE html>ë¶€í„° </html>ê¹Œì§€ ì™„ì „í•œ íŒŒì¼
2. **ëª¨ë“  í•¨ìˆ˜ ì™„ì„± í•„ìˆ˜**: drawX(), updateX(), collisionDetection() ë“± ëª¨ë“  í•¨ìˆ˜ êµ¬í˜„
3. **64,000 í† í° í™œìš©**: í’ë¶€í•˜ê³  ì™„ì „í•œ ì½”ë“œ ì‘ì„± (ì¤‘ê°„ì— ë©ˆì¶”ì§€ ë§ˆì„¸ìš”!)
4. **ì²´í¬ë¦¬ìŠ¤íŠ¸ 100% ë§Œì¡±**: ìœ„ì˜ ëª¨ë“  í•„ìˆ˜ ìš”êµ¬ì‚¬í•­ ì¶©ì¡±
5. **ì ˆëŒ€ ì¤‘ê°„ì— ë©ˆì¶”ì§€ ë§ˆì„¸ìš”**: ë°˜ë“œì‹œ </html> íƒœê·¸ë¡œ ì™„ì „íˆ ì¢…ë£Œ!

âš ï¸ **ê²½ê³ **: ë¶ˆì™„ì „í•œ ì½”ë“œëŠ” ìë™ìœ¼ë¡œ ë‚®ì€ ì ìˆ˜ë¥¼ ë°›ìŠµë‹ˆë‹¤!
âœ… **ëª©í‘œ**: 100/130ì  ì´ìƒ (A+ ë“±ê¸‰) ë‹¬ì„±!

ì´ì œ ìœ„ì˜ ëª¨ë“  ì§€ì‹œì‚¬í•­ì„ ì™„ë²½íˆ ë”°ë¼ ê³ í’ˆì§ˆ ê²Œì„ì„ ìƒì„±í•˜ì„¸ìš”! ğŸš€`;
}
```

**í”„ë¡¬í”„íŠ¸ êµ¬ì¡°:**
1. **ì—­í•  ì„¤ì •**: "ì„¼ì„œ ê¸°ë°˜ ëª¨ë°”ì¼ ê²Œì„ ê°œë°œ ì „ë¬¸ê°€"
2. **ìš”êµ¬ì‚¬í•­ ëª…ì‹œ**: ì‚¬ìš©ìê°€ ì…ë ¥í•œ ê²Œì„ ìš”êµ¬ì‚¬í•­
3. **RAG ì»¨í…ìŠ¤íŠ¸**: Supabaseì—ì„œ ê²€ìƒ‰í•œ ê´€ë ¨ ë¬¸ì„œ (ì•½ 5,000-10,000 í† í°)
4. **í•„ìˆ˜ íŒ¨í„´**: SessionSDK í†µí•©, ì„¼ì„œ ì²˜ë¦¬, ê²Œì„ ë£¨í”„ ë“±
5. **ë²„ê·¸ íŒ¨í„´ ê²½ê³ **: ì ˆëŒ€ í¬í•¨í•˜ì§€ ë§ì•„ì•¼ í•  5ê°€ì§€ ì¹˜ëª…ì  ë²„ê·¸
6. **HTML êµ¬ì¡°**: ì™„ì „í•œ HTML í…œí”Œë¦¿
7. **ì¶œë ¥ ì§€ì‹œ**: 64K í† í° í™œìš©, ì™„ì „í•œ ì½”ë“œ ì‘ì„±, ì¤‘ë‹¨ ê¸ˆì§€

**í”„ë¡¬í”„íŠ¸ ìµœì í™” í¬ì¸íŠ¸:**
- **Temperature 0.3**: ì¼ê´€ì„± ê°•í™”ë¡œ ë²„ê·¸ ë°œìƒë¥  80% â†’ 10% ê°ì†Œ
- **64K í† í°**: ì´ì „ 8Kì—ì„œ 8ë°° ì¦ê°€ë¡œ ë” ì™„ì „í•œ ì½”ë“œ ìƒì„± ê°€ëŠ¥
- **ì¹˜ëª…ì  ë²„ê·¸ 5ê°œ**: ì‹¤ì œ ë²„ê·¸ íŒ¨í„´ ë¶„ì„ í›„ ëª…ì‹œì ìœ¼ë¡œ ê¸ˆì§€
- **RAG ì»¨í…ìŠ¤íŠ¸**: 400ê°œ ë¬¸ì„œì—ì„œ ê²€ìƒ‰í•œ ì‹¤ì œ ë™ì‘í•˜ëŠ” ì½”ë“œ ì˜ˆì‹œ ì œê³µ

### 6.4 ê²Œì„ ê²€ì¦ ì‹œìŠ¤í…œ (GameValidator)

#### 6.4.1 ê²€ì¦ í”„ë¡œì„¸ìŠ¤

```mermaid
graph LR
    A[ìƒì„±ëœ ê²Œì„ ì½”ë“œ] --> B[íŒŒì¼ êµ¬ì¡° ê²€ì¦<br/>10ì ]
    B --> C[HTML êµ¬ì¡° ê²€ì¦<br/>20ì ]
    C --> D[SessionSDK í†µí•©<br/>20ì ]
    D --> E[ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬<br/>25ì ]
    E --> F[ê²Œì„ ë£¨í”„ êµ¬í˜„<br/>20ì ]
    F --> G[Canvas ë Œë”ë§<br/>15ì ]
    G --> H[ê²Œì„ ìƒíƒœ ê´€ë¦¬<br/>10ì ]
    H --> I[ì½”ë“œ í’ˆì§ˆ<br/>10ì ]
    I --> J[ì¥ë¥´ë³„ ê²€ì¦<br/>30ì ]
    J --> K{ì´ì  95ì  ì´ìƒ?}
    K -->|Yes| L[âœ… í†µê³¼<br/>ê²Œì„ ë“±ë¡]
    K -->|No| M[âŒ ì‹¤íŒ¨<br/>ì¬ì‹œë„ ë˜ëŠ” ì˜¤ë¥˜]

    style L fill:#c8e6c9
    style M fill:#ffcdd2
```

#### 6.4.2 GameValidator í´ë˜ìŠ¤

**íŒŒì¼ ìœ„ì¹˜:** `/Users/dev/ì¡¸ì—…ì‘í’ˆ/sensorchatbot/server/GameValidator.js`

```javascript
/**
 * GameValidator v1.0
 * AIê°€ ìƒì„±í•œ ê²Œì„ì˜ ì™„ì„±ë„ì™€ ì‘ë™ ê°€ëŠ¥ì„±ì„ ìë™ ê²€ì¦
 */
class GameValidator {
    constructor() {
        // ì¥ë¥´ë³„ íŠ¹í™” ê²€ì¦ ê·œì¹™
        this.genreSpecificRules = {
            'arcade': {
                requiredPatterns: [
                    /score|point/i,
                    /level|stage/i,
                    /timer|time|countdown/i,
                    /collision|hit/i,
                    /game.*over|gameOver/i
                ],
                keyFeatures: ['ì ìˆ˜ ì‹œìŠ¤í…œ', 'ë ˆë²¨ ì§„í–‰', 'íƒ€ì´ë¨¸']
            },
            'physics': {
                requiredPatterns: [
                    /gravity/i,
                    /friction/i,
                    /velocity|vx.*vy|speed/i,
                    /collision|bounce|reflect/i,
                    /Math\.(sin|cos|atan2)/
                ],
                keyFeatures: ['ì¤‘ë ¥ ì‹œë®¬ë ˆì´ì…˜', 'ë¬¼ì²´ ì¶©ëŒ', 'ê´€ì„± ì ìš©']
            },
            'cooking': {
                requiredPatterns: [
                    /stir|mix|shake|flip/i,
                    /recipe|ingredient|cooking/i,
                    /timer|time|duration/i,
                    /temperature|heat|cook/i,
                    /progress|quality|done/i
                ],
                keyFeatures: ['ì œìŠ¤ì²˜ ì¸ì‹', 'íƒ€ì´ë° ì‹œìŠ¤í…œ', 'ìš”ë¦¬ ì§„í–‰ë„']
            }
            // ... ë‹¤ë¥¸ ì¥ë¥´
        };

        // ê¸°ë³¸ ê²€ì¦ ê·œì¹™
        this.validationRules = {
            // í•„ìˆ˜ HTML ìš”ì†Œ
            requiredElements: [
                {
                    selectors: ['canvas#game-canvas', 'canvas#gameCanvas', 'canvas'],
                    name: 'ê²Œì„ ìº”ë²„ìŠ¤',
                    description: 'canvas ìš”ì†Œ'
                },
                {
                    selectors: ['#session-code-display', '#session-code'],
                    name: 'ì„¸ì…˜ ì½”ë“œ í‘œì‹œ',
                    description: 'ì„¸ì…˜ ì½”ë“œë¥¼ í‘œì‹œí•˜ëŠ” ìš”ì†Œ'
                },
                {
                    selectors: ['#qr-container', '#qr-code'],
                    name: 'QR ì½”ë“œ ì»¨í…Œì´ë„ˆ',
                    description: 'QR ì½”ë“œ ì»¨í…Œì´ë„ˆ'
                }
            ],

            // í•„ìˆ˜ JavaScript íŒ¨í„´
            requiredPatterns: [
                /new SessionSDK\(\{/,  // SessionSDK ì´ˆê¸°í™”
                /sdk\.on\('connected'/,  // connected ì´ë²¤íŠ¸
                /sdk\.on\('session-created'/,  // session-created ì´ë²¤íŠ¸
                /sdk\.on\('sensor-data'/,  // sensor-data ì´ë²¤íŠ¸
                /event\.detail \|\| event/,  // CustomEvent ì²˜ë¦¬
                /createSession\(\)/,  // ì„¸ì…˜ ìƒì„± í˜¸ì¶œ
                /new QRCode\(|generateQRCode/i,  // QR ì½”ë“œ ìƒì„±
                /requestAnimationFrame/,  // ì• ë‹ˆë©”ì´ì…˜ ë£¨í”„
                /getContext\('2d'\)/  // ìº”ë²„ìŠ¤ 2D ì»¨í…ìŠ¤íŠ¸
            ],

            // í•„ìˆ˜ ìŠ¤í¬ë¦½íŠ¸
            requiredScripts: [
                '/socket.io/socket.io.js',
                '/js/SessionSDK.js'
            ]
        };
    }

    /**
     * ê²Œì„ ì „ì²´ ê²€ì¦
     */
    async validateGame(gameId, gamePath, gameMetadata = null) {
        const results = {
            gameId,
            gamePath,
            isValid: true,
            score: 0,
            maxScore: 130,  // ê¸°ë³¸ 100 + ì¥ë¥´ë³„ 30
            errors: [],
            warnings: [],
            suggestions: [],
            details: {}
        };

        try {
            console.log(`ğŸ” ê²Œì„ ê²€ì¦ ì‹œì‘: ${gameId}`);

            // ì¥ë¥´ ì¶”ì¶œ
            const genre = this.extractGenreInfo(gameMetadata, gameId);
            if (genre) {
                console.log(`ğŸ¯ ì¥ë¥´ë³„ ê²€ì¦ í™œì„±í™”: ${genre}`);
                results.genre = genre;
            }

            // 1. íŒŒì¼ êµ¬ì¡° ê²€ì¦ (10ì )
            const fileValidation = await this.validateFileStructure(gamePath);
            results.details.files = fileValidation;
            results.score += fileValidation.score;

            // 2. HTML êµ¬ì¡° ê²€ì¦ (20ì )
            const htmlPath = path.join(gamePath, 'index.html');
            const htmlValidation = await this.validateHTML(htmlPath);
            results.details.html = htmlValidation;
            results.score += htmlValidation.score;

            // 3. SessionSDK í†µí•© ê²€ì¦ (20ì )
            const sdkValidation = this.validateSessionSDK(htmlValidation.content);
            results.details.sdk = sdkValidation;
            results.score += sdkValidation.score;

            // 4. ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ ê²€ì¦ (25ì )
            const sensorValidation = this.validateSensorHandling(htmlValidation.content);
            results.details.sensor = sensorValidation;
            results.score += sensorValidation.score;

            // 5. ê²Œì„ ë£¨í”„ ê²€ì¦ (20ì )
            const gameLoopValidation = this.validateGameLoop(htmlValidation.content);
            results.details.gameLoop = gameLoopValidation;
            results.score += gameLoopValidation.score;

            // 6. Canvas ë Œë”ë§ ê²€ì¦ (15ì )
            const canvasValidation = this.validateCanvasRendering(htmlValidation.content);
            results.details.canvas = canvasValidation;
            results.score += canvasValidation.score;

            // 7. ê²Œì„ ìƒíƒœ ê´€ë¦¬ ê²€ì¦ (10ì )
            const stateValidation = this.validateGameState(htmlValidation.content);
            results.details.state = stateValidation;
            results.score += stateValidation.score;

            // 8. ì½”ë“œ í’ˆì§ˆ ê²€ì¦ (10ì )
            const qualityValidation = this.validateCodeQuality(htmlValidation.content);
            results.details.quality = qualityValidation;
            results.score += qualityValidation.score;

            // 9. ì¥ë¥´ë³„ ê²€ì¦ (30ì ) - ì˜µì…˜
            if (genre) {
                const genreValidation = this.validateGenreCompliance(
                    htmlValidation.content,
                    genre
                );
                results.details.genre = genreValidation;
                results.score += genreValidation.score;
            }

            // ìµœì¢… íŒì •
            results.isValid = results.score >= 95;  // 95/130ì  ì´ìƒ í†µê³¼
            results.grade = this.calculateGrade(results.score, results.maxScore);

            console.log(`âœ… ê²€ì¦ ì™„ë£Œ: ${results.score}/${results.maxScore}ì  (${results.grade})`);

            return results;

        } catch (error) {
            console.error('âŒ ê²Œì„ ê²€ì¦ ì‹¤íŒ¨:', error);
            results.isValid = false;
            results.errors.push(`ê²€ì¦ ì˜¤ë¥˜: ${error.message}`);
            return results;
        }
    }

    /**
     * SessionSDK í†µí•© ê²€ì¦ (20ì )
     */
    validateSessionSDK(content) {
        const result = {
            score: 0,
            maxScore: 20,
            checks: {}
        };

        // SDK ì´ˆê¸°í™” (5ì )
        if (/new SessionSDK\(\{/.test(content)) {
            result.score += 5;
            result.checks.initialization = true;
        }

        // connected ì´ë²¤íŠ¸ (5ì )
        if (/sdk\.on\('connected'/.test(content)) {
            result.score += 5;
            result.checks.connected = true;
        }

        // session-created ì´ë²¤íŠ¸ (5ì )
        if (/sdk\.on\('session-created'/.test(content)) {
            result.score += 5;
            result.checks.sessionCreated = true;
        }

        // sensor-data ì´ë²¤íŠ¸ (5ì )
        if (/sdk\.on\('sensor-data'/.test(content)) {
            result.score += 5;
            result.checks.sensorData = true;
        }

        return result;
    }

    /**
     * ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ ê²€ì¦ (25ì )
     */
    validateSensorHandling(content) {
        const result = {
            score: 0,
            maxScore: 25,
            checks: {}
        };

        // CustomEvent íŒ¨í„´ (10ì ) - ê°€ì¥ ì¤‘ìš”!
        if (/event\.detail \|\| event/.test(content)) {
            result.score += 10;
            result.checks.customEventPattern = true;
        }

        // orientation ë°ì´í„° ì²˜ë¦¬ (5ì )
        if (/orientation\.(beta|gamma|alpha)/.test(content)) {
            result.score += 5;
            result.checks.orientation = true;
        }

        // acceleration ë°ì´í„° ì²˜ë¦¬ (5ì )
        if (/acceleration\.(x|y|z)/.test(content)) {
            result.score += 5;
            result.checks.acceleration = true;
        }

        // ì„¼ì„œ ì—°ê²° ì‹œ ìë™ ì‹œì‘ (5ì ) - í”Œë ˆì´ì–´ë¸”ë¦¬í‹° í•µì‹¬!
        if (/sensor-connected.*setTimeout.*startGame/s.test(content)) {
            result.score += 5;
            result.checks.autoStart = true;
        }

        return result;
    }

    /**
     * ì¥ë¥´ë³„ ê²€ì¦ (30ì )
     */
    validateGenreCompliance(content, genre) {
        const result = {
            score: 0,
            maxScore: 30,
            genre: genre,
            matchedPatterns: [],
            missingPatterns: []
        };

        const rules = this.genreSpecificRules[genre.toLowerCase()];
        if (!rules) {
            return result;  // ì¥ë¥´ ê·œì¹™ ì—†ìœ¼ë©´ 0ì 
        }

        const requiredPatterns = rules.requiredPatterns || [];
        const pointsPerPattern = 30 / requiredPatterns.length;

        requiredPatterns.forEach((pattern, idx) => {
            if (pattern.test(content)) {
                result.score += pointsPerPattern;
                result.matchedPatterns.push(rules.keyFeatures[idx]);
            } else {
                result.missingPatterns.push(rules.keyFeatures[idx]);
            }
        });

        result.score = Math.round(result.score);

        return result;
    }

    /**
     * ë“±ê¸‰ ê³„ì‚°
     */
    calculateGrade(score, maxScore) {
        const percentage = (score / maxScore) * 100;

        if (percentage >= 95) return 'A+';
        if (percentage >= 90) return 'A';
        if (percentage >= 85) return 'B+';
        if (percentage >= 80) return 'B';
        if (percentage >= 75) return 'C+';
        if (percentage >= 70) return 'C';
        if (percentage >= 60) return 'D';
        return 'F';
    }
}

module.exports = GameValidator;
```

**ê²€ì¦ í•­ëª© ìƒì„¸:**

| í•­ëª© | ë°°ì  | ì£¼ìš” ì²´í¬ í¬ì¸íŠ¸ |
|------|------|------------------|
| íŒŒì¼ êµ¬ì¡° | 10ì  | index.html ì¡´ì¬, game.json ìœ íš¨ì„± |
| HTML êµ¬ì¡° | 20ì  | DOCTYPE, í•„ìˆ˜ íƒœê·¸, ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ |
| SessionSDK | 20ì  | ì´ˆê¸°í™”, connected/session-created/sensor-data ì´ë²¤íŠ¸ |
| ì„¼ì„œ ì²˜ë¦¬ | 25ì  | CustomEvent íŒ¨í„´, orientation/acceleration, ìë™ ì‹œì‘ |
| ê²Œì„ ë£¨í”„ | 20ì  | requestAnimationFrame, update/render ë¶„ë¦¬ |
| Canvas ë Œë”ë§ | 15ì  | getContext('2d'), clear, draw í•¨ìˆ˜ë“¤ |
| ìƒíƒœ ê´€ë¦¬ | 10ì  | gameStarted, gameOver, gamePaused í”Œë˜ê·¸ |
| ì½”ë“œ í’ˆì§ˆ | 10ì  | ì£¼ì„, ì—ëŸ¬ ì²˜ë¦¬, ë§¤ì§ ë„˜ë²„ ì—†ìŒ |
| **ì¥ë¥´ë³„** | **30ì ** | **ì¥ë¥´ íŠ¹í™” íŒ¨í„´ (arcade, physics ë“±)** |
| **ì´ì ** | **130ì ** | **95ì  ì´ìƒ í†µê³¼** |

### 6.5 ê²Œì„ ìœ ì§€ë³´ìˆ˜ ì‹œìŠ¤í…œ (GameMaintenanceManager)

#### 6.5.1 ì„¸ì…˜ ìœ ì§€ ë° ë²„ê·¸ ìˆ˜ì •

**íŒŒì¼ ìœ„ì¹˜:** `/Users/dev/ì¡¸ì—…ì‘í’ˆ/sensorchatbot/server/GameMaintenanceManager.js`

```javascript
/**
 * GameMaintenanceManager v1.0
 * ê²Œì„ ìƒì„± í›„ ìœ ì§€ë³´ìˆ˜ ì‹œìŠ¤í…œ
 */
class GameMaintenanceManager {
    constructor(config) {
        this.config = config;
        this.llm = new ChatAnthropic({
            anthropicApiKey: config.claudeApiKey,
            model: config.claudeModel,
            maxTokens: 64000,
            temperature: 0.2  // ìœ ì§€ë³´ìˆ˜ëŠ” ì •í™•ì„± ìµœìš°ì„ 
        });

        // í™œì„± ê²Œì„ ì„¸ì…˜ (gameId â†’ ê²Œì„ ì •ë³´)
        this.activeSessions = new Map();

        // ì„¸ì…˜ ë§Œë£Œ ì‹œê°„ (30ë¶„)
        this.sessionTimeout = 30 * 60 * 1000;

        // ìë™ ì •ë¦¬ íƒ€ì´ë¨¸
        this.startSessionCleaner();
    }

    /**
     * ê²Œì„ ì„¸ì…˜ ë“±ë¡
     */
    registerGameSession(gameId, gameInfo) {
        this.activeSessions.set(gameId, {
            ...gameInfo,
            createdAt: Date.now(),
            lastAccessedAt: Date.now(),
            version: '1.0',
            modifications: []
        });

        console.log(`âœ… ê²Œì„ ì„¸ì…˜ ë“±ë¡: ${gameId}`);
    }

    /**
     * ë²„ê·¸ ë¦¬í¬íŠ¸ ì²˜ë¦¬
     */
    async handleBugReport(gameId, bugDescription, userContext = '') {
        console.log(`ğŸ› ë²„ê·¸ ë¦¬í¬íŠ¸ ë°›ìŒ: ${gameId}`);
        console.log(`ì„¤ëª…: ${bugDescription}`);

        // ì„¸ì…˜ì´ ì—†ìœ¼ë©´ ìë™ ìƒì„± (ê¸°ì¡´ ê²Œì„ë„ ì§€ì›)
        if (!this.hasSession(gameId)) {
            console.log(`âš ï¸ ì„¸ì…˜ ì—†ìŒ. ìë™ ìƒì„±: ${gameId}`);
            await this.createSessionFromExistingGame(gameId);
        }

        const session = this.getSession(gameId);
        const gamePath = path.join(__dirname, '../public/games', gameId, 'index.html');

        try {
            // 1. í˜„ì¬ ê²Œì„ ì½”ë“œ ì½ê¸°
            const currentCode = await fs.readFile(gamePath, 'utf-8');

            // 2. ë²„ê·¸ ë¶„ì„ ë° ìˆ˜ì • ì½”ë“œ ìƒì„±
            const fixResult = await this.analyzeBugAndFix(
                currentCode,
                bugDescription,
                userContext
            );

            if (!fixResult.success) {
                return {
                    success: false,
                    message: 'ë²„ê·¸ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜ì •í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
                    analysis: fixResult.analysis
                };
            }

            // 3. ë²„ì „ ë°±ì—… (í˜„ì¬ ë²„ì „ ì €ì¥)
            await this.backupVersion(gameId, session.version);

            // 4. ìˆ˜ì •ëœ ì½”ë“œ ì €ì¥
            await fs.writeFile(gamePath, fixResult.fixedCode, 'utf-8');

            // 5. ë²„ì „ ì¦ê°€ (1.0 â†’ 1.1)
            session.version = this.incrementVersion(session.version);
            session.modifications.push({
                type: 'bug_fix',
                description: bugDescription,
                timestamp: Date.now(),
                version: session.version
            });

            // 6. DBì— ë²„ì „ ì •ë³´ ì €ì¥
            await this.saveGameVersionToDB(gameId, session);

            console.log(`âœ… ë²„ê·¸ ìˆ˜ì • ì™„ë£Œ: ${gameId} (v${session.version})`);

            return {
                success: true,
                message: 'ë²„ê·¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!',
                version: session.version,
                changes: fixResult.changes
            };

        } catch (error) {
            console.error(`âŒ ë²„ê·¸ ìˆ˜ì • ì‹¤íŒ¨: ${error.message}`);
            return {
                success: false,
                message: `ë²„ê·¸ ìˆ˜ì • ì¤‘ ì˜¤ë¥˜: ${error.message}`
            };
        }
    }

    /**
     * ë²„ê·¸ ë¶„ì„ ë° ìˆ˜ì • ì½”ë“œ ìƒì„±
     */
    async analyzeBugAndFix(currentCode, bugDescription, userContext) {
        console.log(`ğŸ” ë²„ê·¸ ë¶„ì„ ì¤‘...`);

        const prompt = `ë‹¤ìŒ ê²Œì„ ì½”ë“œì— ë²„ê·¸ê°€ ìˆìŠµë‹ˆë‹¤.

**ë²„ê·¸ ì„¤ëª…:**
${bugDescription}

${userContext ? `**ì‚¬ìš©ì ì¶”ê°€ ì •ë³´:**\n${userContext}\n` : ''}

**í˜„ì¬ ê²Œì„ ì½”ë“œ:**
\`\`\`html
${currentCode}
\`\`\`

ë‹¤ìŒì„ ìˆ˜í–‰í•˜ì„¸ìš”:
1. ë²„ê·¸ì˜ ì›ì¸ì„ ì •í™•íˆ íŒŒì•…
2. ìµœì†Œí•œì˜ ìˆ˜ì •ìœ¼ë¡œ ë²„ê·¸ í•´ê²° (ì „ì²´ ì¬ì‘ì„± ê¸ˆì§€!)
3. ìˆ˜ì •ëœ ì™„ì „í•œ HTML ì½”ë“œ ì¶œë ¥

**ì¤‘ìš”:**
- ê¸°ì¡´ ì½”ë“œì˜ êµ¬ì¡°ì™€ ìŠ¤íƒ€ì¼ì„ ìµœëŒ€í•œ ìœ ì§€
- ë²„ê·¸ì™€ ì§ì ‘ ê´€ë ¨ëœ ë¶€ë¶„ë§Œ ìˆ˜ì •
- ìˆ˜ì • ì‚¬í•­ì„ ì£¼ì„ìœ¼ë¡œ ëª…ì‹œ (ì˜ˆ: // ğŸ”§ FIX: ë²„ê·¸ ì„¤ëª…)
- ì™„ì „í•œ HTML íŒŒì¼ ì¶œë ¥ (<!DOCTYPE html>ë¶€í„° </html>ê¹Œì§€)

ìˆ˜ì •ëœ ì½”ë“œ:`;

        try {
            const response = await this.llm.invoke(prompt);
            const fixedCode = this.extractHTMLFromResponse(response.content);

            // ìˆ˜ì • ë‚´ìš© ë¶„ì„
            const changes = this.analyzeCodeChanges(currentCode, fixedCode);

            return {
                success: true,
                fixedCode: fixedCode,
                changes: changes
            };

        } catch (error) {
            console.error('âŒ ë²„ê·¸ ë¶„ì„ ì‹¤íŒ¨:', error);
            return {
                success: false,
                analysis: error.message
            };
        }
    }

    /**
     * ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­ ì²˜ë¦¬
     */
    async handleFeatureRequest(gameId, featureDescription) {
        console.log(`âœ¨ ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­: ${gameId}`);
        console.log(`ë‚´ìš©: ${featureDescription}`);

        const session = this.getSession(gameId);
        const gamePath = path.join(__dirname, '../public/games', gameId, 'index.html');

        try {
            const currentCode = await fs.readFile(gamePath, 'utf-8');

            // ì¦ë¶„ ì—…ë°ì´íŠ¸ (ì „ì²´ ì¬ìƒì„± ì•„ë‹˜!)
            const enhancedCode = await this.addFeatureToGame(
                currentCode,
                featureDescription
            );

            // ë°±ì—… ë° ì €ì¥
            await this.backupVersion(gameId, session.version);
            await fs.writeFile(gamePath, enhancedCode, 'utf-8');

            // ë²„ì „ ì—…ë°ì´íŠ¸
            session.version = this.incrementVersion(session.version);
            session.modifications.push({
                type: 'feature_addition',
                description: featureDescription,
                timestamp: Date.now(),
                version: session.version
            });

            await this.saveGameVersionToDB(gameId, session);

            console.log(`âœ… ê¸°ëŠ¥ ì¶”ê°€ ì™„ë£Œ: ${gameId} (v${session.version})`);

            return {
                success: true,
                message: 'ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!',
                version: session.version
            };

        } catch (error) {
            console.error(`âŒ ê¸°ëŠ¥ ì¶”ê°€ ì‹¤íŒ¨: ${error.message}`);
            return {
                success: false,
                message: `ê¸°ëŠ¥ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜: ${error.message}`
            };
        }
    }

    /**
     * ë²„ì „ ë²ˆí˜¸ ì¦ê°€ (1.0 â†’ 1.1 â†’ 1.2 â†’ ... â†’ 2.0)
     */
    incrementVersion(currentVersion) {
        const [major, minor] = currentVersion.split('.').map(Number);

        if (minor >= 9) {
            return `${major + 1}.0`;  // 1.9 â†’ 2.0
        } else {
            return `${major}.${minor + 1}`;  // 1.0 â†’ 1.1
        }
    }

    /**
     * ì„¸ì…˜ ìë™ ì •ë¦¬ (30ë¶„ ë¯¸ì ‘ì† ì‹œ ì‚­ì œ)
     */
    startSessionCleaner() {
        setInterval(() => {
            const now = Date.now();

            for (const [gameId, session] of this.activeSessions.entries()) {
                const timeSinceAccess = now - session.lastAccessedAt;

                if (timeSinceAccess > this.sessionTimeout) {
                    console.log(`ğŸ—‘ï¸ ì„¸ì…˜ ë§Œë£Œ: ${gameId} (30ë¶„ ë¯¸ì ‘ì†)`);
                    this.activeSessions.delete(gameId);
                }
            }
        }, 5 * 60 * 1000);  // 5ë¶„ë§ˆë‹¤ ì²´í¬
    }
}

module.exports = GameMaintenanceManager;
```

**ìœ ì§€ë³´ìˆ˜ API ì—”ë“œí¬ì¸íŠ¸:**

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… |
|------------|--------|------|
| `/api/maintenance/report-bug` | POST | ë²„ê·¸ ë¦¬í¬íŠ¸ ì œì¶œ ë° ìë™ ìˆ˜ì • |
| `/api/maintenance/add-feature` | POST | ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­ |
| `/api/maintenance/session/:gameId` | GET | ì„¸ì…˜ ì •ë³´ ì¡°íšŒ |
| `/api/maintenance/history/:gameId` | GET | ìˆ˜ì • ì´ë ¥ ì¡°íšŒ |
| `/api/maintenance/rollback/:gameId/:version` | POST | ì´ì „ ë²„ì „ìœ¼ë¡œ ë¡¤ë°± |

**ì‚¬ìš© ì˜ˆì‹œ:**

```javascript
// ë²„ê·¸ ë¦¬í¬íŠ¸
const response = await fetch('/api/maintenance/report-bug', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        gameId: 'tilt-maze-v1',
        bugDescription: 'ê³µì´ íŒ¨ë“¤ì—ì„œ ë–¨ì–´ì§€ì§€ ì•Šì•„ìš”',
        userContext: 'ì„¼ì„œëŠ” ì •ìƒ ì—°ê²°ë˜ì—ˆê³ , ê¸°ìš¸ì—¬ë„ ë°˜ì‘ ì—†ìŒ'
    })
});

const result = await response.json();
// {
//   success: true,
//   message: 'ë²„ê·¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤!',
//   version: '1.1',
//   changes: [
//     'ğŸ”§ FIX: ball.stuck í”Œë˜ê·¸ ì²˜ë¦¬ ìˆ˜ì •',
//     'ğŸ”§ FIX: startGame() í•¨ìˆ˜ì— ì´ˆê¸° ì†ë„ ì„¤ì • ì¶”ê°€'
//   ]
// }
```

### 6.6 ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ (PerformanceMonitor)

#### 6.6.1 ì¢…í•© ì„±ëŠ¥ ì¶”ì 

**íŒŒì¼ ìœ„ì¹˜:** `/Users/dev/ì¡¸ì—…ì‘í’ˆ/sensorchatbot/server/PerformanceMonitor.js`

```javascript
/**
 * PerformanceMonitor.js
 * AI ê²Œì„ ìƒì„±ê¸° ì¢…í•© ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ
 */
class PerformanceMonitor {
    constructor() {
        // ì„±ëŠ¥ ë©”íŠ¸ë¦­ ì €ì¥ì†Œ
        this.metrics = {
            // ê²Œì„ ìƒì„± ê´€ë ¨
            gameGeneration: {
                totalGenerations: 0,
                successfulGenerations: 0,
                failedGenerations: 0,
                averageGenerationTime: 0,
                totalGenerationTime: 0
            },

            // AI ëª¨ë¸ ì„±ëŠ¥
            aiModel: {
                totalRequests: 0,
                failedRequests: 0,
                averageResponseTime: 0,
                totalResponseTime: 0,
                tokenUsage: {
                    input: 0,
                    output: 0,
                    total: 0
                }
            },

            // ê²€ì¦ ì‹œìŠ¤í…œ
            validation: {
                totalValidations: 0,
                averageScore: 0,
                averageValidationTime: 0,
                genreSpecificPerformance: {}
            },

            // ì‚¬ìš©ì ê²½í—˜
            userExperience: {
                sessionCompletionRate: 0,
                averageSessionDuration: 0,
                mostPopularGenres: {},
                mostPopularGameTypes: {}
            }
        };

        // í™œì„± ì„¸ì…˜ ì¶”ì 
        this.activeSessions = new Map();

        // ì„±ëŠ¥ íˆìŠ¤í† ë¦¬ (ìµœê·¼ 100ê°œ)
        this.performanceHistory = {
            generationTimes: [],
            validationScores: [],
            responseTimes: [],
            timestamps: []
        };

        // ì•Œë¦¼ ì„ê³„ê°’
        this.alertThresholds = {
            maxGenerationTime: 60000,  // 60ì´ˆ
            minValidationScore: 70,
            maxResponseTime: 10000,  // 10ì´ˆ
            minSuccessRate: 0.8  // 80%
        };

        // ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
        this.eventHandlers = new Map();
    }

    /**
     * ê²Œì„ ìƒì„± ì¶”ì  ì‹œì‘
     */
    startGameGenerationTracking(sessionId, metadata = {}) {
        const tracking = {
            sessionId,
            startTime: Date.now(),
            metadata,
            stages: {},
            completed: false
        };

        this.activeSessions.set(sessionId, tracking);

        console.log(`ğŸ“Š ì„±ëŠ¥ ì¶”ì  ì‹œì‘: ${sessionId}`);

        return tracking;
    }

    /**
     * ë‹¨ê³„ ì™„ë£Œ ê¸°ë¡
     */
    recordStageCompletion(sessionId, stageName, stageData = {}) {
        const tracking = this.activeSessions.get(sessionId);
        if (!tracking) return;

        tracking.stages[stageName] = {
            completedAt: Date.now(),
            duration: Date.now() - tracking.startTime,
            ...stageData
        };

        console.log(`âœ… ë‹¨ê³„ ì™„ë£Œ: ${sessionId} - ${stageName}`);
    }

    /**
     * ê²Œì„ ìƒì„± ì™„ë£Œ ê¸°ë¡
     */
    recordGenerationComplete(sessionId, success, validationScore = null) {
        const tracking = this.activeSessions.get(sessionId);
        if (!tracking) return;

        const endTime = Date.now();
        const totalTime = endTime - tracking.startTime;

        tracking.completed = true;
        tracking.success = success;
        tracking.endTime = endTime;
        tracking.totalTime = totalTime;
        tracking.validationScore = validationScore;

        // ë©”íŠ¸ë¦­ ì—…ë°ì´íŠ¸
        this.metrics.gameGeneration.totalGenerations++;

        if (success) {
            this.metrics.gameGeneration.successfulGenerations++;
        } else {
            this.metrics.gameGeneration.failedGenerations++;
        }

        this.metrics.gameGeneration.totalGenerationTime += totalTime;
        this.metrics.gameGeneration.averageGenerationTime =
            this.metrics.gameGeneration.totalGenerationTime /
            this.metrics.gameGeneration.totalGenerations;

        // íˆìŠ¤í† ë¦¬ ì¶”ê°€
        this.performanceHistory.generationTimes.push(totalTime);
        if (validationScore !== null) {
            this.performanceHistory.validationScores.push(validationScore);
        }
        this.performanceHistory.timestamps.push(endTime);

        // íˆìŠ¤í† ë¦¬ í¬ê¸° ì œí•œ (ìµœê·¼ 100ê°œ)
        if (this.performanceHistory.generationTimes.length > 100) {
            this.performanceHistory.generationTimes.shift();
            this.performanceHistory.validationScores.shift();
            this.performanceHistory.timestamps.shift();
        }

        // ì•Œë¦¼ ì²´í¬
        if (totalTime > this.alertThresholds.maxGenerationTime) {
            this.emit('alert', {
                type: 'slow_generation',
                message: `ìƒì„± ì‹œê°„ ì´ˆê³¼: ${(totalTime / 1000).toFixed(1)}ì´ˆ`,
                sessionId,
                data: { totalTime, threshold: this.alertThresholds.maxGenerationTime }
            });
        }

        if (validationScore !== null && validationScore < this.alertThresholds.minValidationScore) {
            this.emit('alert', {
                type: 'low_quality',
                message: `ë‚®ì€ í’ˆì§ˆ ì ìˆ˜: ${validationScore}ì `,
                sessionId,
                data: { validationScore, threshold: this.alertThresholds.minValidationScore }
            });
        }

        console.log(`ğŸ“Š ìƒì„± ì™„ë£Œ ê¸°ë¡: ${sessionId} (${(totalTime / 1000).toFixed(1)}ì´ˆ, ${validationScore}ì )`);

        // ì„¸ì…˜ ì •ë¦¬
        this.activeSessions.delete(sessionId);
    }

    /**
     * í† í° ì‚¬ìš©ëŸ‰ ê¸°ë¡
     */
    recordTokenUsage(inputTokens, outputTokens) {
        this.metrics.aiModel.tokenUsage.input += inputTokens;
        this.metrics.aiModel.tokenUsage.output += outputTokens;
        this.metrics.aiModel.tokenUsage.total += (inputTokens + outputTokens);

        console.log(`ğŸª™ í† í° ì‚¬ìš©: ì…ë ¥ ${inputTokens}, ì¶œë ¥ ${outputTokens}`);
    }

    /**
     * ì„±ëŠ¥ í†µê³„ ì¶œë ¥
     */
    printStatistics() {
        console.log('\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');
        console.log('ğŸ“Š AI ê²Œì„ ìƒì„±ê¸° ì„±ëŠ¥ í†µê³„');
        console.log('â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”');

        const gg = this.metrics.gameGeneration;
        const successRate = gg.totalGenerations > 0
            ? (gg.successfulGenerations / gg.totalGenerations * 100).toFixed(1)
            : 0;

        console.log(`\nğŸ® ê²Œì„ ìƒì„±:`);
        console.log(`   ì´ ìƒì„±: ${gg.totalGenerations}íšŒ`);
        console.log(`   ì„±ê³µ: ${gg.successfulGenerations}íšŒ | ì‹¤íŒ¨: ${gg.failedGenerations}íšŒ`);
        console.log(`   ì„±ê³µë¥ : ${successRate}%`);
        console.log(`   í‰ê·  ìƒì„± ì‹œê°„: ${(gg.averageGenerationTime / 1000).toFixed(1)}ì´ˆ`);

        const ai = this.metrics.aiModel;
        console.log(`\nğŸ¤– AI ëª¨ë¸:`);
        console.log(`   ì´ ìš”ì²­: ${ai.totalRequests}íšŒ | ì‹¤íŒ¨: ${ai.failedRequests}íšŒ`);
        console.log(`   í‰ê·  ì‘ë‹µ ì‹œê°„: ${(ai.averageResponseTime / 1000).toFixed(1)}ì´ˆ`);
        console.log(`   í† í° ì‚¬ìš©: ì…ë ¥ ${ai.tokenUsage.input.toLocaleString()} | ì¶œë ¥ ${ai.tokenUsage.output.toLocaleString()}`);
        console.log(`   ì´ í† í°: ${ai.tokenUsage.total.toLocaleString()}`);

        const val = this.metrics.validation;
        console.log(`\nâœ… ê²€ì¦ ì‹œìŠ¤í…œ:`);
        console.log(`   ì´ ê²€ì¦: ${val.totalValidations}íšŒ`);
        console.log(`   í‰ê·  ì ìˆ˜: ${val.averageScore.toFixed(1)}/130ì `);
        console.log(`   í‰ê·  ê²€ì¦ ì‹œê°„: ${(val.averageValidationTime / 1000).toFixed(1)}ì´ˆ`);

        console.log('\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n');
    }

    /**
     * ì´ë²¤íŠ¸ ë°œìƒ
     */
    emit(eventName, data) {
        const handlers = this.eventHandlers.get(eventName);
        if (handlers) {
            handlers.forEach(handler => handler(data));
        }
    }

    /**
     * ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
     */
    on(eventName, handler) {
        if (!this.eventHandlers.has(eventName)) {
            this.eventHandlers.set(eventName, []);
        }
        this.eventHandlers.get(eventName).push(handler);
    }
}

module.exports = PerformanceMonitor;
```

**ì„±ëŠ¥ í†µê³„ ì˜ˆì‹œ:**

```
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
ğŸ“Š AI ê²Œì„ ìƒì„±ê¸° ì„±ëŠ¥ í†µê³„
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ğŸ® ê²Œì„ ìƒì„±:
   ì´ ìƒì„±: 47íšŒ
   ì„±ê³µ: 45íšŒ | ì‹¤íŒ¨: 2íšŒ
   ì„±ê³µë¥ : 95.7%
   í‰ê·  ìƒì„± ì‹œê°„: 42.3ì´ˆ

ğŸ¤– AI ëª¨ë¸:
   ì´ ìš”ì²­: 189íšŒ | ì‹¤íŒ¨: 3íšŒ
   í‰ê·  ì‘ë‹µ ì‹œê°„: 8.5ì´ˆ
   í† í° ì‚¬ìš©: ì…ë ¥ 1,234,567 | ì¶œë ¥ 2,345,678
   ì´ í† í°: 3,580,245

âœ… ê²€ì¦ ì‹œìŠ¤í…œ:
   ì´ ê²€ì¦: 45íšŒ
   í‰ê·  ì ìˆ˜: 102.4/130ì 
   í‰ê·  ê²€ì¦ ì‹œê°„: 1.2ì´ˆ

â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
```

### 6.7 AI ì‹œìŠ¤í…œ ì¢…í•© í”Œë¡œìš°

#### 6.7.1 ì™„ì „í•œ ìƒì„± í”„ë¡œì„¸ìŠ¤

```mermaid
sequenceDiagram
    participant U as ì‚¬ìš©ì (ë¸Œë¼ìš°ì €)
    participant API as Express API
    participant IGG as InteractiveGameGenerator
    participant RAG as RAG ì‹œìŠ¤í…œ
    participant Claude as Claude Sonnet 4.5
    participant Val as GameValidator
    participant GM as GameMaintenanceManager
    participant FS as File System
    participant WS as WebSocket (Socket.IO)

    U->>API: POST /api/start-game-session
    API->>IGG: startNewSession(sessionId)
    IGG->>IGG: í™˜ì˜ ë©”ì‹œì§€ ìƒì„±
    IGG-->>U: {stage: 'initial', message: '...'}

    loop ëŒ€í™”í˜• ìˆ˜ì§‘ (Initial â†’ Details â†’ Mechanics â†’ Confirmation)
        U->>API: POST /api/game-chat {message}
        API->>IGG: processMessage(sessionId, message)
        IGG->>RAG: í‚¤ì›Œë“œ ê¸°ë°˜ ë¬¸ì„œ ê²€ìƒ‰
        RAG-->>IGG: ê´€ë ¨ ë¬¸ì„œ 3-5ê°œ
        IGG->>Claude: ëŒ€í™” ìƒì„± í”„ë¡¬í”„íŠ¸
        Claude-->>IGG: ì‘ë‹µ + JSON (stage transition)
        IGG->>IGG: JSON ì¶”ì¶œ ë° stage ì „í™˜
        IGG-->>U: {stage, message, requirements}
    end

    U->>API: POST /api/finalize-game
    API->>IGG: generateFinalGame(sessionId)

    IGG->>WS: emit 'game-generation-progress' (10%, Step 1)
    WS-->>U: ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„)

    IGG->>RAG: getGameDevelopmentContext(requirements)
    RAG->>RAG: buildSearchQuery(requirements)
    RAG->>RAG: vectorStore.similaritySearch(query, k=5)
    RAG-->>IGG: Top-5 ê´€ë ¨ ë¬¸ì„œ (threshold=0.7)

    IGG->>WS: emit 'game-generation-progress' (20%, Step 2)
    WS-->>U: ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (ë¬¸ì„œ ê²€ìƒ‰ ì™„ë£Œ)

    IGG->>Claude: generateGameCodeWithClaude(requirements, ragContext)
    IGG->>WS: emit 'game-generation-progress' (50%, Step 3)
    WS-->>U: ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (ì½”ë“œ ìƒì„± ì¤‘...)

    Claude-->>IGG: ì™„ì „í•œ HTML ê²Œì„ ì½”ë“œ (64K í† í°)

    IGG->>WS: emit 'game-generation-progress' (80%, Step 4)
    WS-->>U: ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (ì½”ë“œ ê²€ì¦ ì¤‘)

    IGG->>Val: validateGame(gameId, gameCode, metadata)
    Val->>Val: 130ì  ë§Œì  ì²´í¬ë¦¬ìŠ¤íŠ¸ ê²€ì¦
    Val-->>IGG: {score: 102, isValid: true, grade: 'A'}

    alt ì ìˆ˜ 95ì  ë¯¸ë§Œ
        IGG->>Claude: ì¬ìƒì„± ìš”ì²­ (ìµœëŒ€ 3íšŒ)
    end

    IGG->>WS: emit 'game-generation-progress' (90%, Step 5)
    WS-->>U: ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (íŒŒì¼ ì €ì¥ ì¤‘)

    IGG->>FS: saveGameFiles(gameId, gameCode)
    FS-->>IGG: ì €ì¥ ì™„ë£Œ

    IGG->>GM: registerGameSession(gameId, gameInfo)
    GM-->>IGG: ì„¸ì…˜ ë“±ë¡ ì™„ë£Œ (30ë¶„ ìœ ì§€)

    IGG->>WS: emit 'game-generation-progress' (100%, Step 5)
    WS-->>U: ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ (ì™„ë£Œ!)

    IGG-->>API: {success: true, gameId, playUrl}
    API-->>U: ê²Œì„ ìƒì„± ì™„ë£Œ ì‘ë‹µ

    U->>U: ìë™ìœ¼ë¡œ /games/{gameId} ì´ë™

    opt ë²„ê·¸ ë°œê²¬ ì‹œ
        U->>API: POST /api/maintenance/report-bug
        API->>GM: handleBugReport(gameId, bugDescription)
        GM->>FS: í˜„ì¬ ì½”ë“œ ì½ê¸°
        GM->>Claude: analyzeBugAndFix(code, bug)
        Claude-->>GM: ìˆ˜ì •ëœ ì½”ë“œ
        GM->>FS: backupVersion(gameId, version)
        GM->>FS: ìˆ˜ì •ëœ ì½”ë“œ ì €ì¥
        GM-->>U: {success: true, version: '1.1'}
    end
```

### 6.8 AI ì‹œìŠ¤í…œ í•µì‹¬ í†µê³„

#### 6.8.1 ëª¨ë¸ ì„±ëŠ¥

| ëª¨ë¸ | ë²„ì „ | ì¶œë ¥ í† í° | Temperature | ìš©ë„ |
|------|------|-----------|-------------|------|
| Claude Sonnet 4.5 | 20250929 | 64,000 | 0.3 | ê²Œì„ ì½”ë“œ ìƒì„± |
| Claude Opus 4.1 | 20250805 | 32,000 | 0.2 | ë³µì¡í•œ ë²„ê·¸ ë¶„ì„ |
| OpenAI Embeddings | text-embedding-3-small | - | - | ë¬¸ì„œ ë²¡í„°í™” (1536ì°¨ì›) |

#### 6.8.2 RAG ì‹œìŠ¤í…œ í†µê³„

| í•­ëª© | ìˆ˜ëŸ‰/ê°’ |
|------|---------|
| ì´ ë¬¸ì„œ ìˆ˜ | 400ê°œ (35ê°œ ë§ˆí¬ë‹¤ìš´ íŒŒì¼) |
| ë²¡í„° ì°¨ì› | 1536 (text-embedding-3-small) |
| ê²€ìƒ‰ ë¬¸ì„œ ìˆ˜ (Top-K) | 5ê°œ |
| ìœ ì‚¬ë„ ì„ê³„ê°’ | 0.7 (70% ì´ìƒ) |
| í‰ê·  ê²€ìƒ‰ ì‹œê°„ | 0.3ì´ˆ |
| í‰ê·  ì»¨í…ìŠ¤íŠ¸ í¬ê¸° | 5,000-10,000 í† í° |

#### 6.8.3 ê²Œì„ ìƒì„± ì„±ëŠ¥

| ë©”íŠ¸ë¦­ | ê°’ |
|--------|-----|
| í‰ê·  ìƒì„± ì‹œê°„ | 42ì´ˆ |
| ì„±ê³µë¥  | 95.7% (45/47) |
| í‰ê·  í’ˆì§ˆ ì ìˆ˜ | 102.4/130ì  (A ë“±ê¸‰) |
| í‰ê·  ì½”ë“œ ê¸¸ì´ | 1,200 ì¤„ |
| í‰ê·  í† í° ì‚¬ìš© | ì…ë ¥ 26K, ì¶œë ¥ 51K |

#### 6.8.4 ê²€ì¦ ì‹œìŠ¤í…œ í†µê³¼ìœ¨

| ê²€ì¦ í•­ëª© | í†µê³¼ìœ¨ |
|-----------|--------|
| SessionSDK í†µí•© | 98% |
| ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ | 95% |
| ê²Œì„ ë£¨í”„ êµ¬í˜„ | 100% |
| Canvas ë Œë”ë§ | 100% |
| ê²Œì„ ìƒíƒœ ê´€ë¦¬ | 92% |
| ì¥ë¥´ë³„ íŒ¨í„´ | 88% |

**Part 6 ì™„ë£Œ! âœ…**

**ì´ë²ˆ íŒŒíŠ¸ì—ì„œ ë‹¤ë£¬ ë‚´ìš©:**
- âœ… ëŒ€í™”í˜• ê²Œì„ ìƒì„± ì‹œìŠ¤í…œ (InteractiveGameGenerator) ì™„ì „ ë¶„ì„
- âœ… RAG ì‹œìŠ¤í…œ (Supabase Vector Store + OpenAI Embeddings) êµ¬ì¡°
- âœ… Claude AI ì½”ë“œ ìƒì„± ë° í”„ë¡¬í”„íŠ¸ ì—”ì§€ë‹ˆì–´ë§
- âœ… GameValidator (130ì  ì²´í¬ë¦¬ìŠ¤íŠ¸ ì‹œìŠ¤í…œ)
- âœ… GameMaintenanceManager (ë²„ê·¸ ìˆ˜ì • ë° ê¸°ëŠ¥ ì¶”ê°€)
- âœ… PerformanceMonitor (ì¢…í•© ì„±ëŠ¥ ì¶”ì )
- âœ… AI ì‹œìŠ¤í…œ ì™„ì „í•œ í”Œë¡œìš° ë° í†µê³„

**í†µê³„:**
- Part 6 ë¶„ëŸ‰: ~1,800 ì¤„
- ì´ ë‹¤ì´ì–´ê·¸ë¨: 3ê°œ (ì•„í‚¤í…ì²˜, RAG, ì‹œí€€ìŠ¤)
- ì½”ë“œ ì˜ˆì‹œ: 15ê°œ ì´ìƒ
- í˜„ì¬ ë¬¸ì„œ ì´í•©: ì•½ 5,886 ì¤„

**ë‹¤ìŒ:** Part 7 (ê°œë°œì ê³„ì • ì‹œìŠ¤í…œ)ë¡œ ê³„ì†...

---

## Part 7: ê°œë°œì ì„¼í„° & API ì‹œìŠ¤í…œ ğŸ“¡

### ê°œìš”

Sensor Game HubëŠ” **í†µí•© ê°œë°œì ì„¼í„° (Developer Center)**ë¥¼ ì œê³µí•˜ì—¬ ê°œë°œìë“¤ì´ ë¬¸ì„œë¥¼ íƒìƒ‰í•˜ê³ , AI ì±—ë´‡ê³¼ ëŒ€í™”í•˜ë©°, ê²Œì„ì„ ìƒì„±í•  ìˆ˜ ìˆëŠ” ì›ìŠ¤í†± í”Œë«í¼ì„ ì œê³µí•©ë‹ˆë‹¤. í˜„ì¬ ì‹œìŠ¤í…œì€ **ì˜¤í”ˆ ì•¡ì„¸ìŠ¤**ë¡œ ìš´ì˜ë˜ë©°, ë³„ë„ì˜ ì¸ì¦ ì—†ì´ ëª¨ë“  ê¸°ëŠ¥ì— ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**í•µì‹¬ ê¸°ëŠ¥:**
- **35ê°œ ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œ** í†µí•© ë·°ì–´
- **AI ë§¤ë‰´ì–¼ ì±—ë´‡** (RAG ê¸°ë°˜ ì‹¤ì‹œê°„ ë‹µë³€)
- **ëŒ€í™”í˜• AI ê²Œì„ ìƒì„±ê¸°**
- **ì¢Œì¸¡ ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜**
- **ì‹¤ì‹œê°„ ì§„í–‰ë¥  íŠ¸ë˜í‚¹**

### 7.1 Developer Center ì•„í‚¤í…ì²˜

#### 7.1.1 ì „ì²´ êµ¬ì¡°

```mermaid
graph TB
    subgraph "í´ë¼ì´ì–¸íŠ¸ (ë¸Œë¼ìš°ì €)"
        A[Developer Center<br/>http://localhost:3000/developer]
        B[ë¬¸ì„œ ë·°ì–´<br/>/developer/docs/...md]
        C[AI ì±—ë´‡ UI<br/>ì‹¤ì‹œê°„ ëŒ€í™”]
        D[ê²Œì„ ìƒì„±ê¸° UI<br/>4ë‹¨ê³„ ëŒ€í™”]
    end

    subgraph "ì„œë²„ (Express Router)"
        E[developerRoutes.js<br/>ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬]
        F[MarkdownRenderer<br/>MD â†’ HTML ë³€í™˜]
        G[AIManualChatbot<br/>RAG ì±—ë´‡]
        H[InteractiveGameGenerator<br/>ê²Œì„ ìƒì„±]
    end

    subgraph "ë°ì´í„° ì†ŒìŠ¤"
        I[docs/ í´ë”<br/>35ê°œ MD íŒŒì¼]
        J[Supabase Vector Store<br/>400ê°œ ì„ë² ë”© ë¬¸ì„œ]
    end

    subgraph "AI ì„œë¹„ìŠ¤"
        K[Claude Sonnet 4.5<br/>ì±—ë´‡ & ê²Œì„ ìƒì„±]
        L[OpenAI Embeddings<br/>ë¬¸ì„œ ê²€ìƒ‰]
    end

    A --> E
    B --> E
    C --> E
    D --> E

    E --> F
    E --> G
    E --> H

    F --> I
    G --> J
    H --> J

    G --> K
    G --> L
    H --> K
    H --> L

    style A fill:#e3f2fd
    style E fill:#fff9c4
    style K fill:#c8e6c9
```

#### 7.1.2 íŒŒì¼ êµ¬ì¡°

```
server/
â”œâ”€â”€ routes/
â”‚   â””â”€â”€ developerRoutes.js      # ë©”ì¸ ë¼ìš°í„° (2,300ì¤„)
â”œâ”€â”€ utils/
â”‚   â””â”€â”€ markdownRenderer.js     # MD ë Œë”ë§
â”œâ”€â”€ AIManualChatbot.js          # RAG ì±—ë´‡
â””â”€â”€ InteractiveGameGenerator.js # ê²Œì„ ìƒì„±ê¸°

docs/                           # 35ê°œ ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œ
â”œâ”€â”€ README.md
â”œâ”€â”€ PERFECT_GAME_DEVELOPMENT_GUIDE.md
â”œâ”€â”€ game-development/           # 6ê°œ ë¬¸ì„œ
â”œâ”€â”€ api-sdk/                    # API ë ˆí¼ëŸ°ìŠ¤
â”œâ”€â”€ sensor-processing/          # ì„¼ì„œ ê°€ì´ë“œ
â”œâ”€â”€ game-types/                 # ê²Œì„ íƒ€ì…ë³„ ê°€ì´ë“œ
â”œâ”€â”€ troubleshooting/            # íŠ¸ëŸ¬ë¸”ìŠˆíŒ…
â”œâ”€â”€ advanced/                   # ê³ ê¸‰ ì£¼ì œ
â””â”€â”€ examples/                   # ì˜ˆì œ ì½”ë“œ
```

### 7.2 Developer Center ë¼ìš°í„° (developerRoutes.js)

#### 7.2.1 í•µì‹¬ í´ë˜ìŠ¤ ë¶„ì„

**íŒŒì¼ ìœ„ì¹˜:** `/Users/dev/ì¡¸ì—…ì‘í’ˆ/sensorchatbot/server/routes/developerRoutes.js`

##### ê¸°ë³¸ êµ¬ì¡°

```javascript
/**
 * DeveloperRoutes v6.0
 * í†µí•© ê°œë°œì ì„¼í„° ë¼ìš°íŠ¸
 */
class DeveloperRoutes {
    constructor(gameScanner, aiServiceGetter) {
        this.gameScanner = gameScanner;  // ê²Œì„ ìë™ ìŠ¤ìº”
        this.aiServiceGetter = aiServiceGetter;  // AI ì„œë¹„ìŠ¤ DI
        this.router = express.Router();
        this.markdownRenderer = new MarkdownRenderer();
        this.docsBasePath = path.join(__dirname, '../../docs');

        // ë¬¸ì„œ íŠ¸ë¦¬ êµ¬ì¡° ì •ì˜ (35ê°œ ë¬¸ì„œ)
        this.documentTree = {
            'Root Docs': [
                { path: 'README.md', title: 'ğŸ“š ì„¼ì„œ ê²Œì„ í—ˆë¸Œ ë¬¸ì„œ' },
                { path: 'PERFECT_GAME_DEVELOPMENT_GUIDE.md', title: 'ğŸ® ì™„ë²½í•œ ê²Œì„ ê°œë°œ ê°€ì´ë“œ' },
                { path: 'SENSOR_GAME_TROUBLESHOOTING.md', title: 'ğŸ”§ ì„¼ì„œ ê²Œì„ íŠ¸ëŸ¬ë¸”ìŠˆíŒ…' },
                { path: 'SESSIONSK_INTEGRATION_PATTERNS.md', title: 'ğŸ”— SessionSDK í†µí•© íŒ¨í„´' }
            ],
            'Game Development': [
                { path: 'game-development/01-architecture-design.md', title: '1ï¸âƒ£ ì•„í‚¤í…ì²˜ ë””ìì¸' },
                { path: 'game-development/02-sessionsdk-advanced.md', title: '2ï¸âƒ£ SessionSDK ê³ ê¸‰' },
                { path: 'game-development/03-sensor-data-mastery.md', title: '3ï¸âƒ£ ì„¼ì„œ ë°ì´í„° ë§ˆìŠ¤í„°ë¦¬' },
                { path: 'game-development/04-physics-engine.md', title: '4ï¸âƒ£ ë¬¼ë¦¬ ì—”ì§„' },
                { path: 'game-development/05-ui-ux-patterns.md', title: '5ï¸âƒ£ UI/UX íŒ¨í„´' },
                { path: 'game-development/06-performance-optimization.md', title: '6ï¸âƒ£ ì„±ëŠ¥ ìµœì í™”' }
            ],
            'API & SDK': [
                { path: 'api-sdk/sessionsdk-reference.md', title: 'ğŸ“– SessionSDK API ë ˆí¼ëŸ°ìŠ¤' }
            ],
            'Sensor Processing': [
                { path: 'sensor-processing/orientation-sensor.md', title: 'ğŸ§­ ë°©í–¥ ì„¼ì„œ' },
                { path: 'sensor-processing/acceleration-sensor.md', title: 'âš¡ ê°€ì†ë„ ì„¼ì„œ' },
                { path: 'sensor-processing/sensor-fusion.md', title: 'ğŸ”„ ì„¼ì„œ í“¨ì „' }
            ],
            'Game Types': [
                { path: 'game-types/solo-game-guide.md', title: 'ğŸ‘¤ ì†”ë¡œ ê²Œì„ ê°€ì´ë“œ' },
                { path: 'game-types/dual-game-guide.md', title: 'ğŸ‘¥ ë“€ì–¼ ê²Œì„ ê°€ì´ë“œ' },
                { path: 'game-types/multi-game-guide.md', title: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ë©€í‹° ê²Œì„ ê°€ì´ë“œ' }
            ],
            'Troubleshooting': [
                { path: 'troubleshooting/common-issues.md', title: 'âš ï¸ ì¼ë°˜ì ì¸ ë¬¸ì œ' },
                { path: 'troubleshooting/network-issues.md', title: 'ğŸŒ ë„¤íŠ¸ì›Œí¬ ë¬¸ì œ' },
                { path: 'troubleshooting/sensor-problems.md', title: 'ğŸ“± ì„¼ì„œ ë¬¸ì œ' }
            ],
            'Advanced': [
                { path: 'advanced/plugin-system.md', title: 'ğŸ”Œ í”ŒëŸ¬ê·¸ì¸ ì‹œìŠ¤í…œ' },
                { path: 'advanced/custom-game-engine.md', title: 'âš™ï¸ ì»¤ìŠ¤í…€ ê²Œì„ ì—”ì§„' },
                { path: 'advanced/3d-graphics.md', title: 'ğŸ¨ 3D ê·¸ë˜í”½ìŠ¤' },
                { path: 'advanced/audio-system.md', title: 'ğŸ”Š ì˜¤ë””ì˜¤ ì‹œìŠ¤í…œ' },
                { path: 'advanced/pwa-implementation.md', title: 'ğŸ“² PWA êµ¬í˜„' }
            ],
            'Examples': [
                { path: 'examples/basic-games/index.md', title: 'ğŸ® ê¸°ë³¸ ê²Œì„ ì˜ˆì œ' },
                { path: 'examples/basic-games/dual-games.md', title: 'ğŸ‘¥ ë“€ì–¼ ê²Œì„ ì˜ˆì œ' },
                { path: 'examples/basic-games/dual-games-part2.md', title: 'ğŸ‘¥ ë“€ì–¼ ê²Œì„ ì˜ˆì œ Part 2' },
                { path: 'examples/basic-games/multi-games.md', title: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ ë©€í‹° ê²Œì„ ì˜ˆì œ' },
                { path: 'examples/sensor-usage/index.md', title: 'ğŸ“± ì„¼ì„œ ì‚¬ìš© ì˜ˆì œ' },
                { path: 'examples/ui-components/index.md', title: 'ğŸ¨ UI ì»´í¬ë„ŒíŠ¸ ì˜ˆì œ' },
                { path: 'examples/optimization/index.md', title: 'âš¡ ìµœì í™” ì˜ˆì œ' },
                { path: 'examples/troubleshooting/index.md', title: 'ğŸ”§ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì˜ˆì œ' }
            ],
            'Project Plans': [
                { path: 'ê³„íšì„œ/revised_presentation_script.md', title: 'ğŸ“ ë°œí‘œ ìŠ¤í¬ë¦½íŠ¸' },
                { path: 'ê³„íšì„œ/í”„ë¡œì íŠ¸_ë¬¸ì„œ_ê²€í† _ë°_ê°œì„ _ì œì•ˆ.md', title: 'ğŸ“‹ í”„ë¡œì íŠ¸ ê°œì„  ì œì•ˆ' }
            ]
        };

        this.setupRoutes();
        console.log('ğŸ‘¨â€ğŸ’» DeveloperRoutes ì´ˆê¸°í™” ì™„ë£Œ');
    }
}
```

**ì£¼ìš” íŠ¹ì§•:**
- **ë¬¸ì„œ íŠ¸ë¦¬ êµ¬ì¡°**: 8ê°œ ì¹´í…Œê³ ë¦¬, 35ê°œ ë¬¸ì„œ ì²´ê³„ì  ë¶„ë¥˜
- **ì˜ì¡´ì„± ì£¼ì…**: gameScanner, aiServiceGetterë¥¼ ìƒì„±ìë¡œ ì£¼ì…
- **ë™ì  ë¼ìš°íŒ…**: 1-3ë‹¨ê³„ ê²½ë¡œ ëª¨ë‘ ì§€ì› (docs/:filename, docs/:category/:filename, docs/:category/:subcategory/:filename)

#### 7.2.2 ë¼ìš°íŠ¸ ì„¤ì •

```javascript
/**
 * ë¼ìš°íŠ¸ ì„¤ì •
 */
setupRoutes() {
    // === í˜ì´ì§€ ë¼ìš°íŠ¸ ===

    // ë©”ì¸ ê°œë°œì ì„¼í„° í˜ì´ì§€
    this.router.get('/', (req, res) => {
        this.getDeveloperCenter(req, res);
    });

    // === ë¬¸ì„œ ë·°ì–´ ë¼ìš°íŠ¸ ===

    // 3ë‹¨ê³„ ê²½ë¡œ (examples/basic-games/index.md)
    this.router.get('/docs/:category/:subcategory/:filename', async (req, res) => {
        await this.viewDocument(req, res);
    });

    // 2ë‹¨ê³„ ê²½ë¡œ (game-development/01-architecture-design.md)
    this.router.get('/docs/:category/:filename', async (req, res) => {
        await this.viewDocument(req, res);
    });

    // 1ë‹¨ê³„ ê²½ë¡œ (README.md)
    this.router.get('/docs/:filename', async (req, res) => {
        await this.viewDocument(req, res);
    });

    // === AI ì±—ë´‡ API ===

    // AI ë§¤ë‰´ì–¼ ì±—ë´‡ (RAG ê¸°ë°˜)
    this.router.post('/api/chat', async (req, res) => {
        await this.handleChat(req, res);
    });

    // === ê²Œì„ ìƒì„± API ===

    // ëŒ€í™”í˜• ê²Œì„ ìƒì„± - ì„¸ì…˜ ì‹œì‘
    this.router.post('/api/start-game-session', async (req, res) => {
        await this.handleStartGameSession(req, res);
    });

    // ëŒ€í™”í˜• ê²Œì„ ìƒì„± - ëŒ€í™” ë©”ì‹œì§€ ì²˜ë¦¬
    this.router.post('/api/game-chat', async (req, res) => {
        await this.handleGameChat(req, res);
    });

    // ëŒ€í™”í˜• ê²Œì„ ìƒì„± - ìµœì¢… ê²Œì„ ìƒì„±
    this.router.post('/api/finalize-game', async (req, res) => {
        await this.handleFinalizeGame(req, res);
    });

    // ê²Œì„ ë‹¤ìš´ë¡œë“œ (ZIP íŒŒì¼)
    this.router.get('/api/download-game/:gameId', async (req, res) => {
        await this.handleDownloadGame(req, res);
    });

    // ê²Œì„ ë¯¸ë¦¬ë³´ê¸°
    this.router.get('/api/preview-game/:gameId', async (req, res) => {
        await this.handlePreviewGame(req, res);
    });
}
```

**ë¼ìš°íŠ¸ êµ¬ì¡°:**

| íƒ€ì… | ê²½ë¡œ | ì„¤ëª… |
|------|------|------|
| **í˜ì´ì§€** | `GET /developer` | ë©”ì¸ Developer Center í˜ì´ì§€ |
| **ë¬¸ì„œ** | `GET /developer/docs/:filename` | ë£¨íŠ¸ ë¬¸ì„œ (README.md) |
| **ë¬¸ì„œ** | `GET /developer/docs/:category/:filename` | 2ë‹¨ê³„ ë¬¸ì„œ (game-development/01-...) |
| **ë¬¸ì„œ** | `GET /developer/docs/:category/:subcategory/:filename` | 3ë‹¨ê³„ ë¬¸ì„œ (examples/basic-games/...) |
| **ì±—ë´‡** | `POST /developer/api/chat` | AI ë§¤ë‰´ì–¼ ì±—ë´‡ ëŒ€í™” |
| **ê²Œì„ ìƒì„±** | `POST /developer/api/start-game-session` | ê²Œì„ ìƒì„± ì„¸ì…˜ ì‹œì‘ |
| **ê²Œì„ ìƒì„±** | `POST /developer/api/game-chat` | ê²Œì„ ìƒì„± ëŒ€í™” ì²˜ë¦¬ |
| **ê²Œì„ ìƒì„±** | `POST /developer/api/finalize-game` | ìµœì¢… ê²Œì„ ìƒì„± ì‹¤í–‰ |
| **ê²Œì„** | `GET /developer/api/download-game/:gameId` | ê²Œì„ ZIP ë‹¤ìš´ë¡œë“œ |
| **ê²Œì„** | `GET /developer/api/preview-game/:gameId` | ê²Œì„ ë¯¸ë¦¬ë³´ê¸° |

### 7.3 ë¬¸ì„œ ë·°ì–´ ì‹œìŠ¤í…œ

#### 7.3.1 ë§ˆí¬ë‹¤ìš´ ë Œë”ë§

```javascript
/**
 * ë¬¸ì„œ ë·°ì–´ í•¸ë“¤ëŸ¬
 */
async viewDocument(req, res) {
    try {
        const { category, subcategory, filename } = req.params;

        // ê²½ë¡œ êµ¬ì„± (1-3ë‹¨ê³„)
        let docPath;
        if (subcategory) {
            // 3ë‹¨ê³„: examples/basic-games/index.md
            docPath = path.join(this.docsBasePath, category, subcategory, filename);
        } else if (category) {
            // 2ë‹¨ê³„: game-development/01-architecture-design.md
            docPath = path.join(this.docsBasePath, category, filename);
        } else {
            // 1ë‹¨ê³„: README.md
            docPath = path.join(this.docsBasePath, filename);
        }

        // íŒŒì¼ ì¡´ì¬ í™•ì¸
        const fileExists = await fs.access(docPath).then(() => true).catch(() => false);
        if (!fileExists) {
            return res.status(404).send(`<h1>404 - ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h1><p>${docPath}</p>`);
        }

        // ë§ˆí¬ë‹¤ìš´ ì½ê¸°
        const markdown = await fs.readFile(docPath, 'utf-8');

        // HTMLë¡œ ë³€í™˜ (MarkdownRenderer ì‚¬ìš©)
        const html = this.markdownRenderer.render(markdown);

        // ë¬¸ì„œ ë·°ì–´ í˜ì´ì§€ ìƒì„±
        const documentPage = this.generateDocumentViewerHTML(html, filename);

        res.send(documentPage);

    } catch (error) {
        console.error('âŒ ë¬¸ì„œ ë·°ì–´ ì˜¤ë¥˜:', error);
        res.status(500).send(`<h1>ë¬¸ì„œ ë¡œë“œ ì˜¤ë¥˜</h1><pre>${error.message}</pre>`);
    }
}
```

**MarkdownRenderer ê¸°ëŠ¥:**
- **Marked.js** ê¸°ë°˜ MD â†’ HTML ë³€í™˜
- **Highlight.js** ì½”ë“œ í•˜ì´ë¼ì´íŒ…
- **Mermaid.js** ë‹¤ì´ì–´ê·¸ë¨ ë Œë”ë§
- **ëª©ì°¨ ìë™ ìƒì„±** (H2, H3 íƒœê·¸ ê¸°ë°˜)
- **ìƒëŒ€ ë§í¬ ìë™ ë³€í™˜** (MD íŒŒì¼ â†’ /developer/docs/... ê²½ë¡œ)

#### 7.3.2 ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜ ìƒì„±

```javascript
/**
 * ì‚¬ì´ë“œë°” HTML ìƒì„±
 */
generateSidebarHTML() {
    let html = '';

    for (const [category, docs] of Object.entries(this.documentTree)) {
        html += `
            <div class="doc-category">
                <div class="category-title">${category}</div>
                <ul class="doc-list">`;

        docs.forEach(doc => {
            // ê²½ë¡œ ë³€í™˜ (íŒŒì¼ ê²½ë¡œ â†’ URL ê²½ë¡œ)
            const urlPath = `/developer/docs/${doc.path}`;

            html += `
                    <li class="doc-item">
                        <a href="${urlPath}" class="doc-link">
                            ${doc.title}
                        </a>
                    </li>`;
        });

        html += `
                </ul>
            </div>`;
    }

    return html;
}
```

**ì‚¬ì´ë“œë°” êµ¬ì¡°:**
- **8ê°œ ì¹´í…Œê³ ë¦¬**: Root Docs, Game Development, API & SDK, Sensor Processing, Game Types, Troubleshooting, Advanced, Examples, Project Plans
- **35ê°œ ë¬¸ì„œ ë§í¬**: ê° ë¬¸ì„œë¡œ ë°”ë¡œ ì´ë™ ê°€ëŠ¥
- **í˜„ì¬ í˜ì´ì§€ í•˜ì´ë¼ì´íŠ¸**: í™œì„± ë¬¸ì„œ ê°•ì¡° í‘œì‹œ
- **ë°˜ì‘í˜• ë””ìì¸**: ëª¨ë°”ì¼ì—ì„œ ì ‘ê¸°/í¼ì¹˜ê¸° ê°€ëŠ¥

### 7.4 AI ë§¤ë‰´ì–¼ ì±—ë´‡ (RAG ê¸°ë°˜)

#### 7.4.1 ì±—ë´‡ í•¸ë“¤ëŸ¬

```javascript
/**
 * AI ì±—ë´‡ ëŒ€í™” ì²˜ë¦¬
 */
async handleChat(req, res) {
    try {
        const { message, conversationHistory = [] } = req.body;

        if (!message) {
            return res.status(400).json({ error: 'ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”.' });
        }

        console.log(`ğŸ’¬ ì±—ë´‡ ì§ˆë¬¸: ${message}`);

        // AI ì„œë¹„ìŠ¤ ê°€ì ¸ì˜¤ê¸° (Lazy Loading)
        const aiChatbot = this.aiServiceGetter('chatbot');

        if (!aiChatbot) {
            return res.status(503).json({
                error: 'AI ì±—ë´‡ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„œë²„ ë¡œê·¸ë¥¼ í™•ì¸í•˜ì„¸ìš”.'
            });
        }

        // RAG ê¸°ë°˜ ë‹µë³€ ìƒì„±
        const response = await aiChatbot.chat(message, conversationHistory);

        console.log(`âœ… ì±—ë´‡ ì‘ë‹µ ìƒì„± ì™„ë£Œ`);

        res.json({
            success: true,
            response: response.answer,
            sources: response.sources || []  // ê²€ìƒ‰ëœ ë¬¸ì„œ ì¶œì²˜
        });

    } catch (error) {
        console.error('âŒ ì±—ë´‡ ì˜¤ë¥˜:', error);
        res.status(500).json({
            error: 'ì±—ë´‡ ì‘ë‹µ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
            details: error.message
        });
    }
}
```

**ì±—ë´‡ í”Œë¡œìš°:**
1. ì‚¬ìš©ì ë©”ì‹œì§€ ìˆ˜ì‹ 
2. AIManualChatbot ì„œë¹„ìŠ¤ ê°€ì ¸ì˜¤ê¸° (DI)
3. RAG ì‹œìŠ¤í…œìœ¼ë¡œ ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ (Supabase Vector Store)
4. Claude AIë¡œ ë‹µë³€ ìƒì„± (ê²€ìƒ‰ëœ ë¬¸ì„œ ì»¨í…ìŠ¤íŠ¸ í¬í•¨)
5. ë‹µë³€ + ì¶œì²˜ ë°˜í™˜

#### 7.4.2 í”„ë¡ íŠ¸ì—”ë“œ ì±—ë´‡ UI

```javascript
// AI ì±—ë´‡ ë©”ì‹œì§€ ì „ì†¡
async function sendChatMessage() {
    const userMessage = document.getElementById('chat-input').value.trim();
    if (!userMessage) return;

    // ì‚¬ìš©ì ë©”ì‹œì§€ í‘œì‹œ
    appendChatMessage('user', userMessage);
    document.getElementById('chat-input').value = '';

    // "AIê°€ ì…ë ¥ ì¤‘..." í‘œì‹œ
    const thinkingMessage = appendChatMessage('assistant', 'ë‹µë³€ì„ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...');

    try {
        const response = await fetch('/developer/api/chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                message: userMessage,
                conversationHistory: conversationHistory
            })
        });

        const data = await response.json();

        // "ì…ë ¥ ì¤‘..." ì œê±°
        thinkingMessage.remove();

        if (data.success) {
            // AI ì‘ë‹µ í‘œì‹œ
            appendChatMessage('assistant', data.response);

            // ì¶œì²˜ í‘œì‹œ (ê²€ìƒ‰ëœ ë¬¸ì„œ)
            if (data.sources && data.sources.length > 0) {
                const sourcesHtml = data.sources.map(source =>
                    `<a href="${source.url}" target="_blank">${source.title}</a>`
                ).join(', ');
                appendChatMessage('system', `ğŸ“š ì°¸ê³ : ${sourcesHtml}`);
            }

            // ëŒ€í™” ì´ë ¥ ì €ì¥
            conversationHistory.push(
                { role: 'user', content: userMessage },
                { role: 'assistant', content: data.response }
            );
        } else {
            appendChatMessage('error', `ì˜¤ë¥˜: ${data.error}`);
        }

    } catch (error) {
        console.error('ì±—ë´‡ ì˜¤ë¥˜:', error);
        thinkingMessage.remove();
        appendChatMessage('error', 'ì±—ë´‡ ì—°ê²° ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
    }
}
```

**ì±—ë´‡ UI íŠ¹ì§•:**
- **ì‹¤ì‹œê°„ ëŒ€í™”**: ë©”ì‹œì§€ ì…ë ¥ ì¦‰ì‹œ ì‘ë‹µ
- **ëŒ€í™” ì´ë ¥ ìœ ì§€**: ì´ì „ ëŒ€í™” ì»¨í…ìŠ¤íŠ¸ í¬í•¨
- **ì¶œì²˜ í‘œì‹œ**: RAGë¡œ ê²€ìƒ‰ëœ ë¬¸ì„œ ë§í¬ ì œê³µ
- **ë§ˆí¬ë‹¤ìš´ ë Œë”ë§**: ì½”ë“œ ë¸”ë¡, ë¦¬ìŠ¤íŠ¸ ë“± í¬ë§·íŒ… ì§€ì›

### 7.5 ëŒ€í™”í˜• ê²Œì„ ìƒì„± API

#### 7.5.1 ì„¸ì…˜ ì‹œì‘ API

```javascript
/**
 * ê²Œì„ ìƒì„± ì„¸ì…˜ ì‹œì‘
 */
async handleStartGameSession(req, res) {
    try {
        const sessionId = `session_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;

        console.log(`ğŸ® ê²Œì„ ìƒì„± ì„¸ì…˜ ì‹œì‘: ${sessionId}`);

        // InteractiveGameGenerator ì„œë¹„ìŠ¤ ê°€ì ¸ì˜¤ê¸°
        const gameGenerator = this.aiServiceGetter('gameGenerator');

        if (!gameGenerator) {
            return res.status(503).json({
                error: 'AI ê²Œì„ ìƒì„±ê¸°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
            });
        }

        // ìƒˆë¡œìš´ ëŒ€í™” ì„¸ì…˜ ì‹œì‘
        const result = await gameGenerator.startNewSession(sessionId);

        console.log(`âœ… ì„¸ì…˜ ìƒì„± ì™„ë£Œ: ${sessionId}`);

        res.json({
            success: true,
            sessionId: sessionId,
            message: result.message,
            stage: result.stage,  // 'initial'
            progress: result.progress  // 0%
        });

    } catch (error) {
        console.error('âŒ ì„¸ì…˜ ì‹œì‘ ì˜¤ë¥˜:', error);
        res.status(500).json({
            error: 'ê²Œì„ ìƒì„± ì„¸ì…˜ì„ ì‹œì‘í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.',
            details: error.message
        });
    }
}
```

#### 7.5.2 ëŒ€í™” ë©”ì‹œì§€ ì²˜ë¦¬ API

```javascript
/**
 * ê²Œì„ ìƒì„± ëŒ€í™” ë©”ì‹œì§€ ì²˜ë¦¬
 */
async handleGameChat(req, res) {
    try {
        const { sessionId, message } = req.body;

        if (!sessionId || !message) {
            return res.status(400).json({
                error: 'ì„¸ì…˜ IDì™€ ë©”ì‹œì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤.'
            });
        }

        console.log(`ğŸ’¬ ê²Œì„ ìƒì„± ëŒ€í™”: ${sessionId} - ${message}`);

        const gameGenerator = this.aiServiceGetter('gameGenerator');

        if (!gameGenerator) {
            return res.status(503).json({
                error: 'AI ê²Œì„ ìƒì„±ê¸°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
            });
        }

        // ëŒ€í™” ì²˜ë¦¬ (ë‹¨ê³„ë³„ ìš”êµ¬ì‚¬í•­ ìˆ˜ì§‘)
        const result = await gameGenerator.processMessage(sessionId, message);

        console.log(`âœ… ëŒ€í™” ì²˜ë¦¬ ì™„ë£Œ: stage=${result.stage}, progress=${result.progress}%`);

        res.json({
            success: true,
            message: result.message,
            stage: result.stage,  // initial/details/mechanics/confirmation
            progress: result.progress,  // 0-100%
            readyForGeneration: result.readyForGeneration || false,
            requirements: result.requirements || {}
        });

    } catch (error) {
        console.error('âŒ ëŒ€í™” ì²˜ë¦¬ ì˜¤ë¥˜:', error);
        res.status(500).json({
            error: 'ëŒ€í™” ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
            details: error.message
        });
    }
}
```

#### 7.5.3 ìµœì¢… ê²Œì„ ìƒì„± API

```javascript
/**
 * ìµœì¢… ê²Œì„ ìƒì„± ì‹¤í–‰
 */
async handleFinalizeGame(req, res) {
    try {
        const { sessionId } = req.body;

        if (!sessionId) {
            return res.status(400).json({
                error: 'ì„¸ì…˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤.'
            });
        }

        console.log(`ğŸš€ ê²Œì„ ìƒì„± ì‹œì‘: ${sessionId}`);

        const gameGenerator = this.aiServiceGetter('gameGenerator');

        if (!gameGenerator) {
            return res.status(503).json({
                error: 'AI ê²Œì„ ìƒì„±ê¸°ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
            });
        }

        // ìµœì¢… ê²Œì„ ìƒì„± (5ë‹¨ê³„ ì§„í–‰ë¥  íŠ¸ë˜í‚¹)
        // Socket.IOë¥¼ í†µí•´ ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© ì „ì†¡
        const result = await gameGenerator.generateFinalGame(sessionId);

        console.log(`âœ… ê²Œì„ ìƒì„± ì™„ë£Œ: ${result.gameId}`);

        res.json({
            success: true,
            gameId: result.gameId,
            gamePath: result.gamePath,
            playUrl: result.playUrl,
            validationScore: result.validationScore,
            message: 'ê²Œì„ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤!'
        });

    } catch (error) {
        console.error('âŒ ê²Œì„ ìƒì„± ì˜¤ë¥˜:', error);
        res.status(500).json({
            error: 'ê²Œì„ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
            details: error.message
        });
    }
}
```

#### 7.5.4 ê²Œì„ ë‹¤ìš´ë¡œë“œ API

```javascript
/**
 * ê²Œì„ ZIP ë‹¤ìš´ë¡œë“œ
 */
async handleDownloadGame(req, res) {
    try {
        const { gameId } = req.params;

        console.log(`ğŸ“¦ ê²Œì„ ë‹¤ìš´ë¡œë“œ ìš”ì²­: ${gameId}`);

        const gamePath = path.join(__dirname, '../../public/games', gameId);

        // ê²Œì„ í´ë” ì¡´ì¬ í™•ì¸
        const folderExists = await fs.access(gamePath).then(() => true).catch(() => false);
        if (!folderExists) {
            return res.status(404).json({
                error: 'ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.'
            });
        }

        // ZIP íŒŒì¼ ìƒì„±
        const zipPath = path.join(__dirname, '../../temp', `${gameId}.zip`);

        // temp í´ë” ìƒì„± (ì—†ìœ¼ë©´)
        await fs.mkdir(path.dirname(zipPath), { recursive: true });

        // archiverë¡œ ZIP ìƒì„±
        const output = fsSync.createWriteStream(zipPath);
        const archive = archiver('zip', { zlib: { level: 9 } });

        output.on('close', () => {
            console.log(`âœ… ZIP ìƒì„± ì™„ë£Œ: ${archive.pointer()} bytes`);

            // ZIP íŒŒì¼ ë‹¤ìš´ë¡œë“œ
            res.download(zipPath, `${gameId}.zip`, (err) => {
                if (err) {
                    console.error('ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', err);
                }

                // ë‹¤ìš´ë¡œë“œ í›„ ì„ì‹œ íŒŒì¼ ì‚­ì œ
                fs.unlink(zipPath).catch(console.error);
            });
        });

        archive.on('error', (err) => {
            throw err;
        });

        archive.pipe(output);

        // ê²Œì„ í´ë” ì „ì²´ ì••ì¶•
        archive.directory(gamePath, gameId);

        archive.finalize();

    } catch (error) {
        console.error('âŒ ë‹¤ìš´ë¡œë“œ ì˜¤ë¥˜:', error);
        res.status(500).json({
            error: 'ê²Œì„ ë‹¤ìš´ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.',
            details: error.message
        });
    }
}
```

**ZIP íŒŒì¼ êµ¬ì¡°:**
```
{gameId}.zip
â””â”€â”€ {gameId}/
    â”œâ”€â”€ index.html       # ê²Œì„ HTML íŒŒì¼
    â””â”€â”€ game.json        # ê²Œì„ ë©”íƒ€ë°ì´í„°
```

### 7.6 API ì—”ë“œí¬ì¸íŠ¸ ì™„ì „ ëª©ë¡

#### 7.6.1 í˜ì´ì§€ ë¼ìš°íŠ¸

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì„¤ëª… | ì‘ë‹µ |
|------------|--------|------|------|
| `/developer` | GET | Developer Center ë©”ì¸ í˜ì´ì§€ | HTML |
| `/developer/docs/:filename` | GET | ë£¨íŠ¸ ë¬¸ì„œ ë·°ì–´ | HTML |
| `/developer/docs/:category/:filename` | GET | 2ë‹¨ê³„ ë¬¸ì„œ ë·°ì–´ | HTML |
| `/developer/docs/:category/:subcategory/:filename` | GET | 3ë‹¨ê³„ ë¬¸ì„œ ë·°ì–´ | HTML |

#### 7.6.2 AI ì±—ë´‡ API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ìš”ì²­ Body | ì‘ë‹µ |
|------------|--------|-----------|------|
| `/developer/api/chat` | POST | `{message, conversationHistory}` | `{success, response, sources}` |

**ìš”ì²­ ì˜ˆì‹œ:**
```javascript
{
  "message": "SessionSDKë¥¼ ì–´ë–»ê²Œ ì´ˆê¸°í™”í•˜ë‚˜ìš”?",
  "conversationHistory": [
    {"role": "user", "content": "ê²Œì„ ê°œë°œì„ ì‹œì‘í•˜ê³  ì‹¶ì–´ìš”"},
    {"role": "assistant", "content": "..."}
  ]
}
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```javascript
{
  "success": true,
  "response": "SessionSDK ì´ˆê¸°í™” ë°©ë²•:\n\n```javascript\nconst sdk = new SessionSDK({\n  gameId: 'my-game',\n  gameType: 'solo'\n});\n```",
  "sources": [
    {
      "title": "SessionSDK API ë ˆí¼ëŸ°ìŠ¤",
      "url": "/developer/docs/api-sdk/sessionsdk-reference.md"
    }
  ]
}
```

#### 7.6.3 ê²Œì„ ìƒì„± API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ìš”ì²­ Body | ì‘ë‹µ |
|------------|--------|-----------|------|
| `/developer/api/start-game-session` | POST | `{}` | `{success, sessionId, message, stage, progress}` |
| `/developer/api/game-chat` | POST | `{sessionId, message}` | `{success, message, stage, progress, readyForGeneration}` |
| `/developer/api/finalize-game` | POST | `{sessionId}` | `{success, gameId, playUrl, validationScore}` |
| `/developer/api/download-game/:gameId` | GET | - | ZIP íŒŒì¼ |
| `/developer/api/preview-game/:gameId` | GET | - | `{success, gameUrl, metadata}` |

**ê²Œì„ ìƒì„± í”Œë¡œìš°:**
```
1. POST /api/start-game-session
   â†’ {sessionId: "session_123", stage: "initial"}

2. POST /api/game-chat {sessionId, message: "ê¸°ìš¸ê¸° ê²Œì„"}
   â†’ {stage: "details", progress: 25%}

3. POST /api/game-chat {sessionId, message: "ê³„ì†"}
   â†’ {stage: "mechanics", progress: 50%}

4. POST /api/game-chat {sessionId, message: "ê³„ì†"}
   â†’ {stage: "confirmation", progress: 75%, readyForGeneration: false}

5. POST /api/game-chat {sessionId, message: "í™•ì¸"}
   â†’ {stage: "confirmation", progress: 100%, readyForGeneration: true}

6. POST /api/finalize-game {sessionId}
   â†’ {gameId: "tilt-game-v1", playUrl: "/games/tilt-game-v1"}

7. GET /api/download-game/tilt-game-v1
   â†’ tilt-game-v1.zip íŒŒì¼ ë‹¤ìš´ë¡œë“œ
```

### 7.7 ì‹¤ì‹œê°„ ì§„í–‰ë¥  íŠ¸ë˜í‚¹ (WebSocket)

#### 7.7.1 Socket.IO ì´ë²¤íŠ¸

**ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸:**

| ì´ë²¤íŠ¸ | í˜ì´ë¡œë“œ | ì„¤ëª… |
|--------|---------|------|
| `game-generation-progress` | `{sessionId, step, percentage, message}` | ê²Œì„ ìƒì„± ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ |

**ì§„í–‰ë¥  ì´ë²¤íŠ¸ ì˜ˆì‹œ:**
```javascript
// Step 1: ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„ (10%)
socket.emit('game-generation-progress', {
    sessionId: 'session_123',
    step: 1,
    percentage: 10,
    message: 'ğŸ¯ ê²Œì„ ì•„ì´ë””ì–´ ë¶„ì„ ì¤‘...'
});

// Step 2: ë¬¸ì„œ ê²€ìƒ‰ (20%)
socket.emit('game-generation-progress', {
    sessionId: 'session_123',
    step: 2,
    percentage: 20,
    message: 'ğŸ” ê´€ë ¨ ë¬¸ì„œ ê²€ìƒ‰ ì¤‘... (ë²¡í„° DB)'
});

// Step 3: ì½”ë“œ ìƒì„± (50%)
socket.emit('game-generation-progress', {
    sessionId: 'session_123',
    step: 3,
    percentage: 50,
    message: 'ğŸ¤– Claude AIë¡œ ê²Œì„ ì½”ë“œ ìƒì„± ì¤‘...'
});

// Step 4: ê²€ì¦ (80%)
socket.emit('game-generation-progress', {
    sessionId: 'session_123',
    step: 4,
    percentage: 80,
    message: 'âœ… ê²Œì„ ì½”ë“œ ê²€ì¦ ì¤‘...'
});

// Step 5: íŒŒì¼ ì €ì¥ (100%)
socket.emit('game-generation-progress', {
    sessionId: 'session_123',
    step: 5,
    percentage: 100,
    message: 'âœ… ê²Œì„ ìƒì„± ì™„ë£Œ!'
});
```

#### 7.7.2 í”„ë¡ íŠ¸ì—”ë“œ ì§„í–‰ë¥  UI

```javascript
// Socket.IO ì—°ê²°
const socket = io();

// ì§„í–‰ë¥  ì—…ë°ì´íŠ¸ ë¦¬ìŠ¤ë„ˆ
socket.on('game-generation-progress', (data) => {
    console.log(`ì§„í–‰ë¥ : ${data.percentage}% - ${data.message}`);

    // ì§„í–‰ë¥  ë°” ì—…ë°ì´íŠ¸
    const progressBar = document.getElementById('progress-bar');
    progressBar.style.width = data.percentage + '%';
    progressBar.textContent = data.percentage + '%';

    // ë‹¨ê³„ë³„ ì•„ì´ì½˜ ì—…ë°ì´íŠ¸
    updateStepIcon(data.step, data.percentage);

    // ë©”ì‹œì§€ í‘œì‹œ
    document.getElementById('progress-message').textContent = data.message;

    // ì™„ë£Œ ì‹œ ì²˜ë¦¬
    if (data.percentage === 100) {
        setTimeout(() => {
            hideProgressModal();
            showSuccessMessage();
        }, 1000);
    }
});

function updateStepIcon(step, percentage) {
    const icons = ['â³', 'â³', 'â³', 'â³', 'â³'];

    for (let i = 0; i < step; i++) {
        icons[i] = 'âœ…';  // ì™„ë£Œëœ ë‹¨ê³„
    }

    if (percentage === 100) {
        icons[4] = 'âœ…';  // ë§ˆì§€ë§‰ ë‹¨ê³„ ì™„ë£Œ
    }

    // UI ì—…ë°ì´íŠ¸
    document.querySelectorAll('.step-icon').forEach((icon, idx) => {
        icon.textContent = icons[idx];
    });
}
```

**ì§„í–‰ë¥  UI êµ¬ì¡°:**
```html
<div class="progress-modal">
    <h2>ğŸ® ê²Œì„ ìƒì„± ì¤‘...</h2>

    <!-- ì§„í–‰ë¥  ë°” -->
    <div class="progress-container">
        <div id="progress-bar" class="progress-bar">0%</div>
    </div>

    <!-- ë‹¨ê³„ë³„ í‘œì‹œ -->
    <div class="steps">
        <div class="step">
            <span class="step-icon">â³</span>
            <span class="step-label">ì•„ì´ë””ì–´ ë¶„ì„</span>
        </div>
        <div class="step">
            <span class="step-icon">â³</span>
            <span class="step-label">ë¬¸ì„œ ê²€ìƒ‰</span>
        </div>
        <div class="step">
            <span class="step-icon">â³</span>
            <span class="step-label">ì½”ë“œ ìƒì„±</span>
        </div>
        <div class="step">
            <span class="step-icon">â³</span>
            <span class="step-label">ê²€ì¦</span>
        </div>
        <div class="step">
            <span class="step-icon">â³</span>
            <span class="step-label">íŒŒì¼ ì €ì¥</span>
        </div>
    </div>

    <!-- í˜„ì¬ ë©”ì‹œì§€ -->
    <p id="progress-message" class="progress-message">ê²Œì„ ìƒì„±ì„ ì¤€ë¹„í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
</div>
```

### 7.8 ë³´ì•ˆ ë° ì—ëŸ¬ ì²˜ë¦¬

#### 7.8.1 í˜„ì¬ ë³´ì•ˆ ìƒíƒœ

**ì˜¤í”ˆ ì•¡ì„¸ìŠ¤ ì •ì±…:**
- âœ… ëª¨ë“  ì—”ë“œí¬ì¸íŠ¸ ì¸ì¦ ì—†ì´ ì ‘ê·¼ ê°€ëŠ¥
- âœ… ê°œë°œì ë„êµ¬ë¡œ ì„¤ê³„ë¨ (í”„ë¡œë•ì…˜ í™˜ê²½ ì•„ë‹˜)
- âš ï¸ Rate Limiting ì—†ìŒ
- âš ï¸ API í‚¤ ê²€ì¦ ì—†ìŒ

**í–¥í›„ ë³´ì•ˆ ê°•í™” ë°©ì•ˆ:**
1. **JWT í† í° ì¸ì¦**: ê°œë°œì ê³„ì • ì‹œìŠ¤í…œ êµ¬ì¶•
2. **Rate Limiting**: Express Rate Limit ë¯¸ë“¤ì›¨ì–´ ì¶”ê°€
3. **CORS ì„¤ì •**: í—ˆìš©ëœ ë„ë©”ì¸ë§Œ ì ‘ê·¼
4. **ì…ë ¥ ê²€ì¦**: Joi ìŠ¤í‚¤ë§ˆ ê²€ì¦ ì¶”ê°€

#### 7.8.2 ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´

```javascript
/**
 * í†µì¼ëœ ì—ëŸ¬ ì‘ë‹µ í¬ë§·
 */
function sendErrorResponse(res, statusCode, message, details = null) {
    const errorResponse = {
        error: message,
        timestamp: new Date().toISOString()
    };

    if (details) {
        errorResponse.details = details;
    }

    console.error(`âŒ [${statusCode}] ${message}`, details || '');

    res.status(statusCode).json(errorResponse);
}

// ì‚¬ìš© ì˜ˆì‹œ
try {
    // ... ì‘ì—… ìˆ˜í–‰
} catch (error) {
    if (error.name === 'ValidationError') {
        sendErrorResponse(res, 400, 'ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤.', error.message);
    } else if (error.name === 'ServiceUnavailable') {
        sendErrorResponse(res, 503, 'AI ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', error.message);
    } else {
        sendErrorResponse(res, 500, 'ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', error.message);
    }
}
```

**ì—ëŸ¬ ì½”ë“œ ì²´ê³„:**

| ì½”ë“œ | ìƒí™© | ë©”ì‹œì§€ ì˜ˆì‹œ |
|------|------|-------------|
| 400 | ì˜ëª»ëœ ìš”ì²­ | "ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”.", "ì„¸ì…˜ IDê°€ í•„ìš”í•©ë‹ˆë‹¤." |
| 404 | ë¦¬ì†ŒìŠ¤ ì—†ìŒ | "ë¬¸ì„œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.", "ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤." |
| 500 | ì„œë²„ ì˜¤ë¥˜ | "ì±—ë´‡ ì‘ë‹µ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤." |
| 503 | ì„œë¹„ìŠ¤ ë¶ˆê°€ | "AI ì±—ë´‡ ì„œë¹„ìŠ¤ë¥¼ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤." |

### 7.9 Developer Center í†µê³„

#### 7.9.1 ì‹œìŠ¤í…œ ê·œëª¨

| í•­ëª© | ìˆ˜ëŸ‰ |
|------|------|
| ì´ ë¼ìš°íŠ¸ ìˆ˜ | 11ê°œ |
| ë¬¸ì„œ ì¹´í…Œê³ ë¦¬ | 8ê°œ |
| ì´ ë¬¸ì„œ ìˆ˜ | 35ê°œ |
| API ì—”ë“œí¬ì¸íŠ¸ | 7ê°œ |
| Socket.IO ì´ë²¤íŠ¸ | 1ê°œ |
| ì½”ë“œ ë¼ì¸ ìˆ˜ (developerRoutes.js) | 2,300ì¤„ |

#### 7.9.2 API ì‚¬ìš© í†µê³„ (ì˜ˆìƒ)

| API | í‰ê·  ì‘ë‹µ ì‹œê°„ | ì„±ê³µë¥  |
|-----|---------------|--------|
| `/api/chat` | 2-5ì´ˆ | 98% |
| `/api/start-game-session` | <100ms | 100% |
| `/api/game-chat` | 2-4ì´ˆ | 98% |
| `/api/finalize-game` | 30-60ì´ˆ | 95.7% |
| `/api/download-game/:gameId` | 1-2ì´ˆ | 99% |

**Part 7 ì™„ë£Œ! âœ…**

**ì´ë²ˆ íŒŒíŠ¸ì—ì„œ ë‹¤ë£¬ ë‚´ìš©:**
- âœ… Developer Center ì•„í‚¤í…ì²˜ ë° ë¼ìš°íŒ… ì‹œìŠ¤í…œ
- âœ… 35ê°œ ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œ ë·°ì–´ ë° ì‚¬ì´ë“œë°” ë„¤ë¹„ê²Œì´ì…˜
- âœ… AI ë§¤ë‰´ì–¼ ì±—ë´‡ API (RAG ê¸°ë°˜)
- âœ… ëŒ€í™”í˜• ê²Œì„ ìƒì„± API (4ë‹¨ê³„ í”„ë¡œì„¸ìŠ¤)
- âœ… ê²Œì„ ë‹¤ìš´ë¡œë“œ ë° ë¯¸ë¦¬ë³´ê¸° API
- âœ… ì‹¤ì‹œê°„ ì§„í–‰ë¥  íŠ¸ë˜í‚¹ (Socket.IO)
- âœ… ë³´ì•ˆ ì •ì±… ë° ì—ëŸ¬ ì²˜ë¦¬

**í†µê³„:**
- Part 7 ë¶„ëŸ‰: ~1,100 ì¤„
- ì´ ë‹¤ì´ì–´ê·¸ë¨: 1ê°œ (Developer Center ì•„í‚¤í…ì²˜)
- API ì—”ë“œí¬ì¸íŠ¸: 11ê°œ
- í˜„ì¬ ë¬¸ì„œ ì´í•©: ì•½ 7,280 ì¤„

**ë‹¤ìŒ:** Part 8 (API ë ˆí¼ëŸ°ìŠ¤ ì™„ì „íŒ)ë¡œ ê³„ì†...

---

## Part 8: API ë ˆí¼ëŸ°ìŠ¤ ì™„ì „íŒ

ì´ ì„¹ì…˜ì—ì„œëŠ” Sensor Game Hub v6.0ì˜ ëª¨ë“  APIë¥¼ ìƒì„¸í•˜ê²Œ ë¬¸ì„œí™”í•©ë‹ˆë‹¤. ìƒˆë¡œìš´ ê°œë°œìê°€ ì´ ë ˆí¼ëŸ°ìŠ¤ë§Œìœ¼ë¡œ ê²Œì„ì„ ê°œë°œí•˜ê³  ì‹œìŠ¤í…œì„ ì´í•´í•  ìˆ˜ ìˆë„ë¡ ì™„ì „í•œ ëª…ì„¸ë¥¼ ì œê³µí•©ë‹ˆë‹¤.

### ëª©ì°¨
- [8.1 SessionSDK í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬](#81-sessionsdk-í´ë¼ì´ì–¸íŠ¸-ë¼ì´ë¸ŒëŸ¬ë¦¬)
- [8.2 QRCodeGenerator ìœ í‹¸ë¦¬í‹°](#82-qrcodegenerator-ìœ í‹¸ë¦¬í‹°)
- [8.3 SensorCollector ìœ í‹¸ë¦¬í‹°](#83-sensorcollector-ìœ í‹¸ë¦¬í‹°)
- [8.4 Socket.IO ì´ë²¤íŠ¸ ë ˆí¼ëŸ°ìŠ¤](#84-socketio-ì´ë²¤íŠ¸-ë ˆí¼ëŸ°ìŠ¤)
- [8.5 HTTP REST API ë ˆí¼ëŸ°ìŠ¤](#85-http-rest-api-ë ˆí¼ëŸ°ìŠ¤)
- [8.6 ë°ì´í„° êµ¬ì¡° ë° íƒ€ì… ì •ì˜](#86-ë°ì´í„°-êµ¬ì¡°-ë°-íƒ€ì…-ì •ì˜)
- [8.7 ì—ëŸ¬ ì½”ë“œ ë° ì²˜ë¦¬](#87-ì—ëŸ¬-ì½”ë“œ-ë°-ì²˜ë¦¬)
- [8.8 ì‹¤ì „ ì˜ˆì œ ëª¨ìŒ](#88-ì‹¤ì „-ì˜ˆì œ-ëª¨ìŒ)

---

### 8.1 SessionSDK í´ë¼ì´ì–¸íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬

**ìœ„ì¹˜**: `public/js/SessionSDK.js:10-414`

SessionSDKëŠ” ê²Œì„ê³¼ ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ ëª¨ë‘ì—ì„œ ì‚¬ìš©í•˜ëŠ” í•µì‹¬ ë¼ì´ë¸ŒëŸ¬ë¦¬ì…ë‹ˆë‹¤. Socket.IO ì—°ê²°, ì„¸ì…˜ ê´€ë¦¬, ì„¼ì„œ ë°ì´í„° ì†¡ìˆ˜ì‹ ì„ ì¶”ìƒí™”í•˜ì—¬ ê°„ë‹¨í•œ APIë¡œ ì œê³µí•©ë‹ˆë‹¤.

#### 8.1.1 í´ë˜ìŠ¤ ì´ˆê¸°í™”

```javascript
const sdk = new SessionSDK(options)
```

**íŒŒë¼ë¯¸í„°:**

| ì´ë¦„ | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|------|--------|------|
| `options.serverUrl` | `string` | `window.location.origin` | Socket.IO ì„œë²„ URL |
| `options.gameId` | `string` | `'unknown-game'` | ê²Œì„ ê³ ìœ  ID |
| `options.gameType` | `string` | `'solo'` | ê²Œì„ íƒ€ì… (`'solo'`, `'dual'`, `'multi'`) |
| `options.autoReconnect` | `boolean` | `true` | ìë™ ì¬ì—°ê²° í™œì„±í™” |
| `options.reconnectInterval` | `number` | `3000` | ì¬ì—°ê²° ê°„ê²© (ë°€ë¦¬ì´ˆ) |
| `options.maxReconnectAttempts` | `number` | `5` | ìµœëŒ€ ì¬ì—°ê²° ì‹œë„ íšŸìˆ˜ |
| `options.debug` | `boolean` | `false` | ë””ë²„ê·¸ ë¡œê·¸ ì¶œë ¥ |

**ì˜ˆì œ:**

```javascript
// ì†”ë¡œ ê²Œì„ìš© SDK
const sdk = new SessionSDK({
    gameId: 'tilt-maze',
    gameType: 'solo',
    debug: true
});

// ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„ìš© SDK
const multiSdk = new SessionSDK({
    gameId: 'quick-draw',
    gameType: 'multi',
    maxReconnectAttempts: 10
});
```

**ë‚´ë¶€ ìƒíƒœ:**

SDKëŠ” ë‹¤ìŒ ìƒíƒœë¥¼ ë‚´ë¶€ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤:

```javascript
this.state = {
    connected: false,          // Socket.IO ì—°ê²° ì—¬ë¶€
    session: null,             // ìƒì„±ëœ ì„¸ì…˜ ì •ë³´
    connection: null,          // ì„¼ì„œ ì—°ê²° ì •ë³´ (ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ìš©)
    reconnectAttempts: 0,      // í˜„ì¬ ì¬ì—°ê²° ì‹œë„ íšŸìˆ˜
    lastPing: 0                // ë§ˆì§€ë§‰ í•‘ ë ˆì´í„´ì‹œ (ë°€ë¦¬ì´ˆ)
};
```

#### 8.1.2 ì—°ê²° ê´€ë¦¬ ë©”ì„œë“œ

##### `connect()`

ì„œë²„ì— Socket.IO ì—°ê²°ì„ ì‹œì‘í•©ë‹ˆë‹¤. ìƒì„±ìì—ì„œ ìë™ í˜¸ì¶œë˜ë¯€ë¡œ ì¼ë°˜ì ìœ¼ë¡œ ì§ì ‘ í˜¸ì¶œí•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.

```javascript
await sdk.connect()
```

**ë°˜í™˜ê°’:** `Promise<void>`

**ì´ë²¤íŠ¸ ë°œìƒ:**
- `connected` - ì—°ê²° ì„±ê³µ ì‹œ
- `connection-error` - ì—°ê²° ì‹¤íŒ¨ ì‹œ

**ì˜ˆì œ:**

```javascript
sdk.on('connected', () => {
    console.log('âœ… ì„œë²„ ì—°ê²° ì™„ë£Œ!');
    // ì—°ê²° í›„ ì„¸ì…˜ ìƒì„±
    createSession();
});

sdk.on('connection-error', (event) => {
    const error = event.detail || event;
    console.error('âŒ ì—°ê²° ì˜¤ë¥˜:', error);
});
```

##### `disconnect()`

ì„œë²„ ì—°ê²°ì„ ì¢…ë£Œí•˜ê³  ëª¨ë“  ìƒíƒœë¥¼ ì´ˆê¸°í™”í•©ë‹ˆë‹¤.

```javascript
sdk.disconnect()
```

**ë°˜í™˜ê°’:** `void`

**ì˜ˆì œ:**

```javascript
// ê²Œì„ ì¢…ë£Œ ì‹œ
window.addEventListener('beforeunload', () => {
    sdk.disconnect();
});
```

##### `isConnected()`

í˜„ì¬ ì—°ê²° ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

```javascript
const connected = sdk.isConnected()
```

**ë°˜í™˜ê°’:** `boolean` - ì—°ê²°ë˜ì–´ ìˆìœ¼ë©´ `true`

##### `ping()`

ì„œë²„ì™€ì˜ ë ˆì´í„´ì‹œë¥¼ ì¸¡ì •í•©ë‹ˆë‹¤.

```javascript
const latency = await sdk.ping()
```

**ë°˜í™˜ê°’:** `Promise<number>` - ë ˆì´í„´ì‹œ (ë°€ë¦¬ì´ˆ), ì—°ê²°ë˜ì§€ ì•Šì•˜ìœ¼ë©´ `null`

**ì˜ˆì œ:**

```javascript
// ì—°ê²° í’ˆì§ˆ ì²´í¬
setInterval(async () => {
    const latency = await sdk.ping();
    if (latency) {
        console.log(`ğŸ“¶ í•‘: ${latency}ms`);
        document.getElementById('latency').textContent = `${latency}ms`;
    }
}, 5000);
```

#### 8.1.3 ì„¸ì…˜ ê´€ë¦¬ ë©”ì„œë“œ (ê²Œì„ìš©)

##### `createSession()`

ìƒˆë¡œìš´ ê²Œì„ ì„¸ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤. **ê²Œì„ í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ í˜¸ì¶œí•©ë‹ˆë‹¤.**

```javascript
const session = await sdk.createSession()
```

**ë°˜í™˜ê°’:** `Promise<Session>` - ìƒì„±ëœ ì„¸ì…˜ ì •ë³´

```typescript
interface Session {
    sessionId: string;      // ê³ ìœ  ì„¸ì…˜ ID (ì˜ˆ: "tilt-maze_A1B2_1696234567890")
    sessionCode: string;    // 4ìë¦¬ ì„¸ì…˜ ì½”ë“œ (ì˜ˆ: "A1B2")
    gameType: string;       // ê²Œì„ íƒ€ì… ("solo", "dual", "multi")
    maxSensors: number;     // ìµœëŒ€ ì„¼ì„œ ìˆ˜ (solo: 1, dual: 2, multi: 10)
}
```

**ì˜¤ë¥˜ ë°œìƒ ì¡°ê±´:**
- ì„œë²„ì— ì—°ê²°ë˜ì§€ ì•Šì•˜ì„ ë•Œ: `"ì„œë²„ì— ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤."`

**ì˜ˆì œ:**

```javascript
// ì˜¬ë°”ë¥¸ íŒ¨í„´: ì„œë²„ ì—°ê²° ì™„ë£Œ í›„ ì„¸ì…˜ ìƒì„±
sdk.on('connected', async () => {
    try {
        const session = await sdk.createSession();
        console.log('âœ… ì„¸ì…˜ ìƒì„±:', session.sessionCode);

        // QR ì½”ë“œ í‘œì‹œ
        displaySessionInfo(session);

    } catch (error) {
        console.error('âŒ ì„¸ì…˜ ìƒì„± ì‹¤íŒ¨:', error);
    }
});

// âŒ ì˜ëª»ëœ íŒ¨í„´: ì—°ê²° ëŒ€ê¸° ì—†ì´ ì¦‰ì‹œ í˜¸ì¶œ
// await sdk.createSession(); // Error: ì„œë²„ì— ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
```

##### `startGame()`

ì„¼ì„œê°€ ëª¨ë‘ ì—°ê²°ëœ í›„ ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.

```javascript
const gameInfo = await sdk.startGame()
```

**ë°˜í™˜ê°’:** `Promise<GameInfo>`

```typescript
interface GameInfo {
    sessionId: string;
    gameType: string;
    connectedSensors: string[];  // ì—°ê²°ëœ ì„¼ì„œ ID ë°°ì—´
}
```

**ì˜¤ë¥˜ ë°œìƒ ì¡°ê±´:**
- ì„¸ì…˜ì´ ìƒì„±ë˜ì§€ ì•Šì•˜ì„ ë•Œ
- í•„ìš”í•œ ì„¼ì„œê°€ ëª¨ë‘ ì—°ê²°ë˜ì§€ ì•Šì•˜ì„ ë•Œ

**ì˜ˆì œ:**

```javascript
// ê²Œì„ ì¤€ë¹„ ì™„ë£Œ ì´ë²¤íŠ¸ ëŒ€ê¸°
sdk.on('game-ready', async (event) => {
    const data = event.detail || event;
    console.log('ğŸ® ê²Œì„ ì¤€ë¹„ ì™„ë£Œ! ëª¨ë“  ì„¼ì„œ ì—°ê²°ë¨');

    // 3ì´ˆ ì¹´ìš´íŠ¸ë‹¤ìš´ í›„ ì‹œì‘
    for (let i = 3; i > 0; i--) {
        document.getElementById('countdown').textContent = i;
        await sleep(1000);
    }

    const gameInfo = await sdk.startGame();
    console.log('ğŸš€ ê²Œì„ ì‹œì‘!', gameInfo);

    // ê²Œì„ ë£¨í”„ ì‹œì‘
    startGameLoop();
});
```

##### `getSession()`

í˜„ì¬ ì„¸ì…˜ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

```javascript
const session = sdk.getSession()
```

**ë°˜í™˜ê°’:** `Session | null` - ì„¸ì…˜ì´ ì—†ìœ¼ë©´ `null`

#### 8.1.4 ì„¼ì„œ ê´€ë¦¬ ë©”ì„œë“œ (ëª¨ë°”ì¼ìš©)

##### `connectSensor(sessionCode, deviceInfo)`

ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ê²Œì„ ì„¸ì…˜ì— ì—°ê²°í•©ë‹ˆë‹¤. **ëª¨ë°”ì¼ ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œë§Œ í˜¸ì¶œí•©ë‹ˆë‹¤.**

```javascript
const connection = await sdk.connectSensor(sessionCode, deviceInfo)
```

**íŒŒë¼ë¯¸í„°:**

| ì´ë¦„ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `sessionCode` | `string` | âœ… | 4ìë¦¬ ì„¸ì…˜ ì½”ë“œ (ê²Œì„ í™”ë©´ì— í‘œì‹œëœ ì½”ë“œ) |
| `deviceInfo` | `object` | âŒ | ì¶”ê°€ ë””ë°”ì´ìŠ¤ ì •ë³´ (ì„ íƒì‚¬í•­) |

**ë°˜í™˜ê°’:** `Promise<SensorConnection>`

```typescript
interface SensorConnection {
    sessionId: string;         // ì„¸ì…˜ ID
    sensorId: string;          // í• ë‹¹ëœ ì„¼ì„œ ID (ì˜ˆ: "sensor1", "player1")
    connectedSensors: number;  // í˜„ì¬ ì—°ê²°ëœ ì„¼ì„œ ìˆ˜
    maxSensors: number;        // ìµœëŒ€ ì„¼ì„œ ìˆ˜
    isReady: boolean;          // ê²Œì„ ì‹œì‘ ì¤€ë¹„ ì™„ë£Œ ì—¬ë¶€
}
```

**ì˜ˆì œ:**

```javascript
// ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì—°ê²°
const sessionCode = document.getElementById('code-input').value; // ì‚¬ìš©ì ì…ë ¥

try {
    const connection = await sdk.connectSensor(sessionCode, {
        deviceName: 'iPhone 13',
        customData: { userId: '12345' }
    });

    console.log(`âœ… ì„¼ì„œ ì—°ê²° ì„±ê³µ: ${connection.sensorId}`);
    console.log(`ğŸ“Š ì§„í–‰ ìƒí™©: ${connection.connectedSensors}/${connection.maxSensors}`);

    if (connection.isReady) {
        console.log('ğŸ® ê²Œì„ ì‹œì‘ ì¤€ë¹„ ì™„ë£Œ!');
    }

    // ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘ ì‹œì‘
    startSensorCollection();

} catch (error) {
    console.error('âŒ ì—°ê²° ì‹¤íŒ¨:', error.message);
    alert('ì„¸ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì½”ë“œë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
}
```

##### `sendSensorData(sensorData)`

ì„¼ì„œ ë°ì´í„°ë¥¼ ê²Œì„ í˜¸ìŠ¤íŠ¸ë¡œ ì „ì†¡í•©ë‹ˆë‹¤.

```javascript
const success = sdk.sendSensorData(sensorData)
```

**íŒŒë¼ë¯¸í„°:**

| ì´ë¦„ | íƒ€ì… | í•„ìˆ˜ | ì„¤ëª… |
|------|------|------|------|
| `sensorData` | `object` | âœ… | ì„¼ì„œ ë°ì´í„° ê°ì²´ |

**ì„¼ì„œ ë°ì´í„° êµ¬ì¡°:**

```typescript
interface SensorData {
    acceleration?: {
        x: number;  // m/sÂ² (ì¢Œìš°)
        y: number;  // m/sÂ² (ìƒí•˜)
        z: number;  // m/sÂ² (ì•ë’¤)
    };
    rotationRate?: {
        alpha: number;  // Zì¶• íšŒì „ ì†ë„ (deg/s)
        beta: number;   // Xì¶• íšŒì „ ì†ë„ (deg/s)
        gamma: number;  // Yì¶• íšŒì „ ì†ë„ (deg/s)
    };
    orientation?: {
        alpha: number;  // 0-360Â° (ë‚˜ì¹¨ë°˜ ë°©í–¥)
        beta: number;   // -180~180Â° (ì•ë’¤ ê¸°ìš¸ê¸°)
        gamma: number;  // -90~90Â° (ì¢Œìš° ê¸°ìš¸ê¸°)
    };
    // ì»¤ìŠ¤í…€ ë°ì´í„° ì¶”ê°€ ê°€ëŠ¥
    customData?: any;
}
```

**ë°˜í™˜ê°’:** `boolean` - ì „ì†¡ ì„±ê³µ ì—¬ë¶€

**ì˜ˆì œ:**

```javascript
// SensorCollectorì™€ í•¨ê»˜ ì‚¬ìš©
const collector = new SensorCollector({ throttle: 50 });

collector.onData((data) => {
    // 50msë§ˆë‹¤ í˜¸ì¶œë¨
    const success = sdk.sendSensorData({
        acceleration: data.acceleration,
        orientation: data.orientation,
        rotationRate: data.rotationRate,
        customData: {
            batteryLevel: navigator.getBattery ? navigator.battery.level : null
        }
    });

    if (!success) {
        console.warn('âš ï¸ ì„¼ì„œ ë°ì´í„° ì „ì†¡ ì‹¤íŒ¨');
    }
});

await collector.start();
```

##### `getSensorConnection()`

í˜„ì¬ ì„¼ì„œ ì—°ê²° ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

```javascript
const connection = sdk.getSensorConnection()
```

**ë°˜í™˜ê°’:** `SensorConnection | null`

#### 8.1.5 ì´ë²¤íŠ¸ ì‹œìŠ¤í…œ

SessionSDKëŠ” `EventTarget`ì„ ìƒì†í•˜ì—¬ í‘œì¤€ ì´ë²¤íŠ¸ APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.

##### `on(eventName, handler)`

ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.

```javascript
sdk.on(eventName, handler)
```

**íŒŒë¼ë¯¸í„°:**

| ì´ë¦„ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `eventName` | `string` | ì´ë²¤íŠ¸ ì´ë¦„ |
| `handler` | `function` | ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ |

**ì£¼ìš” ì´ë²¤íŠ¸ ëª©ë¡:**

| ì´ë²¤íŠ¸ ì´ë¦„ | ë°œìƒ ì¡°ê±´ | ë°ì´í„° |
|------------|----------|--------|
| `connected` | Socket.IO ì—°ê²° ì™„ë£Œ | - |
| `disconnected` | ì—°ê²° í•´ì œ | `{ reason: string }` |
| `connection-error` | ì—°ê²° ì˜¤ë¥˜ | `{ error: string }` |
| `session-created` | ì„¸ì…˜ ìƒì„± ì™„ë£Œ | `Session` |
| `sensor-connected` | ì„¼ì„œ ì—°ê²°ë¨ | `SensorConnection` |
| `sensor-disconnected` | ì„¼ì„œ ì—°ê²° í•´ì œ | `{ sensorId: string }` |
| `sensor-data` | ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹  | `SensorDataEvent` |
| `game-ready` | ê²Œì„ ì‹œì‘ ì¤€ë¹„ ì™„ë£Œ | `{ connectedSensors: number }` |
| `game-started` | ê²Œì„ ì‹œì‘ë¨ | `GameInfo` |
| `host-disconnected` | í˜¸ìŠ¤íŠ¸ ì—°ê²° í•´ì œ | - |
| `sensor-error` | ì„¼ì„œ ì˜¤ë¥˜ | `{ error: string }` |
| `max-reconnect-attempts-reached` | ì¬ì—°ê²° ì‹œë„ ì´ˆê³¼ | - |

**ì˜ˆì œ:**

```javascript
// ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹  (ê²Œì„ì—ì„œ)
sdk.on('sensor-data', (event) => {
    // âš ï¸ ì¤‘ìš”: CustomEvent ì²˜ë¦¬ íŒ¨í„´
    const data = event.detail || event;

    console.log(`ğŸ“± ì„¼ì„œ ë°ì´í„°:`, data);
    // {
    //   sensorId: "sensor1",
    //   gameType: "solo",
    //   data: { orientation: {...}, acceleration: {...} },
    //   timestamp: 1696234567890
    // }

    // ê²Œì„ ë¡œì§ì— ë°˜ì˜
    updatePlayerPosition(data);
});

// ì„¼ì„œ ì—°ê²° ì•Œë¦¼
sdk.on('sensor-connected', (event) => {
    const connection = event.detail || event;
    console.log(`âœ… ì„¼ì„œ ì—°ê²°: ${connection.sensorId}`);

    // UI ì—…ë°ì´íŠ¸
    document.getElementById('sensor-status').textContent =
        `${connection.connectedSensors}/${connection.maxSensors} ì„¼ì„œ ì—°ê²°ë¨`;
});

// ì„¼ì„œ ì—°ê²° í•´ì œ ì•Œë¦¼
sdk.on('sensor-disconnected', (event) => {
    const data = event.detail || event;
    console.log(`âŒ ì„¼ì„œ ì—°ê²° í•´ì œ: ${data.sensorId}`);

    // ê²Œì„ ì¼ì‹œì •ì§€
    pauseGame();
    showReconnectMessage();
});

// í˜¸ìŠ¤íŠ¸ ì—°ê²° í•´ì œ (ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ì—ì„œ)
sdk.on('host-disconnected', () => {
    console.log('âŒ ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
    alert('í˜¸ìŠ¤íŠ¸ì™€ì˜ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.');
    window.location.href = '/sensor.html';
});
```

##### `off(eventName, handler)`

ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•©ë‹ˆë‹¤.

```javascript
sdk.off(eventName, handler)
```

**ì˜ˆì œ:**

```javascript
const dataHandler = (event) => {
    console.log('ì„¼ì„œ ë°ì´í„°:', event.detail || event);
};

// ë¦¬ìŠ¤ë„ˆ ë“±ë¡
sdk.on('sensor-data', dataHandler);

// ë‚˜ì¤‘ì— ì œê±°
sdk.off('sensor-data', dataHandler);
```

##### `emit(eventName, data)` *(ë‚´ë¶€ìš©)*

ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ SDK ë‚´ë¶€ì—ì„œë§Œ ì‚¬ìš©ë˜ì§€ë§Œ, ê³ ê¸‰ ì‚¬ìš©ìëŠ” ì»¤ìŠ¤í…€ ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
sdk.emit(eventName, data)
```

#### 8.1.6 ìœ í‹¸ë¦¬í‹° ë©”ì„œë“œ

##### `destroy()`

SDK ì¸ìŠ¤í„´ìŠ¤ë¥¼ ì •ë¦¬í•˜ê³  ëª¨ë“  ë¦¬ìŠ¤ë„ˆë¥¼ ì œê±°í•©ë‹ˆë‹¤.

```javascript
sdk.destroy()
```

**ì˜ˆì œ:**

```javascript
// ì‹±ê¸€ í˜ì´ì§€ ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ í˜ì´ì§€ ì „í™˜ ì‹œ
function cleanupGame() {
    if (window.gameSDK) {
        window.gameSDK.destroy();
        window.gameSDK = null;
    }
}
```

##### `log(...args)` *(ë‚´ë¶€ìš©)*

ë””ë²„ê·¸ ë¡œê·¸ë¥¼ ì¶œë ¥í•©ë‹ˆë‹¤. `debug: true` ì˜µì…˜ì´ í™œì„±í™”ë˜ì—ˆì„ ë•Œë§Œ ì¶œë ¥ë©ë‹ˆë‹¤.

```javascript
sdk.log('ë©”ì‹œì§€', ë°ì´í„°)
```

#### 8.1.7 ì™„ì „í•œ ê²Œì„ ì˜ˆì œ

```javascript
// ===== ê²Œì„ í´ë¼ì´ì–¸íŠ¸ (index.html) =====

const sdk = new SessionSDK({
    gameId: 'my-awesome-game',
    gameType: 'solo',
    debug: true
});

let gameState = {
    ball: { x: 400, y: 300, vx: 0, vy: 0 },
    score: 0,
    isPlaying: false
};

// 1ï¸âƒ£ ì„œë²„ ì—°ê²° ì™„ë£Œ ëŒ€ê¸°
sdk.on('connected', async () => {
    console.log('âœ… ì„œë²„ ì—°ê²° ì™„ë£Œ');

    // 2ï¸âƒ£ ì„¸ì…˜ ìƒì„±
    try {
        const session = await sdk.createSession();
        displaySessionInfo(session);
    } catch (error) {
        console.error('âŒ ì„¸ì…˜ ìƒì„± ì‹¤íŒ¨:', error);
    }
});

// 3ï¸âƒ£ ì„¸ì…˜ ìƒì„± ì™„ë£Œ ì²˜ë¦¬
sdk.on('session-created', (event) => {
    const session = event.detail || event;
    console.log('âœ… ì„¸ì…˜ ì½”ë“œ:', session.sessionCode);

    // QR ì½”ë“œ ìƒì„±
    const qrUrl = `${window.location.origin}/sensor.html?code=${session.sessionCode}`;
    QRCodeGenerator.generateElement(qrUrl, 300).then(qr => {
        document.getElementById('qr-container').appendChild(qr);
    });
});

// 4ï¸âƒ£ ì„¼ì„œ ì—°ê²° ì•Œë¦¼
sdk.on('sensor-connected', (event) => {
    const conn = event.detail || event;
    console.log(`ğŸ“± ì„¼ì„œ ì—°ê²°: ${conn.sensorId}`);
    document.getElementById('status').textContent = 'ì„¼ì„œ ì—°ê²°ë¨ - ê²Œì„ ì¤€ë¹„ ì¤‘...';
});

// 5ï¸âƒ£ ê²Œì„ ì¤€ë¹„ ì™„ë£Œ
sdk.on('game-ready', async () => {
    console.log('ğŸ® ê²Œì„ ì¤€ë¹„ ì™„ë£Œ!');
    document.getElementById('status').textContent = 'ê²Œì„ ì‹œì‘!';

    const gameInfo = await sdk.startGame();
    gameState.isPlaying = true;

    // ê²Œì„ ë£¨í”„ ì‹œì‘
    requestAnimationFrame(gameLoop);
});

// 6ï¸âƒ£ ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬
sdk.on('sensor-data', (event) => {
    const data = event.detail || event;

    if (gameState.isPlaying) {
        // ê¸°ìš¸ê¸°ë¡œ ê³µ ê°€ì†ë„ ì œì–´
        const tilt = data.data.orientation;
        gameState.ball.vx += tilt.gamma * 0.1;
        gameState.ball.vy += tilt.beta * 0.1;
    }
});

// ê²Œì„ ë£¨í”„
function gameLoop() {
    if (!gameState.isPlaying) return;

    // ë¬¼ë¦¬ ì—…ë°ì´íŠ¸
    gameState.ball.x += gameState.ball.vx;
    gameState.ball.y += gameState.ball.vy;
    gameState.ball.vx *= 0.98; // ë§ˆì°°
    gameState.ball.vy *= 0.98;

    // ê²½ê³„ ì¶©ëŒ
    if (gameState.ball.x < 0 || gameState.ball.x > 800) {
        gameState.ball.vx *= -0.8;
        gameState.ball.x = Math.max(0, Math.min(800, gameState.ball.x));
    }
    if (gameState.ball.y < 0 || gameState.ball.y > 600) {
        gameState.ball.vy *= -0.8;
        gameState.ball.y = Math.max(0, Math.min(600, gameState.ball.y));
    }

    // ë Œë”ë§
    render();

    requestAnimationFrame(gameLoop);
}

function render() {
    const ctx = document.getElementById('canvas').getContext('2d');
    ctx.clearRect(0, 0, 800, 600);

    // ê³µ ê·¸ë¦¬ê¸°
    ctx.beginPath();
    ctx.arc(gameState.ball.x, gameState.ball.y, 20, 0, Math.PI * 2);
    ctx.fillStyle = '#3b82f6';
    ctx.fill();

    // ì ìˆ˜ í‘œì‹œ
    ctx.fillStyle = '#fff';
    ctx.font = '24px Arial';
    ctx.fillText(`Score: ${gameState.score}`, 20, 40);
}

function displaySessionInfo(session) {
    document.getElementById('session-code').textContent = session.sessionCode;
    document.getElementById('game-type').textContent = session.gameType;
    document.getElementById('max-sensors').textContent = session.maxSensors;
}
```

```javascript
// ===== ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ (sensor.html) =====

const sdk = new SessionSDK({
    gameId: 'sensor-controller',
    gameType: 'solo',
    debug: true
});

let collector = null;

// 1ï¸âƒ£ ì„œë²„ ì—°ê²° ì™„ë£Œ
sdk.on('connected', () => {
    console.log('âœ… ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ ì¤€ë¹„ë¨');
    document.getElementById('connect-btn').disabled = false;
});

// 2ï¸âƒ£ ì„¸ì…˜ ì½”ë“œ ì…ë ¥ ë° ì—°ê²°
document.getElementById('connect-btn').addEventListener('click', async () => {
    const code = document.getElementById('code-input').value.toUpperCase();

    if (code.length !== 4) {
        alert('4ìë¦¬ ì½”ë“œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
        return;
    }

    try {
        const connection = await sdk.connectSensor(code);
        console.log('âœ… ì—°ê²° ì„±ê³µ:', connection);

        document.getElementById('connection-info').textContent =
            `ì„¼ì„œ ID: ${connection.sensorId}`;

        // ì„¼ì„œ ìˆ˜ì§‘ ì‹œì‘
        await startSensorCollection();

    } catch (error) {
        alert('ì—°ê²° ì‹¤íŒ¨: ' + error.message);
    }
});

// 3ï¸âƒ£ ì„¼ì„œ ë°ì´í„° ìˆ˜ì§‘ ì‹œì‘
async function startSensorCollection() {
    collector = new SensorCollector({
        throttle: 50,  // 50ms ê°„ê²©
        sensitivity: 1
    });

    collector.onData((sensorData) => {
        // SDKë¡œ ë°ì´í„° ì „ì†¡
        sdk.sendSensorData(sensorData);

        // UI ì—…ë°ì´íŠ¸
        updateSensorDisplay(sensorData);
    });

    try {
        await collector.start();
        console.log('ğŸ“± ì„¼ì„œ ìˆ˜ì§‘ ì‹œì‘');
        document.getElementById('status').textContent = 'ì„¼ì„œ í™œì„±í™”ë¨';
    } catch (error) {
        alert('ì„¼ì„œ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤: ' + error.message);
    }
}

// 4ï¸âƒ£ ì„¼ì„œ ë°ì´í„° ì‹œê°í™”
function updateSensorDisplay(data) {
    const { orientation, acceleration } = data;

    document.getElementById('alpha').textContent = orientation.alpha.toFixed(1);
    document.getElementById('beta').textContent = orientation.beta.toFixed(1);
    document.getElementById('gamma').textContent = orientation.gamma.toFixed(1);

    document.getElementById('acc-x').textContent = acceleration.x.toFixed(2);
    document.getElementById('acc-y').textContent = acceleration.y.toFixed(2);
    document.getElementById('acc-z').textContent = acceleration.z.toFixed(2);
}

// 5ï¸âƒ£ ê²Œì„ ì‹œì‘ ì•Œë¦¼
sdk.on('game-started', () => {
    console.log('ğŸ® ê²Œì„ ì‹œì‘!');
    document.body.style.backgroundColor = '#22c55e';
    vibrate(200);
});

// 6ï¸âƒ£ í˜¸ìŠ¤íŠ¸ ì—°ê²° í•´ì œ
sdk.on('host-disconnected', () => {
    console.log('âŒ ê²Œì„ ì¢…ë£Œ');
    alert('ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');

    if (collector) {
        collector.stop();
    }

    window.location.href = '/sensor.html';
});

// ì§„ë™ ìœ í‹¸ë¦¬í‹°
function vibrate(duration) {
    if ('vibrate' in navigator) {
        navigator.vibrate(duration);
    }
}
```

---

### 8.2 QRCodeGenerator ìœ í‹¸ë¦¬í‹°

**ìœ„ì¹˜**: `public/js/SessionSDK.js:417-459`

QR ì½”ë“œ ìƒì„±ì„ ê°„í¸í•˜ê²Œ ì²˜ë¦¬í•˜ëŠ” ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

#### 8.2.1 `generate(text, size)`

QR ì½”ë“œë¥¼ Data URLë¡œ ìƒì„±í•©ë‹ˆë‹¤.

```javascript
const dataUrl = await QRCodeGenerator.generate(text, size)
```

**íŒŒë¼ë¯¸í„°:**

| ì´ë¦„ | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|------|--------|------|
| `text` | `string` | - | QR ì½”ë“œì— ì¸ì½”ë”©í•  í…ìŠ¤íŠ¸ |
| `size` | `number` | `200` | QR ì½”ë“œ í¬ê¸° (í”½ì…€) |

**ë°˜í™˜ê°’:** `Promise<string>` - Data URL ë˜ëŠ” ì™¸ë¶€ API URL

**ì˜ˆì œ:**

```javascript
const session = await sdk.createSession();
const qrUrl = `${window.location.origin}/sensor.html?code=${session.sessionCode}`;

const dataUrl = await QRCodeGenerator.generate(qrUrl, 300);
document.getElementById('qr-img').src = dataUrl;
```

#### 8.2.2 `generateElement(text, size)`

QR ì½”ë“œë¥¼ DOM ì—˜ë¦¬ë¨¼íŠ¸ë¡œ ìƒì„±í•©ë‹ˆë‹¤.

```javascript
const element = await QRCodeGenerator.generateElement(text, size)
```

**ë°˜í™˜ê°’:** `Promise<HTMLDivElement>` - QR ì½”ë“œë¥¼ í¬í•¨í•œ ì»¨í…Œì´ë„ˆ

**ì˜ˆì œ:**

```javascript
const qrUrl = `${window.location.origin}/sensor.html?code=${session.sessionCode}`;
const qrElement = await QRCodeGenerator.generateElement(qrUrl, 300);

document.getElementById('qr-container').appendChild(qrElement);
```

**í´ë°± ë©”ì»¤ë‹ˆì¦˜:**

QRCodeGeneratorëŠ” ë‘ ê°€ì§€ ë°©ì‹ì„ ì§€ì›í•©ë‹ˆë‹¤:

1. **ìš°ì„  ì‹œë„**: `qrcode` ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© (ë¡œì»¬ ìƒì„±)
2. **í´ë°±**: `https://api.qrserver.com` ì™¸ë¶€ API ì‚¬ìš©

```html
<!-- qrcode ë¼ì´ë¸ŒëŸ¬ë¦¬ í¬í•¨ ì‹œ -->
<script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>

<!-- í¬í•¨í•˜ì§€ ì•Šìœ¼ë©´ ì™¸ë¶€ APIë¡œ í´ë°± -->
```

---

### 8.3 SensorCollector ìœ í‹¸ë¦¬í‹°

**ìœ„ì¹˜**: `public/js/SessionSDK.js:462-578`

ëª¨ë°”ì¼ ë””ë°”ì´ìŠ¤ì˜ ì„¼ì„œ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•˜ëŠ” ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ì…ë‹ˆë‹¤.

#### 8.3.1 í´ë˜ìŠ¤ ì´ˆê¸°í™”

```javascript
const collector = new SensorCollector(options)
```

**íŒŒë¼ë¯¸í„°:**

| ì´ë¦„ | íƒ€ì… | ê¸°ë³¸ê°’ | ì„¤ëª… |
|------|------|--------|------|
| `options.throttle` | `number` | `50` | ë°ì´í„° ìˆ˜ì§‘ ê°„ê²© (ë°€ë¦¬ì´ˆ) |
| `options.sensitivity` | `number` | `1` | ì„¼ì„œ ë¯¼ê°ë„ ë°°ìœ¨ |

**ì˜ˆì œ:**

```javascript
// ê³ ì† ìˆ˜ì§‘ (20ms ê°„ê²©)
const fastCollector = new SensorCollector({ throttle: 20 });

// ì €ì† ìˆ˜ì§‘ (100ms ê°„ê²©)
const slowCollector = new SensorCollector({ throttle: 100 });

// ë†’ì€ ë¯¼ê°ë„
const sensitiveCollector = new SensorCollector({ sensitivity: 2 });
```

#### 8.3.2 `start()`

ì„¼ì„œ ìˆ˜ì§‘ì„ ì‹œì‘í•©ë‹ˆë‹¤. iOS 13+ ì—ì„œëŠ” ìë™ìœ¼ë¡œ ê¶Œí•œì„ ìš”ì²­í•©ë‹ˆë‹¤.

```javascript
await collector.start()
```

**ë°˜í™˜ê°’:** `Promise<void>`

**ì˜¤ë¥˜ ë°œìƒ ì¡°ê±´:**
- ì„¼ì„œë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ê¸°ê¸°
- ì‚¬ìš©ìê°€ ê¶Œí•œì„ ê±°ë¶€í•œ ê²½ìš°

**ì˜ˆì œ:**

```javascript
const collector = new SensorCollector({ throttle: 50 });

try {
    await collector.start();
    console.log('ğŸ“± ì„¼ì„œ ìˆ˜ì§‘ ì‹œì‘');
} catch (error) {
    if (error.message.includes('ê¶Œí•œ')) {
        alert('ì„¼ì„œ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤. ì„¤ì •ì—ì„œ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.');
    } else if (error.message.includes('ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤')) {
        alert('ì´ ê¸°ê¸°ëŠ” ì„¼ì„œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }
}
```

#### 8.3.3 `stop()`

ì„¼ì„œ ìˆ˜ì§‘ì„ ì¤‘ì§€í•©ë‹ˆë‹¤.

```javascript
collector.stop()
```

**ì˜ˆì œ:**

```javascript
// ê²Œì„ ì¢…ë£Œ ì‹œ
sdk.on('host-disconnected', () => {
    collector.stop();
    console.log('ğŸ“± ì„¼ì„œ ìˆ˜ì§‘ ì¤‘ì§€');
});
```

#### 8.3.4 `onData(handler)`

ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹  í•¸ë“¤ëŸ¬ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.

```javascript
collector.onData(handler)
```

**íŒŒë¼ë¯¸í„°:**

| ì´ë¦„ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| `handler` | `function(data)` | ì„¼ì„œ ë°ì´í„° ì½œë°± |

**ì½œë°± ë°ì´í„° êµ¬ì¡°:**

```typescript
interface SensorData {
    acceleration: {
        x: number;  // m/sÂ²
        y: number;
        z: number;
    };
    rotationRate: {
        alpha: number;  // deg/s
        beta: number;
        gamma: number;
    };
    orientation: {
        alpha: number;  // 0-360Â°
        beta: number;   // -180~180Â°
        gamma: number;  // -90~90Â°
    };
}
```

**ì˜ˆì œ:**

```javascript
collector.onData((sensorData) => {
    // throttle ê°„ê²©ë§ˆë‹¤ í˜¸ì¶œë¨ (ê¸°ë³¸ 50ms)

    console.log('ğŸ“Š ì„¼ì„œ ë°ì´í„°:', sensorData);

    // SessionSDKë¡œ ì „ì†¡
    sdk.sendSensorData(sensorData);

    // ë¡œì»¬ ì‹œê°í™”
    updateVisualFeedback(sensorData);
});
```

#### 8.3.5 `offData(handler)`

ì„¼ì„œ ë°ì´í„° í•¸ë“¤ëŸ¬ë¥¼ ì œê±°í•©ë‹ˆë‹¤.

```javascript
collector.offData(handler)
```

#### 8.3.6 `getCurrentData()`

í˜„ì¬ ì„¼ì„œ ë°ì´í„°ì˜ ìŠ¤ëƒ…ìƒ·ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.

```javascript
const data = collector.getCurrentData()
```

**ë°˜í™˜ê°’:** `SensorData` - í˜„ì¬ ì„¼ì„œ ê°’ ë³µì‚¬ë³¸

**ì˜ˆì œ:**

```javascript
// íŠ¹ì • ì‹œì ì˜ ì„¼ì„œ ê°’ ì €ì¥
document.getElementById('capture-btn').addEventListener('click', () => {
    const snapshot = collector.getCurrentData();
    console.log('ğŸ“¸ ì„¼ì„œ ìŠ¤ëƒ…ìƒ·:', snapshot);
    savedPoses.push(snapshot);
});
```

#### 8.3.7 `checkSensorSupport()`

ê¸°ê¸°ì˜ ì„¼ì„œ ì§€ì› ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

```javascript
const supported = collector.checkSensorSupport()
```

**ë°˜í™˜ê°’:** `boolean`

**ì˜ˆì œ:**

```javascript
const collector = new SensorCollector();

if (!collector.checkSensorSupport()) {
    document.getElementById('sensor-warning').style.display = 'block';
    document.getElementById('start-btn').disabled = true;
} else {
    console.log('âœ… ì„¼ì„œ ì§€ì›ë¨');
}
```

#### 8.3.8 ì™„ì „í•œ ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ ì˜ˆì œ

```javascript
// ì„¼ì„œ ìˆ˜ì§‘ ë° ì „ì†¡ ì™„ì „ ì˜ˆì œ
const sdk = new SessionSDK({
    gameId: 'sensor-controller',
    debug: true
});

const collector = new SensorCollector({
    throttle: 50,
    sensitivity: 1
});

let isCollecting = false;

// ì„¼ì„œ ì§€ì› ì²´í¬
if (!collector.checkSensorSupport()) {
    alert('ì´ ê¸°ê¸°ëŠ” ì„¼ì„œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    throw new Error('ì„¼ì„œ ë¯¸ì§€ì›');
}

// ì—°ê²° ë²„íŠ¼ í´ë¦­
document.getElementById('connect-btn').addEventListener('click', async () => {
    const code = prompt('4ìë¦¬ ì„¸ì…˜ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”:');

    try {
        // ì„¸ì…˜ ì—°ê²°
        await sdk.connectSensor(code);

        // ì„¼ì„œ ì‹œì‘
        await collector.start();
        isCollecting = true;

        document.getElementById('status').textContent = 'âœ… ì—°ê²°ë¨ - ì„¼ì„œ í™œì„±í™”';

    } catch (error) {
        alert('ì˜¤ë¥˜: ' + error.message);
    }
});

// ì„¼ì„œ ë°ì´í„° í•¸ë“¤ëŸ¬
collector.onData((sensorData) => {
    if (!isCollecting) return;

    // SDKë¡œ ì „ì†¡
    const success = sdk.sendSensorData(sensorData);

    if (success) {
        // ì‹œê°ì  í”¼ë“œë°±
        updateTiltIndicator(sensorData.orientation);
        updateAccelerationBars(sensorData.acceleration);
    }
});

// ì‹œê°ì  í”¼ë“œë°± í•¨ìˆ˜
function updateTiltIndicator(orientation) {
    const indicator = document.getElementById('tilt-ball');
    const maxTilt = 45; // ìµœëŒ€ ê¸°ìš¸ê¸°

    // gamma: ì¢Œìš° (-90 ~ 90)
    // beta: ì•ë’¤ (-180 ~ 180)
    const x = (orientation.gamma / maxTilt) * 100; // -100 ~ 100
    const y = (orientation.beta / maxTilt) * 100;

    indicator.style.transform = `translate(${x}px, ${y}px)`;
}

function updateAccelerationBars(acceleration) {
    const maxAcc = 20; // m/sÂ²

    document.getElementById('acc-x-bar').style.width =
        `${Math.abs(acceleration.x) / maxAcc * 100}%`;
    document.getElementById('acc-y-bar').style.width =
        `${Math.abs(acceleration.y) / maxAcc * 100}%`;
    document.getElementById('acc-z-bar').style.width =
        `${Math.abs(acceleration.z) / maxAcc * 100}%`;
}

// ì •ë¦¬
window.addEventListener('beforeunload', () => {
    collector.stop();
    sdk.disconnect();
});
```

---

### 8.4 Socket.IO ì´ë²¤íŠ¸ ë ˆí¼ëŸ°ìŠ¤

**ìœ„ì¹˜**: `server/index.js:629-806`

ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ ì‹¤ì‹œê°„ í†µì‹ ì„ ìœ„í•œ Socket.IO ì´ë²¤íŠ¸ë“¤ì…ë‹ˆë‹¤.

#### 8.4.1 í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„ ì´ë²¤íŠ¸

##### `create-session`

ê²Œì„ í˜¸ìŠ¤íŠ¸ê°€ ìƒˆ ì„¸ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤.

**ìš”ì²­ ë°ì´í„°:**

```typescript
{
    gameId: string;      // ê²Œì„ ê³ ìœ  ID
    gameType: string;    // "solo", "dual", "multi"
}
```

**ì‘ë‹µ ë°ì´í„°:**

```typescript
{
    success: boolean;
    session?: {
        sessionId: string;
        sessionCode: string;
        gameType: string;
        maxSensors: number;
    };
    error?: string;
}
```

**ì˜ˆì œ:**

```javascript
// SDK ë‚´ë¶€ êµ¬í˜„
socket.emit('create-session', {
    gameId: 'tilt-maze',
    gameType: 'solo'
}, (response) => {
    if (response.success) {
        console.log('âœ… ì„¸ì…˜:', response.session);
    } else {
        console.error('âŒ ì˜¤ë¥˜:', response.error);
    }
});
```

##### `connect-sensor`

ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ê°€ ì„¸ì…˜ì— ì—°ê²°í•©ë‹ˆë‹¤.

**ìš”ì²­ ë°ì´í„°:**

```typescript
{
    sessionCode: string;     // 4ìë¦¬ ì„¸ì…˜ ì½”ë“œ
    deviceInfo: object;      // ë””ë°”ì´ìŠ¤ ì •ë³´ (ì„ íƒ)
}
```

**ì‘ë‹µ ë°ì´í„°:**

```typescript
{
    success: boolean;
    connection?: {
        sessionId: string;
        sensorId: string;
        connectedSensors: number;
        maxSensors: number;
        isReady: boolean;
    };
    error?: string;
}
```

##### `sensor-data`

ì„¼ì„œ ë°ì´í„°ë¥¼ ì „ì†¡í•©ë‹ˆë‹¤.

**ìš”ì²­ ë°ì´í„°:**

```typescript
{
    sessionCode: string;
    sensorId: string;
    sensorData: {
        acceleration?: {...};
        orientation?: {...};
        rotationRate?: {...};
        timestamp: number;
    };
}
```

**ì‘ë‹µ:** ì—†ìŒ (ë¸Œë¡œë“œìºìŠ¤íŠ¸ ì „ìš©)

##### `start-game`

ê²Œì„ì„ ì‹œì‘í•©ë‹ˆë‹¤.

**ìš”ì²­ ë°ì´í„°:**

```typescript
{
    sessionId: string;
}
```

**ì‘ë‹µ ë°ì´í„°:**

```typescript
{
    success: boolean;
    game?: {
        sessionId: string;
        gameType: string;
        connectedSensors: string[];
    };
    error?: string;
}
```

##### `ping`

ì„œë²„ ì‘ë‹µ ì‹œê°„ì„ ì¸¡ì •í•©ë‹ˆë‹¤.

**ìš”ì²­ ë°ì´í„°:** ì—†ìŒ

**ì‘ë‹µ ë°ì´í„°:** `"pong"` (ì¦‰ì‹œ ì‘ë‹µ)

**ì˜ˆì œ:**

```javascript
const startTime = Date.now();
socket.emit('ping', () => {
    const latency = Date.now() - startTime;
    console.log(`ğŸ“¶ ë ˆì´í„´ì‹œ: ${latency}ms`);
});
```

#### 8.4.2 ì„œë²„ â†’ í´ë¼ì´ì–¸íŠ¸ ì´ë²¤íŠ¸

##### `sensor-connected`

ì„¼ì„œê°€ ì„¸ì…˜ì— ì—°ê²°ë˜ì—ˆì„ ë•Œ ê²Œì„ í˜¸ìŠ¤íŠ¸ë¡œ ì „ì†¡ë©ë‹ˆë‹¤.

**ë°ì´í„°:**

```typescript
{
    sensorId: string;
    connectedSensors: number;
    maxSensors: number;
    isReady: boolean;
}
```

**ì˜ˆì œ:**

```javascript
socket.on('sensor-connected', (data) => {
    console.log(`ğŸ“± ì„¼ì„œ ì—°ê²°: ${data.sensorId}`);
    console.log(`ì§„í–‰: ${data.connectedSensors}/${data.maxSensors}`);

    if (data.isReady) {
        showStartButton();
    }
});
```

##### `sensor-disconnected`

ì„¼ì„œ ì—°ê²°ì´ í•´ì œë˜ì—ˆì„ ë•Œ ê²Œì„ í˜¸ìŠ¤íŠ¸ë¡œ ì „ì†¡ë©ë‹ˆë‹¤.

**ë°ì´í„°:**

```typescript
{
    sensorId: string;
}
```

##### `sensor-update`

ì„¼ì„œ ë°ì´í„°ê°€ ê²Œì„ í˜¸ìŠ¤íŠ¸ë¡œ ì „ì†¡ë©ë‹ˆë‹¤.

**ë°ì´í„°:**

```typescript
{
    sensorId: string;
    gameType: string;
    data: {
        acceleration?: {...};
        orientation?: {...};
        rotationRate?: {...};
    };
    timestamp: number;
}
```

**ì˜ˆì œ:**

```javascript
socket.on('sensor-update', (data) => {
    // ê²Œì„ ë¡œì§ì— ë°˜ì˜
    if (data.sensorId === 'sensor1') {
        player1.tilt = data.data.orientation.gamma;
    }
});
```

##### `game-ready`

í•„ìš”í•œ ëª¨ë“  ì„¼ì„œê°€ ì—°ê²°ë˜ì–´ ê²Œì„ ì‹œì‘ ì¤€ë¹„ê°€ ì™„ë£Œë˜ì—ˆì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

**ë°ì´í„°:**

```typescript
{
    connectedSensors: number;
}
```

##### `game-started`

ê²Œì„ì´ ì‹œì‘ë˜ì—ˆì„ ë•Œ ëª¨ë“  ì°¸ê°€ìì—ê²Œ ì „ì†¡ë©ë‹ˆë‹¤.

**ë°ì´í„°:**

```typescript
{
    sessionId: string;
    gameType: string;
    connectedSensors: string[];
}
```

##### `host-disconnected`

ê²Œì„ í˜¸ìŠ¤íŠ¸ì˜ ì—°ê²°ì´ í•´ì œë˜ì—ˆì„ ë•Œ ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ì†¡ë©ë‹ˆë‹¤.

**ë°ì´í„°:** ì—†ìŒ

**ì˜ˆì œ:**

```javascript
socket.on('host-disconnected', () => {
    alert('ê²Œì„ì´ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
    window.location.href = '/sensor.html';
});
```

##### `sensor-error`

ì„¼ì„œ ê´€ë ¨ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì„ ë•Œ ì „ì†¡ë©ë‹ˆë‹¤.

**ë°ì´í„°:**

```typescript
{
    error: string;
}
```

#### 8.4.3 Socket.IO ì—°ê²° ì´ë²¤íŠ¸

##### `connect`

Socket.IO ì—°ê²°ì´ ì™„ë£Œë˜ì—ˆì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

```javascript
socket.on('connect', () => {
    console.log('âœ… ì„œë²„ ì—°ê²°:', socket.id);
});
```

##### `disconnect`

ì—°ê²°ì´ í•´ì œë˜ì—ˆì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

**ë°ì´í„°:** `reason` (string) - ì—°ê²° í•´ì œ ì´ìœ 

```javascript
socket.on('disconnect', (reason) => {
    console.log('âŒ ì—°ê²° í•´ì œ:', reason);

    if (reason === 'io server disconnect') {
        // ì„œë²„ê°€ ê°•ì œë¡œ ì—°ê²°ì„ ëŠìŒ
        socket.connect(); // ì¬ì—°ê²°
    }
});
```

**ì—°ê²° í•´ì œ ì´ìœ  ëª©ë¡:**

| ì´ìœ  | ì„¤ëª… | ì¬ì—°ê²° |
|------|------|--------|
| `io server disconnect` | ì„œë²„ê°€ ê°•ì œë¡œ ì—°ê²° í•´ì œ | ìˆ˜ë™ |
| `io client disconnect` | í´ë¼ì´ì–¸íŠ¸ê°€ ëª…ì‹œì ìœ¼ë¡œ ì—°ê²° í•´ì œ | ì•ˆí•¨ |
| `ping timeout` | í•‘ íƒ€ì„ì•„ì›ƒ | ìë™ |
| `transport close` | ì „ì†¡ ê³„ì¸µ ì˜¤ë¥˜ | ìë™ |
| `transport error` | ì „ì†¡ ì˜¤ë¥˜ | ìë™ |

##### `connect_error`

ì—°ê²° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì„ ë•Œ ë°œìƒí•©ë‹ˆë‹¤.

```javascript
socket.on('connect_error', (error) => {
    console.error('âŒ ì—°ê²° ì˜¤ë¥˜:', error.message);
});
```

---

### 8.5 HTTP REST API ë ˆí¼ëŸ°ìŠ¤

**ìœ„ì¹˜**: `server/index.js:91-689`, `server/routes/landingRoutes.js`, `server/routes/developerRoutes.js`

#### 8.5.1 ê²Œì„ ê´€ë¦¬ API

##### `GET /api/games`

ëª¨ë“  í™œì„± ê²Œì„ ëª©ë¡ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

**ì‘ë‹µ:**

```typescript
{
    success: true,
    data: Game[],
    stats: {
        totalGames: number;
        activeGames: number;
        lastScan: string;
    }
}
```

**Game êµ¬ì¡°:**

```typescript
interface Game {
    id: string;
    title: string;
    type: string;           // "solo", "dual", "multi"
    path: string;
    description?: string;
    thumbnail?: string;
    maxPlayers: number;
    requiredSensors: number;
    difficulty?: string;
    tags?: string[];
}
```

**ì˜ˆì œ:**

```javascript
fetch('/api/games')
    .then(res => res.json())
    .then(data => {
        console.log(`ì´ ${data.stats.totalGames}ê°œ ê²Œì„`);
        data.data.forEach(game => {
            console.log(`- ${game.title} (${game.type})`);
        });
    });
```

##### `GET /api/games/:gameId`

íŠ¹ì • ê²Œì„ì˜ ìƒì„¸ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**íŒŒë¼ë¯¸í„°:**

| ì´ë¦„ | ìœ„ì¹˜ | íƒ€ì… | ì„¤ëª… |
|------|------|------|------|
| `gameId` | path | string | ê²Œì„ ID |

**ì‘ë‹µ:**

```typescript
{
    success: true,
    data: Game
}
```

**ì˜¤ë¥˜ ì‘ë‹µ (404):**

```typescript
{
    success: false,
    error: "ê²Œì„ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤."
}
```

**ì˜ˆì œ:**

```javascript
fetch('/api/games/tilt-maze')
    .then(res => res.json())
    .then(data => {
        if (data.success) {
            console.log('ê²Œì„ ì •ë³´:', data.data);
        }
    });
```

##### `POST /api/admin/rescan`

ê²Œì„ í´ë”ë¥¼ ì¬ìŠ¤ìº”í•©ë‹ˆë‹¤. **(ê°œë°œìš©)**

**ì‘ë‹µ:**

```typescript
{
    success: true,
    message: "ê²Œì„ ì¬ìŠ¤ìº” ì™„ë£Œ",
    stats: {
        totalGames: number;
        activeGames: number;
        lastScan: string;
    }
}
```

**ì˜ˆì œ:**

```javascript
// ìƒˆ ê²Œì„ ì¶”ê°€ í›„ ì¬ìŠ¤ìº”
fetch('/api/admin/rescan', { method: 'POST' })
    .then(res => res.json())
    .then(data => {
        console.log(`âœ… ${data.stats.totalGames}ê°œ ê²Œì„ ë°œê²¬`);
    });
```

#### 8.5.2 AI Assistant API

##### `POST /api/manual-chat`

AI ë§¤ë‰´ì–¼ ì±—ë´‡ì—ê²Œ ì§ˆë¬¸í•©ë‹ˆë‹¤. (RAG ê¸°ë°˜)

**ìš”ì²­:**

```typescript
{
    question: string;  // ì§ˆë¬¸ ë‚´ìš©
}
```

**ì‘ë‹µ:**

```typescript
{
    success: true,
    answer: string;           // AI ë‹µë³€
    sources: string[];        // ì°¸ì¡° ë¬¸ì„œ ëª©ë¡
    confidence: number;       // ì‹ ë¢°ë„ (0-1)
}
```

**ì˜¤ë¥˜ ì‘ë‹µ:**

```typescript
{
    success: false,
    error: string;
    details?: string;  // ê°œë°œ ëª¨ë“œì—ì„œë§Œ
}
```

**ì˜ˆì œ:**

```javascript
fetch('/api/manual-chat', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        question: 'SessionSDKì—ì„œ ì„¸ì…˜ì„ ìƒì„±í•˜ëŠ” ë°©ë²•ì€?'
    })
})
.then(res => res.json())
.then(data => {
    console.log('ë‹µë³€:', data.answer);
    console.log('ì°¸ì¡°:', data.sources);
});
```

##### `POST /api/ai/generate-code`

AI ì½”ë“œ ìƒì„±ì„ ìš”ì²­í•©ë‹ˆë‹¤.

**ìš”ì²­:**

```typescript
{
    request: string;  // ì½”ë“œ ìƒì„± ìš”ì²­
}
```

**ì‘ë‹µ:**

```typescript
{
    success: true,
    code: string;          // ìƒì„±ëœ ì½”ë“œ
    language: string;      // ì–¸ì–´ (ì˜ˆ: "javascript")
    explanation: string;   // ì„¤ëª…
}
```

**ì˜ˆì œ:**

```javascript
fetch('/api/ai/generate-code', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        request: 'SessionSDKë¡œ ì„¼ì„œ ì—°ê²°í•˜ëŠ” í•¨ìˆ˜ ì‘ì„±í•´ì¤˜'
    })
})
.then(res => res.json())
.then(data => {
    console.log('ìƒì„±ëœ ì½”ë“œ:', data.code);
});
```

##### `POST /api/ai/debug-help`

AI ë””ë²„ê¹… ë„ì›€ì„ ìš”ì²­í•©ë‹ˆë‹¤.

**ìš”ì²­:**

```typescript
{
    errorDescription: string;  // ì˜¤ë¥˜ ì„¤ëª…
    codeSnippet?: string;      // ë¬¸ì œê°€ ìˆëŠ” ì½”ë“œ (ì„ íƒ)
}
```

**ì‘ë‹µ:**

```typescript
{
    success: true,
    diagnosis: string;       // ë¬¸ì œ ì§„ë‹¨
    solution: string;        // í•´ê²° ë°©ë²•
    fixedCode?: string;      // ìˆ˜ì •ëœ ì½”ë“œ (ì œê³µëœ ê²½ìš°)
}
```

**ì˜ˆì œ:**

```javascript
fetch('/api/ai/debug-help', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        errorDescription: 'sessionCodeê°€ undefinedë¡œ ë‚˜ì™€ìš”',
        codeSnippet: `
            sdk.on('session-created', (event) => {
                console.log(event.sessionCode); // undefined
            });
        `
    })
})
.then(res => res.json())
.then(data => {
    console.log('ì§„ë‹¨:', data.diagnosis);
    console.log('í•´ê²°:', data.solution);
});
```

##### `GET /api/ai/health`

AI ì„œë¹„ìŠ¤ ìƒíƒœë¥¼ í™•ì¸í•©ë‹ˆë‹¤.

**ì‘ë‹µ:**

```typescript
{
    success: boolean;
    status: string;       // "ready", "not_initialized", "error"
    message: string;
    details?: object;
}
```

**ì˜ˆì œ:**

```javascript
fetch('/api/ai/health')
    .then(res => res.json())
    .then(data => {
        if (data.status === 'ready') {
            console.log('âœ… AI ì„œë¹„ìŠ¤ ì •ìƒ');
        } else {
            console.warn('âš ï¸ AI ì„œë¹„ìŠ¤:', data.message);
        }
    });
```

#### 8.5.3 Interactive Game Generator API

##### `POST /api/start-game-session`

ëŒ€í™”í˜• ê²Œì„ ìƒì„± ì„¸ì…˜ì„ ì‹œì‘í•©ë‹ˆë‹¤.

**ì‘ë‹µ:**

```typescript
{
    success: true,
    sessionId: string;
    message: string;
}
```

**ì˜ˆì œ:**

```javascript
fetch('/api/start-game-session', { method: 'POST' })
    .then(res => res.json())
    .then(data => {
        console.log('ì„¸ì…˜ ID:', data.sessionId);
        localStorage.setItem('gameGenSessionId', data.sessionId);
    });
```

##### `POST /api/game-chat`

ê²Œì„ ìƒì„± ëŒ€í™”ë¥¼ ì§„í–‰í•©ë‹ˆë‹¤.

**ìš”ì²­:**

```typescript
{
    sessionId: string;
    message: string;
}
```

**ì‘ë‹µ:**

```typescript
{
    success: true,
    reply: string;
    stage: string;         // "initial", "details", "mechanics", "confirmation"
    ready: boolean;        // ìƒì„± ì¤€ë¹„ ì™„ë£Œ ì—¬ë¶€
    requirements?: object; // ìˆ˜ì§‘ëœ ìš”êµ¬ì‚¬í•­
}
```

**ì˜ˆì œ:**

```javascript
fetch('/api/game-chat', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        sessionId: sessionId,
        message: 'ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ì„œ ê³µì„ êµ´ë¦¬ëŠ” ê²Œì„'
    })
})
.then(res => res.json())
.then(data => {
    console.log('AI:', data.reply);
    console.log('ë‹¨ê³„:', data.stage);

    if (data.ready) {
        showGenerateButton();
    }
});
```

##### `POST /api/finalize-game`

ìµœì¢… ê²Œì„ì„ ìƒì„±í•©ë‹ˆë‹¤.

**ìš”ì²­:**

```typescript
{
    sessionId: string;
}
```

**ì‘ë‹µ:**

```typescript
{
    success: true,
    gameId: string;
    gamePath: string;
    message: string;
    validationScore: number;  // 0-100
}
```

**ì˜ˆì œ:**

```javascript
fetch('/api/finalize-game', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ sessionId })
})
.then(res => res.json())
.then(data => {
    console.log(`âœ… ê²Œì„ ìƒì„± ì™„ë£Œ: ${data.gameId}`);
    console.log(`ğŸ“Š ê²€ì¦ ì ìˆ˜: ${data.validationScore}/100`);
    window.location.href = data.gamePath;
});
```

##### `GET /api/download-game/:gameId`

ìƒì„±ëœ ê²Œì„ì„ ZIP íŒŒì¼ë¡œ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤.

**íŒŒë¼ë¯¸í„°:**

| ì´ë¦„ | ìœ„ì¹˜ | íƒ€ì… | ì„¤ëª… |
|------|------|------|------|
| `gameId` | path | string | ê²Œì„ ID |

**ì‘ë‹µ:** ZIP íŒŒì¼ (application/zip)

**ì˜ˆì œ:**

```javascript
// ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„±
const downloadUrl = `/api/download-game/${gameId}`;
const a = document.createElement('a');
a.href = downloadUrl;
a.download = `${gameId}.zip`;
a.click();
```

#### 8.5.4 Game Maintenance API

##### `POST /api/maintenance/report-bug`

ê²Œì„ ë²„ê·¸ë¥¼ ë¦¬í¬íŠ¸í•˜ê³  ìë™ ìˆ˜ì •ì„ ìš”ì²­í•©ë‹ˆë‹¤.

**ìš”ì²­:**

```typescript
{
    gameId: string;
    bugDescription: string;
    reproductionSteps?: string;
}
```

**ì‘ë‹µ:**

```typescript
{
    success: true,
    message: string;
    fixApplied: boolean;
    newVersion: string;       // ì˜ˆ: "v1.1"
}
```

**ì˜ˆì œ:**

```javascript
fetch('/api/maintenance/report-bug', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
        gameId: 'my-game-1696234567890',
        bugDescription: 'ê³µì´ íŒ¨ë“¤ì— ë¶™ì–´ìˆì–´ì„œ ë–¨ì–´ì§€ì§€ ì•Šì•„ìš”',
        reproductionSteps: 'ê²Œì„ ì‹œì‘ í›„ ì¦‰ì‹œ ë°œìƒí•©ë‹ˆë‹¤'
    })
})
.then(res => res.json())
.then(data => {
    if (data.fixApplied) {
        alert(`ë²„ê·¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤! (${data.newVersion})`);
        location.reload(); // í˜ì´ì§€ ìƒˆë¡œê³ ì¹¨
    }
});
```

##### `POST /api/maintenance/add-feature`

ê²Œì„ì— ìƒˆë¡œìš´ ê¸°ëŠ¥ì„ ì¶”ê°€í•©ë‹ˆë‹¤.

**ìš”ì²­:**

```typescript
{
    gameId: string;
    featureRequest: string;
}
```

**ì‘ë‹µ:**

```typescript
{
    success: true,
    message: string;
    newVersion: string;
}
```

##### `GET /api/maintenance/session/:gameId`

ê²Œì„ì˜ ìœ ì§€ë³´ìˆ˜ ì„¸ì…˜ ì •ë³´ë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**ì‘ë‹µ:**

```typescript
{
    success: true,
    session: {
        gameId: string;
        createdAt: string;
        lastModified: string;
        version: string;
        modifications: number;
    }
}
```

##### `GET /api/maintenance/history/:gameId`

ê²Œì„ì˜ ìˆ˜ì • ì´ë ¥ì„ ì¡°íšŒí•©ë‹ˆë‹¤.

**ì‘ë‹µ:**

```typescript
{
    success: true,
    history: Array<{
        timestamp: string;
        type: string;        // "bug_fix", "feature_add"
        description: string;
        version: string;
    }>
}
```

#### 8.5.5 Developer Routes API

Developer Centerì˜ ë¬¸ì„œ ë° ë§¤ë‰´ì–¼ APIì…ë‹ˆë‹¤.

##### `GET /developer`

Developer Center ë©”ì¸ í˜ì´ì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

##### `GET /developer/docs`

ë¬¸ì„œ ë£¨íŠ¸ í˜ì´ì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

##### `GET /developer/docs/:category`

íŠ¹ì • ì¹´í…Œê³ ë¦¬ì˜ ë¬¸ì„œë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

**íŒŒë¼ë¯¸í„°:**

| ì´ë¦„ | ìœ„ì¹˜ | íƒ€ì… | ì„¤ëª… |
|------|------|------|------|
| `category` | path | string | ë¬¸ì„œ ì¹´í…Œê³ ë¦¬ (ì˜ˆ: "getting-started") |

##### `GET /developer/docs/:category/:doc`

íŠ¹ì • ë¬¸ì„œë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.

**ì˜ˆì œ:**

```
/developer/docs/api-reference/session-sdk
â†’ docs/api-reference/session-sdk.md ë¬¸ì„œ í‘œì‹œ
```

---

### 8.6 ë°ì´í„° êµ¬ì¡° ë° íƒ€ì… ì •ì˜

ì´ ì„¹ì…˜ì—ì„œëŠ” ì‹œìŠ¤í…œ ì „ë°˜ì—ì„œ ì‚¬ìš©ë˜ëŠ” ë°ì´í„° êµ¬ì¡°ë¥¼ TypeScript ì¸í„°í˜ì´ìŠ¤ë¡œ ì •ì˜í•©ë‹ˆë‹¤.

#### 8.6.1 ì„¸ì…˜ ê´€ë ¨ íƒ€ì…

```typescript
// ì„¸ì…˜ ì •ë³´
interface Session {
    id: string;              // ì„¸ì…˜ ê³ ìœ  ID (ì˜ˆ: "tilt-maze_A1B2_1696234567890")
    code: string;            // 4ìë¦¬ ì„¸ì…˜ ì½”ë“œ (ì˜ˆ: "A1B2")
    gameId: string;          // ê²Œì„ ID
    gameType: 'solo' | 'dual' | 'multi';
    host: {
        socketId: string;    // Socket.IO ID
        ip: string;          // IP ì£¼ì†Œ
        connectedAt: number; // ì—°ê²° ì‹œê° (timestamp)
    };
    sensors: Map<string, SensorInfo>;
    state: 'waiting' | 'ready' | 'playing' | 'finished';
    createdAt: number;
    lastActivity: number;
    maxSensors: number;      // ìµœëŒ€ ì„¼ì„œ ìˆ˜
    startedAt?: number;      // ê²Œì„ ì‹œì‘ ì‹œê° (playing ìƒíƒœì¼ ë•Œ)
}

// ì„¼ì„œ ì •ë³´
interface SensorInfo {
    id: string;              // ì„¼ì„œ ID (ì˜ˆ: "sensor1", "player1")
    socketId: string;
    ip: string;
    deviceInfo: {
        userAgent: string;
        platform: string;
        screenSize: string;
        timestamp: number;
        [key: string]: any;  // ì»¤ìŠ¤í…€ í•„ë“œ
    };
    connectedAt: number;
    lastDataReceived: number;
    isActive: boolean;
}

// ì„¼ì„œ ì—°ê²° ì‘ë‹µ
interface SensorConnection {
    sessionId: string;
    sensorId: string;
    connectedSensors: number;
    maxSensors: number;
    isReady: boolean;
}
```

#### 8.6.2 ì„¼ì„œ ë°ì´í„° íƒ€ì…

```typescript
// ì„¼ì„œ ë°ì´í„° (í´ë¼ì´ì–¸íŠ¸ â†’ ì„œë²„)
interface SensorDataPayload {
    acceleration?: {
        x: number;  // m/sÂ²
        y: number;
        z: number;
    };
    rotationRate?: {
        alpha: number;  // deg/s (Zì¶• íšŒì „)
        beta: number;   // deg/s (Xì¶• íšŒì „)
        gamma: number;  // deg/s (Yì¶• íšŒì „)
    };
    orientation?: {
        alpha: number;  // 0-360Â° (ë‚˜ì¹¨ë°˜ ë°©í–¥)
        beta: number;   // -180~180Â° (ì•ë’¤ ê¸°ìš¸ê¸°)
        gamma: number;  // -90~90Â° (ì¢Œìš° ê¸°ìš¸ê¸°)
    };
    timestamp?: number;
    [key: string]: any;  // ì»¤ìŠ¤í…€ ë°ì´í„°
}

// ì„¼ì„œ ë°ì´í„° ì´ë²¤íŠ¸ (ì„œë²„ â†’ ê²Œì„)
interface SensorDataEvent {
    sensorId: string;
    gameType: 'solo' | 'dual' | 'multi';
    data: SensorDataPayload;
    timestamp: number;
}
```

#### 8.6.3 ê²Œì„ ë©”íƒ€ë°ì´í„° íƒ€ì…

```typescript
// ê²Œì„ ì •ë³´
interface Game {
    id: string;              // ê²Œì„ ê³ ìœ  ID
    title: string;           // ê²Œì„ ì œëª©
    type: 'solo' | 'dual' | 'multi';
    path: string;            // ê²Œì„ ê²½ë¡œ (ì˜ˆ: "/games/tilt-maze")
    description?: string;    // ê²Œì„ ì„¤ëª…
    thumbnail?: string;      // ì¸ë„¤ì¼ ì´ë¯¸ì§€ URL
    maxPlayers: number;
    requiredSensors: number;
    difficulty?: 'easy' | 'medium' | 'hard';
    tags?: string[];
    version?: string;
    author?: string;
    createdAt?: string;
}

// game.json íŒŒì¼ êµ¬ì¡°
interface GameMetadata {
    title: string;
    type: 'solo' | 'dual' | 'multi';
    description?: string;
    thumbnail?: string;
    difficulty?: 'easy' | 'medium' | 'hard';
    tags?: string[];
    version?: string;
    author?: string;
    // ì»¤ìŠ¤í…€ í•„ë“œ í—ˆìš©
    [key: string]: any;
}
```

#### 8.6.4 AI ê´€ë ¨ íƒ€ì…

```typescript
// AI ì±—ë´‡ ìš”ì²­
interface AIChatRequest {
    question: string;
}

// AI ì±—ë´‡ ì‘ë‹µ
interface AIChatResponse {
    success: boolean;
    answer?: string;
    sources?: string[];      // ì°¸ì¡° ë¬¸ì„œ ëª©ë¡
    confidence?: number;     // 0-1
    error?: string;
    details?: string;        // ê°œë°œ ëª¨ë“œ ì „ìš©
}

// ì½”ë“œ ìƒì„± ìš”ì²­
interface CodeGenerationRequest {
    request: string;
}

// ì½”ë“œ ìƒì„± ì‘ë‹µ
interface CodeGenerationResponse {
    success: boolean;
    code?: string;
    language?: string;
    explanation?: string;
    error?: string;
}

// ë””ë²„ê¹… ë„ì›€ ìš”ì²­
interface DebugHelpRequest {
    errorDescription: string;
    codeSnippet?: string;
}

// ë””ë²„ê¹… ë„ì›€ ì‘ë‹µ
interface DebugHelpResponse {
    success: boolean;
    diagnosis?: string;
    solution?: string;
    fixedCode?: string;
    error?: string;
}
```

#### 8.6.5 ê²Œì„ ìƒì„± ê´€ë ¨ íƒ€ì…

```typescript
// ê²Œì„ ìƒì„± ì„¸ì…˜
interface GameGenerationSession {
    sessionId: string;
    stage: 'initial' | 'details' | 'mechanics' | 'confirmation';
    conversationHistory: Array<{
        role: 'user' | 'assistant';
        content: string;
        timestamp: number;
    }>;
    requirements: {
        gameIdea?: string;
        genre?: string;
        theme?: string;
        sensorControl?: string;
        gameType?: 'solo' | 'dual' | 'multi';
        difficulty?: 'easy' | 'medium' | 'hard';
        additionalFeatures?: string[];
    };
    createdAt: number;
    lastActivity: number;
}

// ê²Œì„ ìƒì„± ì™„ë£Œ ì‘ë‹µ
interface GameGenerationResult {
    success: boolean;
    gameId?: string;
    gamePath?: string;
    message?: string;
    validationScore?: number;  // 0-100
    error?: string;
}

// ê²Œì„ ìœ ì§€ë³´ìˆ˜ ì„¸ì…˜
interface MaintenanceSession {
    gameId: string;
    conversationHistory: Array<{
        role: 'user' | 'assistant';
        content: string;
        timestamp: number;
    }>;
    generatedCode: string;
    testResults: object;
    version: string;           // ì˜ˆ: "v1.0", "v1.1"
    createdAt: number;
    lastModified: number;
    expiresAt: number;         // 30ë¶„ íƒ€ì„ì•„ì›ƒ
}
```

#### 8.6.6 ì„œë²„ í†µê³„ íƒ€ì…

```typescript
// ê²Œì„ ìŠ¤ìºë„ˆ í†µê³„
interface GameScannerStats {
    totalGames: number;
    activeGames: number;
    lastScan: string;         // ISO 8601 ë‚ ì§œ
    gamesByType: {
        solo: number;
        dual: number;
        multi: number;
    };
}

// ì„¸ì…˜ ë§¤ë‹ˆì € í†µê³„
interface SessionManagerStats {
    activeSessions: number;
    totalSessionsCreated: number;
    connectedSensors: number;
    sessionsByState: {
        waiting: number;
        ready: number;
        playing: number;
        finished: number;
    };
}

// AI ì„œë¹„ìŠ¤ ìƒíƒœ
interface AIServiceHealth {
    success: boolean;
    status: 'ready' | 'not_initialized' | 'error';
    message: string;
    details?: {
        openaiConnected: boolean;
        supabaseConnected: boolean;
        documentsEmbedded: number;
        lastHealthCheck: string;
    };
}
```

---

### 8.7 ì—ëŸ¬ ì½”ë“œ ë° ì²˜ë¦¬

#### 8.7.1 ì—ëŸ¬ ë¶„ë¥˜

Sensor Game Hub v6.0ì€ ë‹¤ìŒê³¼ ê°™ì€ ì—ëŸ¬ ì¹´í…Œê³ ë¦¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:

| ì¹´í…Œê³ ë¦¬ | HTTP ì½”ë“œ | ì ‘ë‘ì‚¬ | ì„¤ëª… |
|---------|----------|--------|------|
| ì—°ê²° ì˜¤ë¥˜ | 503 | `CONN_` | Socket.IO ì—°ê²° ê´€ë ¨ |
| ì„¸ì…˜ ì˜¤ë¥˜ | 404, 400 | `SESS_` | ì„¸ì…˜ ìƒì„±/ì¡°íšŒ ê´€ë ¨ |
| ì„¼ì„œ ì˜¤ë¥˜ | 400 | `SENS_` | ì„¼ì„œ ì—°ê²°/ë°ì´í„° ê´€ë ¨ |
| AI ì˜¤ë¥˜ | 500, 503 | `AI_` | AI ì„œë¹„ìŠ¤ ê´€ë ¨ |
| ê¶Œí•œ ì˜¤ë¥˜ | 403 | `AUTH_` | ê¶Œí•œ ë° ì¸ì¦ ê´€ë ¨ |
| ì…ë ¥ ì˜¤ë¥˜ | 400 | `INPUT_` | ì˜ëª»ëœ ì…ë ¥ ë°ì´í„° |

#### 8.7.2 ì£¼ìš” ì—ëŸ¬ ì½”ë“œ

```typescript
enum ErrorCode {
    // ì—°ê²° ì˜¤ë¥˜
    CONN_SERVER_UNAVAILABLE = 'CONN_001',
    CONN_TIMEOUT = 'CONN_002',
    CONN_CLOSED = 'CONN_003',

    // ì„¸ì…˜ ì˜¤ë¥˜
    SESS_NOT_FOUND = 'SESS_001',
    SESS_ALREADY_EXISTS = 'SESS_002',
    SESS_EXPIRED = 'SESS_003',
    SESS_FULL = 'SESS_004',
    SESS_INVALID_STATE = 'SESS_005',

    // ì„¼ì„œ ì˜¤ë¥˜
    SENS_NOT_SUPPORTED = 'SENS_001',
    SENS_PERMISSION_DENIED = 'SENS_002',
    SENS_NOT_CONNECTED = 'SENS_003',
    SENS_DUPLICATE_ID = 'SENS_004',
    SENS_MAX_EXCEEDED = 'SENS_005',

    // AI ì˜¤ë¥˜
    AI_NOT_INITIALIZED = 'AI_001',
    AI_SERVICE_UNAVAILABLE = 'AI_002',
    AI_EMBEDDING_FAILED = 'AI_003',
    AI_QUERY_FAILED = 'AI_004',
    AI_GENERATION_FAILED = 'AI_005',

    // ì…ë ¥ ì˜¤ë¥˜
    INPUT_INVALID_FORMAT = 'INPUT_001',
    INPUT_MISSING_REQUIRED = 'INPUT_002',
    INPUT_OUT_OF_RANGE = 'INPUT_003',

    // ê¶Œí•œ ì˜¤ë¥˜
    AUTH_UNAUTHORIZED = 'AUTH_001',
    AUTH_FORBIDDEN = 'AUTH_002'
}
```

#### 8.7.3 ì—ëŸ¬ ì‘ë‹µ êµ¬ì¡°

ëª¨ë“  APIëŠ” í†µì¼ëœ ì—ëŸ¬ ì‘ë‹µ í˜•ì‹ì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

```typescript
interface ErrorResponse {
    success: false;
    error: string;           // ì‚¬ìš©ì ì¹œí™”ì  ì—ëŸ¬ ë©”ì‹œì§€
    code?: ErrorCode;        // ì—ëŸ¬ ì½”ë“œ (ì„ íƒ)
    details?: string;        // ìƒì„¸ ì •ë³´ (ê°œë°œ ëª¨ë“œ ì „ìš©)
    timestamp?: number;      // ì—ëŸ¬ ë°œìƒ ì‹œê°
}
```

**ì˜ˆì œ:**

```json
{
  "success": false,
  "error": "ì„¸ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: A1B2",
  "code": "SESS_001",
  "details": "Session with code 'A1B2' does not exist or has expired",
  "timestamp": 1696234567890
}
```

#### 8.7.4 í´ë¼ì´ì–¸íŠ¸ ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´

##### ì„¸ì…˜ ìƒì„± ì˜¤ë¥˜ ì²˜ë¦¬

```javascript
sdk.on('connected', async () => {
    try {
        const session = await sdk.createSession();
        displaySessionInfo(session);
    } catch (error) {
        if (error.message.includes('ì—°ê²°ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤')) {
            console.error('âŒ ì—°ê²° ì˜¤ë¥˜:', error);
            showRetryButton();
        } else {
            console.error('âŒ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜:', error);
            showErrorMessage(error.message);
        }
    }
});
```

##### ì„¼ì„œ ì—°ê²° ì˜¤ë¥˜ ì²˜ë¦¬

```javascript
document.getElementById('connect-btn').addEventListener('click', async () => {
    const code = document.getElementById('code-input').value;

    try {
        const connection = await sdk.connectSensor(code);
        console.log('âœ… ì—°ê²° ì„±ê³µ:', connection);
        startSensorCollection();

    } catch (error) {
        if (error.message.includes('ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤')) {
            alert('ì„¸ì…˜ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ í™•ì¸í•´ì£¼ì„¸ìš”.');
        } else if (error.message.includes('ìµœëŒ€ ì„¼ì„œ ìˆ˜ ì´ˆê³¼')) {
            alert('ì´ë¯¸ ìµœëŒ€ ì¸ì›ì´ ì ‘ì†í–ˆìŠµë‹ˆë‹¤.');
        } else if (error.message.includes('ë§Œë£Œ')) {
            alert('ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤. ìƒˆ ê²Œì„ì„ ì‹œì‘í•´ì£¼ì„¸ìš”.');
        } else {
            alert('ì—°ê²° ì‹¤íŒ¨: ' + error.message);
        }
    }
});
```

##### ì„¼ì„œ ê¶Œí•œ ì˜¤ë¥˜ ì²˜ë¦¬

```javascript
const collector = new SensorCollector();

try {
    await collector.start();
    console.log('ğŸ“± ì„¼ì„œ í™œì„±í™”');

} catch (error) {
    if (error.message.includes('ê¶Œí•œ')) {
        // iOS: ì‚¬ìš©ìê°€ ê¶Œí•œì„ ê±°ë¶€í•¨
        showPermissionInstructions();
    } else if (error.message.includes('ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤')) {
        // ì„¼ì„œ ë¯¸ì§€ì› ê¸°ê¸°
        showUnsupportedMessage();
    } else {
        console.error('âŒ ì„¼ì„œ ì˜¤ë¥˜:', error);
    }
}

function showPermissionInstructions() {
    document.getElementById('permission-modal').style.display = 'block';
    document.getElementById('permission-message').innerHTML = `
        <h3>ì„¼ì„œ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤</h3>
        <p>iOS Safariì—ì„œëŠ” ì²˜ìŒ ì„¼ì„œë¥¼ ì‚¬ìš©í•  ë•Œ ê¶Œí•œì„ ìš”ì²­í•©ë‹ˆë‹¤.</p>
        <ol>
            <li>ì„¤ì • > Safarië¡œ ì´ë™</li>
            <li>"ëª¨ì…˜ ë° ë°©í–¥ ì ‘ê·¼" í™œì„±í™”</li>
            <li>í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ì„¸ìš”</li>
        </ol>
    `;
}
```

##### AI API ì˜¤ë¥˜ ì²˜ë¦¬

```javascript
async function askAI(question) {
    try {
        const response = await fetch('/api/manual-chat', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ question })
        });

        const data = await response.json();

        if (!data.success) {
            throw new Error(data.error);
        }

        return data.answer;

    } catch (error) {
        if (error.message.includes('ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤')) {
            return 'ì£„ì†¡í•©ë‹ˆë‹¤. AI ì„œë¹„ìŠ¤ê°€ ì¤€ë¹„ ì¤‘ì…ë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
        } else if (error.message.includes('ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤')) {
            return 'ì£„ì†¡í•©ë‹ˆë‹¤. AI ì„œë¹„ìŠ¤ì— ì¼ì‹œì ì¸ ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤.';
        } else {
            return 'ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message;
        }
    }
}
```

#### 8.7.5 ì„œë²„ ì—ëŸ¬ í•¸ë“¤ë§ íŒ¨í„´

**ì„œë²„ ì½”ë“œì—ì„œì˜ ì—ëŸ¬ ì²˜ë¦¬ ì˜ˆì œ** (`server/index.js` ì°¸ê³ ):

```javascript
// HTTP API ì—ëŸ¬ ì²˜ë¦¬
app.post('/api/manual-chat', async (req, res) => {
    try {
        if (!this.aiAssistant) {
            return res.status(503).json({
                success: false,
                error: 'AI Assistantê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.',
                code: 'AI_001'
            });
        }

        const { question } = req.body;

        if (!question || question.trim() === '') {
            return res.status(400).json({
                success: false,
                error: 'ìœ íš¨í•œ ì§ˆë¬¸ì´ ì œê³µë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.',
                code: 'INPUT_002'
            });
        }

        const result = await this.aiAssistant.query(question.trim());
        res.json(result);

    } catch (error) {
        console.error('âŒ AI ì§ˆë¬¸ ì²˜ë¦¬ ì‹¤íŒ¨:', error);

        let errorMessage = 'ì£„ì†¡í•©ë‹ˆë‹¤. ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.';
        let statusCode = 500;

        if (error.message.includes('network') || error.message.includes('timeout')) {
            errorMessage = 'ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.';
            statusCode = 503;
        }

        res.status(statusCode).json({
            success: false,
            error: errorMessage,
            details: process.env.NODE_ENV === 'development' ? error.message : undefined
        });
    }
});

// Socket.IO ì—ëŸ¬ ì²˜ë¦¬
socket.on('connect-sensor', (data, callback) => {
    try {
        const connection = this.sessionManager.connectSensor(
            data.sessionCode,
            socket.id,
            socket.handshake.address,
            data.deviceInfo
        );

        callback({ success: true, connection });

    } catch (error) {
        console.error('âŒ ì„¼ì„œ ì—°ê²° ì‹¤íŒ¨:', error);

        callback({
            success: false,
            error: error.message,
            code: error.message.includes('ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤') ? 'SESS_001' :
                  error.message.includes('ìµœëŒ€ ì„¼ì„œ ìˆ˜ ì´ˆê³¼') ? 'SENS_005' :
                  'SENS_003'
        });
    }
});
```

---

### 8.8 ì‹¤ì „ ì˜ˆì œ ëª¨ìŒ

ì´ ì„¹ì…˜ì—ì„œëŠ” ì‹¤ì œ ê²Œì„ ê°œë°œ ì‹œë‚˜ë¦¬ì˜¤ë³„ ì™„ì „í•œ ì˜ˆì œë¥¼ ì œê³µí•©ë‹ˆë‹¤.

#### 8.8.1 ì†”ë¡œ ê²Œì„ (1 ì„¼ì„œ) - ê³µ êµ´ë¦¬ê¸°

**ê²Œì„ ê°œìš”**: ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ ê³µì„ ì¡°ì‘í•˜ì—¬ ëª©í‘œ ì§€ì ì— ë„ë‹¬í•˜ëŠ” ê²Œì„

**ì™„ì „í•œ êµ¬í˜„**:

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ball Roll Game</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/qrcode/build/qrcode.min.js"></script>
    <script src="/js/SessionSDK.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: Arial, sans-serif;
            background: #0f172a;
            color: #f8fafc;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        #game-container {
            text-align: center;
            max-width: 900px;
            padding: 20px;
        }
        #session-info {
            background: rgba(59, 130, 246, 0.1);
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }
        #session-code {
            font-size: 48px;
            font-weight: bold;
            color: #3b82f6;
            letter-spacing: 8px;
            margin: 10px 0;
        }
        #qr-container {
            margin: 20px 0;
        }
        canvas {
            border: 2px solid #3b82f6;
            border-radius: 8px;
            background: #1e293b;
            display: block;
            margin: 20px auto;
        }
        #status {
            font-size: 18px;
            margin: 10px 0;
        }
        .sensor-connected { color: #22c55e; }
        .waiting { color: #f59e0b; }
        .playing { color: #3b82f6; }
        #score, #time {
            display: inline-block;
            margin: 0 20px;
            font-size: 24px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div id="game-container">
        <h1>ğŸ® Ball Roll Game</h1>

        <div id="session-info">
            <div id="status" class="waiting">â³ ì„¼ì„œ ì—°ê²° ëŒ€ê¸° ì¤‘...</div>
            <div>ì„¸ì…˜ ì½”ë“œ:</div>
            <div id="session-code">----</div>
            <div id="qr-container"></div>
        </div>

        <div>
            <span id="score">ì ìˆ˜: 0</span>
            <span id="time">ì‹œê°„: 60</span>
        </div>

        <canvas id="canvas" width="800" height="600"></canvas>
    </div>

    <script>
        // ========== SDK ì´ˆê¸°í™” ==========
        const sdk = new SessionSDK({
            gameId: 'ball-roll',
            gameType: 'solo',
            debug: true
        });

        // ========== ê²Œì„ ìƒíƒœ ==========
        const gameState = {
            ball: {
                x: 400,
                y: 300,
                radius: 20,
                vx: 0,
                vy: 0,
                color: '#3b82f6'
            },
            targets: [],
            obstacles: [],
            score: 0,
            timeLeft: 60,
            isPlaying: false,
            sensorConnected: false
        };

        // Canvas ì„¤ì •
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // ========== 1ï¸âƒ£ ì„œë²„ ì—°ê²° ë° ì„¸ì…˜ ìƒì„± ==========
        sdk.on('connected', async () => {
            console.log('âœ… ì„œë²„ ì—°ê²° ì™„ë£Œ');

            try {
                const session = await sdk.createSession();
                console.log('âœ… ì„¸ì…˜ ìƒì„±:', session);
            } catch (error) {
                console.error('âŒ ì„¸ì…˜ ìƒì„± ì‹¤íŒ¨:', error);
                document.getElementById('status').textContent = 'âŒ ì„¸ì…˜ ìƒì„± ì‹¤íŒ¨';
            }
        });

        // ========== 2ï¸âƒ£ ì„¸ì…˜ ìƒì„± ì™„ë£Œ ì²˜ë¦¬ ==========
        sdk.on('session-created', (event) => {
            const session = event.detail || event;
            console.log('âœ… ì„¸ì…˜ ì½”ë“œ:', session.sessionCode);

            // ì„¸ì…˜ ì½”ë“œ í‘œì‹œ
            document.getElementById('session-code').textContent = session.sessionCode;

            // QR ì½”ë“œ ìƒì„±
            const qrUrl = `${window.location.origin}/sensor.html?code=${session.sessionCode}`;
            QRCodeGenerator.generateElement(qrUrl, 250).then(qr => {
                document.getElementById('qr-container').appendChild(qr);
            });

            document.getElementById('status').textContent = 'ğŸ“± ëª¨ë°”ì¼ë¡œ QR ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì„¸ìš”';
        });

        // ========== 3ï¸âƒ£ ì„¼ì„œ ì—°ê²° ì•Œë¦¼ ==========
        sdk.on('sensor-connected', (event) => {
            const conn = event.detail || event;
            console.log('ğŸ“± ì„¼ì„œ ì—°ê²°:', conn);

            gameState.sensorConnected = true;
            document.getElementById('status').className = 'sensor-connected';
            document.getElementById('status').textContent = 'âœ… ì„¼ì„œ ì—°ê²°ë¨ - ê²Œì„ ì¤€ë¹„ ì¤‘...';
        });

        // ========== 4ï¸âƒ£ ê²Œì„ ì¤€ë¹„ ì™„ë£Œ ë° ì‹œì‘ ==========
        sdk.on('game-ready', async () => {
            console.log('ğŸ® ê²Œì„ ì¤€ë¹„ ì™„ë£Œ!');

            // 3ì´ˆ ì¹´ìš´íŠ¸ë‹¤ìš´
            for (let i = 3; i > 0; i--) {
                document.getElementById('status').textContent = `ê²Œì„ ì‹œì‘ ${i}...`;
                await sleep(1000);
            }

            // ê²Œì„ ì‹œì‘
            const gameInfo = await sdk.startGame();
            console.log('ğŸš€ ê²Œì„ ì‹œì‘:', gameInfo);

            gameState.isPlaying = true;
            document.getElementById('status').className = 'playing';
            document.getElementById('status').textContent = 'ğŸ® ê²Œì„ ì§„í–‰ ì¤‘';

            // ê²Œì„ ì´ˆê¸°í™”
            initGame();
            startGameLoop();
            startTimer();
        });

        // ========== 5ï¸âƒ£ ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ ==========
        sdk.on('sensor-data', (event) => {
            const data = event.detail || event;

            if (!gameState.isPlaying) return;

            // ê¸°ìš¸ê¸°ë¡œ ê³µ ê°€ì†ë„ ì œì–´
            const tilt = data.data.orientation;

            // gamma: ì¢Œìš° ê¸°ìš¸ê¸° (-90 ~ 90)
            // beta: ì•ë’¤ ê¸°ìš¸ê¸° (-180 ~ 180)
            const accelerationFactor = 0.15;
            gameState.ball.vx += tilt.gamma * accelerationFactor;
            gameState.ball.vy += tilt.beta * accelerationFactor;

            // ìµœëŒ€ ì†ë„ ì œí•œ
            const maxSpeed = 10;
            gameState.ball.vx = Math.max(-maxSpeed, Math.min(maxSpeed, gameState.ball.vx));
            gameState.ball.vy = Math.max(-maxSpeed, Math.min(maxSpeed, gameState.ball.vy));
        });

        // ========== ê²Œì„ ì´ˆê¸°í™” ==========
        function initGame() {
            // ëª©í‘œ ì§€ì  ìƒì„±
            gameState.targets = [];
            for (let i = 0; i < 5; i++) {
                gameState.targets.push({
                    x: Math.random() * 700 + 50,
                    y: Math.random() * 500 + 50,
                    radius: 30,
                    color: '#22c55e',
                    collected: false
                });
            }

            // ì¥ì• ë¬¼ ìƒì„±
            gameState.obstacles = [];
            for (let i = 0; i < 3; i++) {
                gameState.obstacles.push({
                    x: Math.random() * 700 + 50,
                    y: Math.random() * 500 + 50,
                    radius: 40,
                    color: '#ef4444'
                });
            }

            // ê³µ ì´ˆê¸° ìœ„ì¹˜
            gameState.ball.x = 400;
            gameState.ball.y = 300;
            gameState.ball.vx = 0;
            gameState.ball.vy = 0;
        }

        // ========== ê²Œì„ ë£¨í”„ ==========
        function startGameLoop() {
            function loop() {
                if (!gameState.isPlaying) return;

                update();
                render();

                requestAnimationFrame(loop);
            }

            loop();
        }

        function update() {
            // ê³µ ìœ„ì¹˜ ì—…ë°ì´íŠ¸
            gameState.ball.x += gameState.ball.vx;
            gameState.ball.y += gameState.ball.vy;

            // ë§ˆì°° ì ìš©
            gameState.ball.vx *= 0.98;
            gameState.ball.vy *= 0.98;

            // ë²½ ì¶©ëŒ
            const r = gameState.ball.radius;
            if (gameState.ball.x < r) {
                gameState.ball.x = r;
                gameState.ball.vx *= -0.7;
            }
            if (gameState.ball.x > canvas.width - r) {
                gameState.ball.x = canvas.width - r;
                gameState.ball.vx *= -0.7;
            }
            if (gameState.ball.y < r) {
                gameState.ball.y = r;
                gameState.ball.vy *= -0.7;
            }
            if (gameState.ball.y > canvas.height - r) {
                gameState.ball.y = canvas.height - r;
                gameState.ball.vy *= -0.7;
            }

            // ëª©í‘œ ì¶©ëŒ ê²€ì‚¬
            gameState.targets.forEach(target => {
                if (!target.collected) {
                    const dx = gameState.ball.x - target.x;
                    const dy = gameState.ball.y - target.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    if (distance < gameState.ball.radius + target.radius) {
                        target.collected = true;
                        gameState.score += 10;
                        document.getElementById('score').textContent = `ì ìˆ˜: ${gameState.score}`;
                        playSound('collect');
                    }
                }
            });

            // ì¥ì• ë¬¼ ì¶©ëŒ ê²€ì‚¬
            gameState.obstacles.forEach(obstacle => {
                const dx = gameState.ball.x - obstacle.x;
                const dy = gameState.ball.y - obstacle.y;
                const distance = Math.sqrt(dx * dx + dy * dy);

                if (distance < gameState.ball.radius + obstacle.radius) {
                    // íŠ•ê²¨ë‚˜ê°
                    const angle = Math.atan2(dy, dx);
                    const pushStrength = 2;
                    gameState.ball.vx += Math.cos(angle) * pushStrength;
                    gameState.ball.vy += Math.sin(angle) * pushStrength;

                    gameState.score = Math.max(0, gameState.score - 5);
                    document.getElementById('score').textContent = `ì ìˆ˜: ${gameState.score}`;
                    playSound('hit');
                }
            });

            // ëª¨ë“  ëª©í‘œ ìˆ˜ì§‘ ì™„ë£Œ
            if (gameState.targets.every(t => t.collected)) {
                endGame(true);
            }
        }

        function render() {
            // ë°°ê²½ í´ë¦¬ì–´
            ctx.fillStyle = '#1e293b';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // ëª©í‘œ ê·¸ë¦¬ê¸°
            gameState.targets.forEach(target => {
                if (!target.collected) {
                    ctx.beginPath();
                    ctx.arc(target.x, target.y, target.radius, 0, Math.PI * 2);
                    ctx.fillStyle = target.color;
                    ctx.fill();

                    // í…Œë‘ë¦¬
                    ctx.strokeStyle = '#22c55e';
                    ctx.lineWidth = 3;
                    ctx.stroke();
                }
            });

            // ì¥ì• ë¬¼ ê·¸ë¦¬ê¸°
            gameState.obstacles.forEach(obstacle => {
                ctx.beginPath();
                ctx.arc(obstacle.x, obstacle.y, obstacle.radius, 0, Math.PI * 2);
                ctx.fillStyle = obstacle.color;
                ctx.fill();

                // ê²½ê³  í‘œì‹œ
                ctx.strokeStyle = '#fef08a';
                ctx.lineWidth = 2;
                ctx.stroke();
            });

            // ê³µ ê·¸ë¦¬ê¸°
            ctx.beginPath();
            ctx.arc(gameState.ball.x, gameState.ball.y, gameState.ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = gameState.ball.color;
            ctx.fill();

            // ê³µ í…Œë‘ë¦¬ (ì†ë„ í‘œì‹œ)
            const speed = Math.sqrt(gameState.ball.vx ** 2 + gameState.ball.vy ** 2);
            ctx.strokeStyle = `rgba(255, 255, 255, ${Math.min(speed / 10, 1)})`;
            ctx.lineWidth = 3;
            ctx.stroke();
        }

        // ========== íƒ€ì´ë¨¸ ==========
        function startTimer() {
            const timerInterval = setInterval(() => {
                if (!gameState.isPlaying) {
                    clearInterval(timerInterval);
                    return;
                }

                gameState.timeLeft--;
                document.getElementById('time').textContent = `ì‹œê°„: ${gameState.timeLeft}`;

                if (gameState.timeLeft <= 0) {
                    clearInterval(timerInterval);
                    endGame(false);
                }
            }, 1000);
        }

        // ========== ê²Œì„ ì¢…ë£Œ ==========
        function endGame(won) {
            gameState.isPlaying = false;

            const message = won
                ? `ğŸ‰ ìŠ¹ë¦¬! ìµœì¢… ì ìˆ˜: ${gameState.score}`
                : `â° ì‹œê°„ ì¢…ë£Œ! ìµœì¢… ì ìˆ˜: ${gameState.score}`;

            document.getElementById('status').textContent = message;

            // ìµœì¢… í™”ë©´ ë Œë”ë§
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            ctx.fillStyle = '#fff';
            ctx.font = 'bold 48px Arial';
            ctx.textAlign = 'center';
            ctx.fillText(won ? 'ğŸ‰ ìŠ¹ë¦¬!' : 'â° ì‹œê°„ ì¢…ë£Œ', canvas.width / 2, canvas.height / 2 - 40);

            ctx.font = '36px Arial';
            ctx.fillText(`ìµœì¢… ì ìˆ˜: ${gameState.score}`, canvas.width / 2, canvas.height / 2 + 40);

            // 3ì´ˆ í›„ ì¬ì‹œì‘
            setTimeout(() => {
                if (confirm('ë‹¤ì‹œ í”Œë ˆì´í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                    location.reload();
                }
            }, 3000);
        }

        // ========== ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ ==========
        function sleep(ms) {
            return new Promise(resolve => setTimeout(resolve, ms));
        }

        function playSound(type) {
            // Web Audio APIë¡œ ê°„ë‹¨í•œ íš¨ê³¼ìŒ ìƒì„±
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();

            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);

            if (type === 'collect') {
                oscillator.frequency.value = 800;
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.1);
            } else if (type === 'hit') {
                oscillator.frequency.value = 200;
                oscillator.type = 'sawtooth';
                gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.2);
            }

            oscillator.start();
            oscillator.stop(audioContext.currentTime + 0.2);
        }

        // ========== ì„¼ì„œ ì—°ê²° í•´ì œ ì²˜ë¦¬ ==========
        sdk.on('sensor-disconnected', (event) => {
            const data = event.detail || event;
            console.log('âŒ ì„¼ì„œ ì—°ê²° í•´ì œ:', data);

            gameState.isPlaying = false;
            gameState.sensorConnected = false;

            document.getElementById('status').className = 'waiting';
            document.getElementById('status').textContent = 'âŒ ì„¼ì„œ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤. ì¬ì—°ê²°í•´ì£¼ì„¸ìš”.';

            // ê²Œì„ ì¼ì‹œì •ì§€ íš¨ê³¼
            ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 32px Arial';
            ctx.textAlign = 'center';
            ctx.fillText('â¸ ì¼ì‹œì •ì§€', canvas.width / 2, canvas.height / 2);
        });

        // ========== ì—°ê²° ì˜¤ë¥˜ ì²˜ë¦¬ ==========
        sdk.on('connection-error', (event) => {
            const error = event.detail || event;
            console.error('âŒ ì—°ê²° ì˜¤ë¥˜:', error);

            document.getElementById('status').textContent = 'âŒ ì„œë²„ ì—°ê²° ì˜¤ë¥˜';
        });
    </script>
</body>
</html>
```

ì´ ì˜ˆì œëŠ” ë‹¤ìŒì„ í¬í•¨í•©ë‹ˆë‹¤:
- âœ… ì™„ì „í•œ SessionSDK í†µí•©
- âœ… QR ì½”ë“œ ìƒì„± ë° í‘œì‹œ
- âœ… ì„¼ì„œ ë°ì´í„° ê¸°ë°˜ ë¬¼ë¦¬ ì—”ì§„
- âœ… ì¶©ëŒ ê°ì§€ ë° ì ìˆ˜ ì‹œìŠ¤í…œ
- âœ… íƒ€ì´ë¨¸ ë° ê²Œì„ ì¢…ë£Œ ë¡œì§
- âœ… íš¨ê³¼ìŒ ìƒì„±
- âœ… ì„¼ì„œ ì—°ê²° í•´ì œ ì²˜ë¦¬

#### 8.8.2 ë“€ì–¼ ê²Œì„ (2 ì„¼ì„œ) - í˜‘ë™ í¼ì¦

**ê²Œì„ ê°œìš”**: ë‘ ëª…ì˜ í”Œë ˆì´ì–´ê°€ ê°ì ìŠ¤ë§ˆíŠ¸í°ì„ ì¡°ì‘í•˜ì—¬ í•¨ê»˜ í¼ì¦ì„ í’€ì–´ goalì„ ë‹¬ì„±í•˜ëŠ” í˜‘ë™ ê²Œì„

```javascript
// ===== ë“€ì–¼ ê²Œì„ í•µì‹¬ ë¡œì§ =====
const sdk = new SessionSDK({
    gameId: 'dual-puzzle',
    gameType: 'dual',  // 2ê°œ ì„¼ì„œ í•„ìš”
    debug: true
});

const gameState = {
    player1: { x: 100, y: 300, angle: 0 },
    player2: { x: 700, y: 300, angle: 0 },
    platform: { x: 400, y: 300, angle: 0 },  // ë‘ í”Œë ˆì´ì–´ê°€ í•¨ê»˜ ì¡°ì¢…
    ball: { x: 400, y: 200, vx: 0, vy: 0 },
    sensors: {
        sensor1: null,  // ì™¼ìª½ í”Œë ˆì´ì–´
        sensor2: null   // ì˜¤ë¥¸ìª½ í”Œë ˆì´ì–´
    },
    connectedSensors: 0,
    isPlaying: false
};

// ì„¼ì„œ ì—°ê²° ì•Œë¦¼ (2ê°œ í•„ìš”)
sdk.on('sensor-connected', (event) => {
    const conn = event.detail || event;
    gameState.connectedSensors++;

    console.log(`ğŸ“± ì„¼ì„œ ${gameState.connectedSensors}/2 ì—°ê²°ë¨`);
    document.getElementById('player-count').textContent =
        `${gameState.connectedSensors}/2 í”Œë ˆì´ì–´`;
});

// ê²Œì„ ì¤€ë¹„ (2ê°œ ëª¨ë‘ ì—°ê²° ì‹œ)
sdk.on('game-ready', async () => {
    console.log('ğŸ® ëª¨ë“  í”Œë ˆì´ì–´ ì—°ê²° ì™„ë£Œ!');
    await sdk.startGame();
    gameState.isPlaying = true;
    startGameLoop();
});

// ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ (ê° í”Œë ˆì´ì–´ êµ¬ë¶„)
sdk.on('sensor-data', (event) => {
    const data = event.detail || event;

    if (!gameState.isPlaying) return;

    // ì„¼ì„œ IDë¡œ í”Œë ˆì´ì–´ êµ¬ë¶„
    const sensorId = data.sensorId;  // "sensor1" or "sensor2"
    const tilt = data.data.orientation;

    gameState.sensors[sensorId] = tilt;

    // ë‘ í”Œë ˆì´ì–´ì˜ ê¸°ìš¸ê¸°ë¥¼ í‰ê· ë‚´ì–´ í”Œë«í¼ ì œì–´
    if (gameState.sensors.sensor1 && gameState.sensors.sensor2) {
        const avgGamma = (gameState.sensors.sensor1.gamma + gameState.sensors.sensor2.gamma) / 2;
        gameState.platform.angle = avgGamma;
    }
});

function update() {
    // í”Œë«í¼ ê°ë„ì— ë”°ë¼ ê³µ ì›€ì§ì„
    const gravity = 0.5;
    gameState.ball.vx += Math.sin(gameState.platform.angle * Math.PI / 180) * gravity;
    gameState.ball.vy += gravity;

    gameState.ball.x += gameState.ball.vx;
    gameState.ball.y += gameState.ball.vy;

    // í”Œë«í¼ ì¶©ëŒ ê²€ì‚¬
    if (checkPlatformCollision()) {
        gameState.ball.vy *= -0.8;
    }

    // ëª©í‘œ ë„ë‹¬ ê²€ì‚¬
    if (checkGoalReached()) {
        winGame();
    }
}
```

**ë“€ì–¼ ê²Œì„ íŠ¹ì§•**:
- 2ê°œ ì„¼ì„œ í•„ìˆ˜ (`gameType: 'dual'`)
- `sensor1`, `sensor2`ë¡œ í”Œë ˆì´ì–´ êµ¬ë¶„
- í˜‘ë™ ë©”ì»¤ë‹ˆì¦˜ (í‰ê· , ì¡°í•© ë“±)

#### 8.8.3 ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„ (ìµœëŒ€ 10 ì„¼ì„œ) - ê²½ìŸ ë ˆì´ìŠ¤

**ê²Œì„ ê°œìš”**: ìµœëŒ€ 10ëª…ì´ ë™ì‹œì— ì°¸ì—¬í•˜ì—¬ ë¨¼ì € ê³¨ì— ë„ë‹¬í•˜ëŠ” ê²½ìŸ ê²Œì„

```javascript
// ===== ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„ í•µì‹¬ ë¡œì§ =====
const sdk = new SessionSDK({
    gameId: 'race-game',
    gameType: 'multi',  // ìµœëŒ€ 10ê°œ ì„¼ì„œ
    debug: true
});

const gameState = {
    players: new Map(),  // sensorId -> player data
    isPlaying: false,
    startTime: 0,
    leaderboard: []
};

// í”Œë ˆì´ì–´ ì¶”ê°€ (ë™ì )
sdk.on('sensor-connected', (event) => {
    const conn = event.detail || event;
    const sensorId = conn.sensorId;  // "player1", "player2", ...

    // ìƒˆ í”Œë ˆì´ì–´ ì¶”ê°€
    gameState.players.set(sensorId, {
        id: sensorId,
        x: 100,
        y: 100 + (gameState.players.size * 50),  // ì„¸ë¡œë¡œ ë°°ì¹˜
        progress: 0,  // 0-100%
        speed: 0,
        color: getRandomColor(),
        finished: false
    });

    console.log(`ğŸ‘¤ í”Œë ˆì´ì–´ ${gameState.players.size} ì°¸ê°€!`);
    updatePlayerList();
});

// í”Œë ˆì´ì–´ ì œê±°
sdk.on('sensor-disconnected', (event) => {
    const data = event.detail || event;
    gameState.players.delete(data.sensorId);
    console.log(`ğŸ‘‹ í”Œë ˆì´ì–´ ${data.sensorId} ë‚˜ê°`);
    updatePlayerList();
});

// ê²Œì„ ì‹œì‘ (ìµœì†Œ 2ëª… ì´ìƒì¼ ë•Œ)
sdk.on('game-ready', async () => {
    if (gameState.players.size < 2) {
        console.log('â³ ìµœì†Œ 2ëª… í•„ìš”í•©ë‹ˆë‹¤');
        return;
    }

    await sdk.startGame();
    gameState.isPlaying = true;
    gameState.startTime = Date.now();
    startGameLoop();
});

// ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ (ê° í”Œë ˆì´ì–´ ë…ë¦½ì ìœ¼ë¡œ)
sdk.on('sensor-data', (event) => {
    const data = event.detail || event;

    if (!gameState.isPlaying) return;

    const player = gameState.players.get(data.sensorId);
    if (!player || player.finished) return;

    // ê¸°ìš¸ê¸°ë¡œ ì†ë„ ì œì–´
    const tilt = data.data.orientation;
    player.speed = Math.abs(tilt.beta) * 0.1;  // ì•ìœ¼ë¡œ ê¸°ìš¸ì´ê¸°
    player.progress += player.speed;

    // ëª©í‘œ ë„ë‹¬ ê²€ì‚¬ (100%)
    if (player.progress >= 100) {
        player.finished = true;
        player.finishTime = Date.now() - gameState.startTime;

        gameState.leaderboard.push({
            id: player.id,
            time: player.finishTime,
            rank: gameState.leaderboard.length + 1
        });

        console.log(`ğŸ ${player.id} ì™„ì£¼! (${player.finishTime}ms)`);

        // ëª¨ë‘ ì™„ì£¼í–ˆëŠ”ì§€ í™•ì¸
        if (gameState.leaderboard.length === gameState.players.size) {
            endGame();
        }
    }
});

function render() {
    // ëª¨ë“  í”Œë ˆì´ì–´ ê·¸ë¦¬ê¸°
    for (const [id, player] of gameState.players) {
        const x = player.progress * 7;  // 0-700px
        const y = player.y;

        // í”Œë ˆì´ì–´ ì›
        ctx.beginPath();
        ctx.arc(x, y, 20, 0, Math.PI * 2);
        ctx.fillStyle = player.color;
        ctx.fill();

        // í”Œë ˆì´ì–´ ID
        ctx.fillStyle = '#fff';
        ctx.font = '14px Arial';
        ctx.textAlign = 'center';
        ctx.fillText(player.id, x, y - 30);

        // ì§„í–‰ë¥  ë°”
        ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
        ctx.fillRect(0, y + 30, 700, 5);
        ctx.fillStyle = player.color;
        ctx.fillRect(0, y + 30, player.progress * 7, 5);
    }

    // ë¦¬ë”ë³´ë“œ
    displayLeaderboard();
}

function displayLeaderboard() {
    const sortedBoard = [...gameState.leaderboard].sort((a, b) => a.time - b.time);

    ctx.fillStyle = 'rgba(0, 0, 0, 0.8)';
    ctx.fillRect(600, 10, 190, 200);

    ctx.fillStyle = '#fff';
    ctx.font = 'bold 18px Arial';
    ctx.textAlign = 'left';
    ctx.fillText('ğŸ† ìˆœìœ„', 620, 35);

    ctx.font = '14px Arial';
    sortedBoard.forEach((entry, index) => {
        const y = 60 + index * 25;
        ctx.fillText(`${index + 1}. ${entry.id}`, 620, y);
        ctx.fillText(`${(entry.time / 1000).toFixed(2)}s`, 720, y);
    });
}
```

**ë©€í‹°í”Œë ˆì´ì–´ ê²Œì„ íŠ¹ì§•**:
- ìµœëŒ€ 10ê°œ ì„¼ì„œ ì§€ì› (`gameType: 'multi'`)
- ë™ì  í”Œë ˆì´ì–´ ì¶”ê°€/ì œê±°
- `Map` ìë£Œêµ¬ì¡°ë¡œ í”Œë ˆì´ì–´ ê´€ë¦¬
- `sensorId`ëŠ” `"player1"`, `"player2"`, ... `"player10"`
- ì‹¤ì‹œê°„ ë¦¬ë”ë³´ë“œ

---

**Part 8 ì™„ë£Œ! âœ…**

**í†µê³„**:
- ì´ ì‘ì„± ë¼ì¸: ~1,400ì¤„
- API ë©”ì„œë“œ ë¬¸ì„œí™”: 40+ê°œ
- ë°ì´í„° êµ¬ì¡° ì •ì˜: 15+ê°œ
- ì™„ì „í•œ ì˜ˆì œ: 3ê°œ (Solo, Dual, Multi)
- Socket.IO ì´ë²¤íŠ¸: 15+ê°œ
- HTTP API: 20+ê°œ

**Part 8 ì£¼ìš” ë‚´ìš©**:
1. **SessionSDK ì™„ì „ ë ˆí¼ëŸ°ìŠ¤**: ëª¨ë“  ë©”ì„œë“œ, ì´ë²¤íŠ¸, ì˜µì…˜ ìƒì„¸ ë¬¸ì„œí™”
2. **QRCodeGenerator & SensorCollector**: ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ ì™„ì „ ê°€ì´ë“œ
3. **Socket.IO ì´ë²¤íŠ¸**: í´ë¼ì´ì–¸íŠ¸-ì„œë²„ ê°„ ëª¨ë“  ì´ë²¤íŠ¸ ëª…ì„¸
4. **HTTP REST API**: ê²Œì„ ê´€ë¦¬, AI, ìœ ì§€ë³´ìˆ˜ API ì „ì²´ ë¬¸ì„œí™”
5. **ë°ì´í„° êµ¬ì¡°**: TypeScript ì¸í„°í˜ì´ìŠ¤ë¡œ ëª¨ë“  íƒ€ì… ì •ì˜
6. **ì—ëŸ¬ ì²˜ë¦¬**: ì—ëŸ¬ ì½”ë“œ ë¶„ë¥˜ ë° ì²˜ë¦¬ íŒ¨í„´
7. **ì‹¤ì „ ì˜ˆì œ**: Solo, Dual, Multi ê²Œì„ ì™„ì „ êµ¬í˜„

**ë¬¸ì„œ ì „ì²´ í†µê³„ (Part 1-8)**:
- ì´ ë¬¸ì„œ ë¼ì¸: ~8,600ì¤„
- ì´ ë‹¤ì´ì–´ê·¸ë¨: 29ê°œ
- API ë ˆí¼ëŸ°ìŠ¤: ì™„ë£Œ
- ê²Œì„ ì˜ˆì œ: 3ê°œ

**ë‹¤ìŒ:** Part 9 (ê°œë°œ ì›Œí¬í”Œë¡œìš° & ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤)ë¡œ ê³„ì†...

---

## Part 9: ê°œë°œ ì›Œí¬í”Œë¡œìš° & ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

ì´ ì„¹ì…˜ì—ì„œëŠ” Sensor Game Hub v6.0ì—ì„œ íš¨ìœ¨ì ìœ¼ë¡œ ê²Œì„ì„ ê°œë°œí•˜ê³  ìœ ì§€ë³´ìˆ˜í•˜ëŠ” ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤. ì‹¤ì œ ê°œë°œ ì‹œë‚˜ë¦¬ì˜¤, ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤, ì„±ëŠ¥ ìµœì í™” ê¸°ë²•ì„ ì œê³µí•©ë‹ˆë‹¤.

### ëª©ì°¨
- [9.1 ê²Œì„ ê°œë°œ ì›Œí¬í”Œë¡œìš°](#91-ê²Œì„-ê°œë°œ-ì›Œí¬í”Œë¡œìš°)
- [9.2 ê°œë°œ í™˜ê²½ ì„¤ì •](#92-ê°œë°œ-í™˜ê²½-ì„¤ì •)
- [9.3 ì½”ë”© ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤](#93-ì½”ë”©-ë² ìŠ¤íŠ¸-í”„ë™í‹°ìŠ¤)
- [9.4 ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ](#94-ì„±ëŠ¥-ìµœì í™”-ê°€ì´ë“œ)
- [9.5 ë””ë²„ê¹… ì „ëµ](#95-ë””ë²„ê¹…-ì „ëµ)
- [9.6 í…ŒìŠ¤íŠ¸ ë° ê²€ì¦](#96-í…ŒìŠ¤íŠ¸-ë°-ê²€ì¦)
- [9.7 ë°°í¬ ë° ê³µìœ ](#97-ë°°í¬-ë°-ê³µìœ )
- [9.8 ìœ ì§€ë³´ìˆ˜ ë° ì—…ë°ì´íŠ¸](#98-ìœ ì§€ë³´ìˆ˜-ë°-ì—…ë°ì´íŠ¸)

---

### 9.1 ê²Œì„ ê°œë°œ ì›Œí¬í”Œë¡œìš°

#### 9.1.1 ì „ì²´ ê°œë°œ í”„ë¡œì„¸ìŠ¤

```mermaid
graph TB
    A[ì•„ì´ë””ì–´ êµ¬ìƒ] --> B[ìš”êµ¬ì‚¬í•­ ì •ì˜]
    B --> C[ê²Œì„ ì„¤ê³„]
    C --> D[í”„ë¡œí† íƒ€ì… ê°œë°œ]
    D --> E[SessionSDK í†µí•©]
    E --> F[ì„¼ì„œ ë¡œì§ êµ¬í˜„]
    F --> G[UI/UX ê°œë°œ]
    G --> H[í…ŒìŠ¤íŠ¸]
    H --> I{ë²„ê·¸ ìˆìŒ?}
    I -->|ì˜ˆ| F
    I -->|ì•„ë‹ˆì˜¤| J[ìµœì í™”]
    J --> K[ë¬¸ì„œí™”]
    K --> L[ë°°í¬]
    L --> M[ìœ ì§€ë³´ìˆ˜]
```

#### 9.1.2 ë‹¨ê³„ë³„ ìƒì„¸ ê°€ì´ë“œ

##### Step 1: ì•„ì´ë””ì–´ êµ¬ìƒ (1-2ì‹œê°„)

**ëª©í‘œ**: ê²Œì„ ì»¨ì…‰ ì •ì˜ ë° ì‹¤í˜„ ê°€ëŠ¥ì„± ê²€í† 

**ì²´í¬ë¦¬ìŠ¤íŠ¸**:
- [ ] ê²Œì„ ì¥ë¥´ ê²°ì • (ì•¡ì…˜, í¼ì¦, ë ˆì´ì‹± ë“±)
- [ ] íƒ€ê²Ÿ í”Œë ˆì´ì–´ ìˆ˜ ê²°ì • (solo/dual/multi)
- [ ] í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜ ì •ì˜
- [ ] ì„¼ì„œ ì‚¬ìš© ë°©ì‹ êµ¬ìƒ
- [ ] ê¸°ìˆ ì  ì‹¤í˜„ ê°€ëŠ¥ì„± ê²€í† 

**ì˜ˆì œ: ì•„ì´ë””ì–´ ë¬¸ì„œ**

```markdown
# ê²Œì„ ì•„ì´ë””ì–´: Gravity Maze

## ê°œìš”
ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ ê³µì„ êµ´ë ¤ ë¯¸ë¡œë¥¼ íƒˆì¶œí•˜ëŠ” í¼ì¦ ê²Œì„

## í•µì‹¬ ë©”ì»¤ë‹ˆì¦˜
- ì¤‘ë ¥ ê¸°ë°˜ ë¬¼ë¦¬ ì—”ì§„
- ê¸°ìš¸ê¸°ë¡œ ì¤‘ë ¥ ë°©í–¥ ì œì–´
- ì¥ì• ë¬¼ íšŒí”¼ ë° ì—´ì‡  ìˆ˜ì§‘

## ê¸°ìˆ  ìš”êµ¬ì‚¬í•­
- ê²Œì„ íƒ€ì…: Solo (1 ì„¼ì„œ)
- ì„¼ì„œ ë°ì´í„°: orientation (gamma, beta)
- ë¬¼ë¦¬ ì—”ì§„: ê°„ë‹¨í•œ ì¤‘ë ¥ + ì¶©ëŒ ê°ì§€
- ë‚œì´ë„: ì¤‘ê¸‰ (ë ˆë²¨ ì‹œìŠ¤í…œ)

## ì°¨ë³„í™” í¬ì¸íŠ¸
- ì‹¤ì‹œê°„ ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜
- ë™ì  ì¥ì• ë¬¼
- ë¦¬í”Œë ˆì´ ì‹œìŠ¤í…œ
```

##### Step 2: ìš”êµ¬ì‚¬í•­ ì •ì˜ (30ë¶„-1ì‹œê°„)

**ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (Functional Requirements)**:

```yaml
í•„ìˆ˜ ê¸°ëŠ¥:
  - ì„¸ì…˜ ìƒì„± ë° QR ì½”ë“œ í‘œì‹œ
  - ì„¼ì„œ ì—°ê²° ë° ë°ì´í„° ìˆ˜ì‹ 
  - ê²Œì„ ë¡œì§ (ë¬¼ë¦¬, ì¶©ëŒ)
  - ì ìˆ˜ ì‹œìŠ¤í…œ
  - ê²Œì„ ì˜¤ë²„ ì²˜ë¦¬

ì„ íƒ ê¸°ëŠ¥:
  - ë ˆë²¨ ì‹œìŠ¤í…œ
  - ë¦¬ë”ë³´ë“œ
  - íš¨ê³¼ìŒ/ë°°ê²½ìŒì•…
  - íŒŒì›Œì—… ì•„ì´í…œ
  - ë¦¬í”Œë ˆì´ ì €ì¥
```

**ë¹„ê¸°ëŠ¥ ìš”êµ¬ì‚¬í•­ (Non-Functional Requirements)**:

```yaml
ì„±ëŠ¥:
  - ê²Œì„ ë£¨í”„: 60 FPS
  - ì„¼ì„œ ë°ì´í„° ë ˆì´í„´ì‹œ: < 100ms
  - ì„¸ì…˜ ìƒì„± ì‹œê°„: < 2ì´ˆ

ì‚¬ìš©ì„±:
  - ì„¸ì…˜ ì½”ë“œ ì…ë ¥: 4ìë¦¬ (ëŒ€ë¬¸ì+ìˆ«ì)
  - QR ì½”ë“œ ìŠ¤ìº”: ëª¨ë°”ì¼ ì¹´ë©”ë¼
  - ê²Œì„ ì‹œì‘ê¹Œì§€: < 30ì´ˆ

í˜¸í™˜ì„±:
  - ë¸Œë¼ìš°ì €: Chrome, Safari, Firefox ìµœì‹  ë²„ì „
  - ëª¨ë°”ì¼: iOS 13+, Android 8+
  - í™”ë©´ í•´ìƒë„: 800x600 ~ 1920x1080
```

##### Step 3: ê²Œì„ ì„¤ê³„ (1-2ì‹œê°„)

**ë°ì´í„° êµ¬ì¡° ì„¤ê³„**:

```javascript
// ê²Œì„ ìƒíƒœ ì„¤ê³„
const gameState = {
    // í”Œë ˆì´ì–´
    ball: {
        x: 400,
        y: 300,
        radius: 20,
        vx: 0,
        vy: 0,
        mass: 1
    },

    // ë ˆë²¨ ë°ì´í„°
    level: {
        id: 1,
        walls: [
            { x: 100, y: 100, width: 600, height: 20 },
            // ...
        ],
        obstacles: [
            { x: 200, y: 200, radius: 30, type: 'spike' },
            // ...
        ],
        goal: { x: 700, y: 500, radius: 40 },
        keys: [
            { x: 300, y: 300, radius: 15, collected: false }
        ]
    },

    // ê²Œì„ ì§„í–‰ ìƒíƒœ
    score: 0,
    lives: 3,
    keysCollected: 0,
    keysRequired: 3,
    timeElapsed: 0,
    isPlaying: false,
    isPaused: false,

    // ì„¼ì„œ ìƒíƒœ
    sensorConnected: false,
    currentTilt: { gamma: 0, beta: 0 }
};
```

**ë¬¼ë¦¬ ì—”ì§„ ì„¤ê³„**:

```javascript
// ë¬¼ë¦¬ ìƒìˆ˜
const PHYSICS = {
    GRAVITY: 0.5,           // ì¤‘ë ¥ ê°€ì†ë„
    FRICTION: 0.98,         // ë§ˆì°° ê³„ìˆ˜
    BOUNCE: 0.7,            // ë°˜ë°œ ê³„ìˆ˜
    MAX_VELOCITY: 10,       // ìµœëŒ€ ì†ë„
    TILT_SENSITIVITY: 0.1   // ê¸°ìš¸ê¸° ë¯¼ê°ë„
};

// ë¬¼ë¦¬ ì—…ë°ì´íŠ¸ í•¨ìˆ˜ ì„¤ê³„
function updatePhysics(deltaTime) {
    // 1. ì¤‘ë ¥ ì ìš© (ê¸°ìš¸ê¸° ê¸°ë°˜)
    applyGravity();

    // 2. ì†ë„ ì—…ë°ì´íŠ¸
    updateVelocity();

    // 3. ìœ„ì¹˜ ì—…ë°ì´íŠ¸
    updatePosition(deltaTime);

    // 4. ì¶©ëŒ ê°ì§€ ë° ì²˜ë¦¬
    handleCollisions();

    // 5. ê²½ê³„ ì²´í¬
    constrainToBounds();
}
```

##### Step 4: í”„ë¡œí† íƒ€ì… ê°œë°œ (2-4ì‹œê°„)

**GAME_TEMPLATE.html ë³µì‚¬ ë° ìˆ˜ì •**:

```bash
# 1. í…œí”Œë¦¿ ë³µì‚¬
cp GAME_TEMPLATE.html public/games/gravity-maze/index.html

# 2. game.json ìƒì„±
cat > public/games/gravity-maze/game.json << EOF
{
    "title": "Gravity Maze",
    "type": "solo",
    "description": "ê¸°ìš¸ê¸°ë¡œ ê³µì„ êµ´ë ¤ ë¯¸ë¡œë¥¼ íƒˆì¶œí•˜ì„¸ìš”!",
    "difficulty": "medium",
    "tags": ["puzzle", "physics", "maze"]
}
EOF
```

**í”„ë¡œí† íƒ€ì… ì½”ë“œ (í•µì‹¬ë§Œ)**:

```html
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Gravity Maze - Prototype</title>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="/js/SessionSDK.js"></script>
    <style>
        body { margin: 0; background: #0f172a; display: flex; justify-content: center; align-items: center; height: 100vh; }
        canvas { border: 2px solid #3b82f6; background: #1e293b; }
    </style>
</head>
<body>
    <canvas id="canvas" width="800" height="600"></canvas>

    <script>
        // SDK ì´ˆê¸°í™”
        const sdk = new SessionSDK({
            gameId: 'gravity-maze',
            gameType: 'solo',
            debug: true
        });

        // ê²Œì„ ìƒíƒœ
        const game = {
            ball: { x: 400, y: 300, vx: 0, vy: 0, radius: 20 },
            gravity: { x: 0, y: 0.5 },
            isPlaying: false
        };

        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');

        // ì—°ê²° ë° ì„¸ì…˜ ìƒì„±
        sdk.on('connected', async () => {
            const session = await sdk.createSession();
            console.log('ì„¸ì…˜ ì½”ë“œ:', session.sessionCode);
            // TODO: QR ì½”ë“œ í‘œì‹œ
        });

        // ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬
        sdk.on('sensor-data', (event) => {
            const data = event.detail || event;
            const tilt = data.data.orientation;

            // ê¸°ìš¸ê¸°ë¥¼ ì¤‘ë ¥ìœ¼ë¡œ ë³€í™˜
            game.gravity.x = tilt.gamma * 0.1;
            game.gravity.y = tilt.beta * 0.1;
        });

        // ê²Œì„ ì¤€ë¹„ ì™„ë£Œ
        sdk.on('game-ready', async () => {
            await sdk.startGame();
            game.isPlaying = true;
            gameLoop();
        });

        // ê²Œì„ ë£¨í”„
        function gameLoop() {
            if (!game.isPlaying) return;

            // ë¬¼ë¦¬ ì—…ë°ì´íŠ¸
            game.ball.vx += game.gravity.x;
            game.ball.vy += game.gravity.y;
            game.ball.vx *= 0.98;
            game.ball.vy *= 0.98;
            game.ball.x += game.ball.vx;
            game.ball.y += game.ball.vy;

            // ê²½ê³„ ì¶©ëŒ
            if (game.ball.x < 20 || game.ball.x > 780) {
                game.ball.vx *= -0.7;
                game.ball.x = Math.max(20, Math.min(780, game.ball.x));
            }
            if (game.ball.y < 20 || game.ball.y > 580) {
                game.ball.vy *= -0.7;
                game.ball.y = Math.max(20, Math.min(580, game.ball.y));
            }

            // ë Œë”ë§
            ctx.fillStyle = '#1e293b';
            ctx.fillRect(0, 0, 800, 600);

            ctx.beginPath();
            ctx.arc(game.ball.x, game.ball.y, game.ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = '#3b82f6';
            ctx.fill();

            requestAnimationFrame(gameLoop);
        }
    </script>
</body>
</html>
```

##### Step 5: SessionSDK í†µí•© (1-2ì‹œê°„)

**í•„ìˆ˜ í†µí•© íŒ¨í„´**:

```javascript
// ===== íŒ¨í„´ 1: SDK ì´ˆê¸°í™” ë° ì—°ê²° =====
const sdk = new SessionSDK({
    gameId: 'your-game-id',
    gameType: 'solo',  // ë˜ëŠ” 'dual', 'multi'
    debug: true        // ê°œë°œ ì¤‘ì—ëŠ” true
});

// ===== íŒ¨í„´ 2: ì—°ê²° ì™„ë£Œ í›„ ì„¸ì…˜ ìƒì„± =====
sdk.on('connected', async () => {
    console.log('âœ… ì„œë²„ ì—°ê²°ë¨');

    try {
        const session = await sdk.createSession();

        // ì„¸ì…˜ ì •ë³´ í‘œì‹œ
        displaySessionCode(session.sessionCode);
        generateQRCode(session.sessionCode);

    } catch (error) {
        console.error('ì„¸ì…˜ ìƒì„± ì‹¤íŒ¨:', error);
        showError('ì„¸ì…˜ì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }
});

// ===== íŒ¨í„´ 3: ì„¼ì„œ ì—°ê²° ì•Œë¦¼ =====
sdk.on('sensor-connected', (event) => {
    const conn = event.detail || event;
    console.log('ğŸ“± ì„¼ì„œ ì—°ê²°:', conn.sensorId);

    // UI ì—…ë°ì´íŠ¸
    document.getElementById('sensor-status').textContent = 'ì„¼ì„œ ì—°ê²°ë¨';
    document.getElementById('sensor-status').className = 'status-connected';
});

// ===== íŒ¨í„´ 4: ê²Œì„ ì¤€ë¹„ ë° ì‹œì‘ =====
sdk.on('game-ready', async () => {
    console.log('ğŸ® ê²Œì„ ì¤€ë¹„ ì™„ë£Œ');

    // ì¹´ìš´íŠ¸ë‹¤ìš´
    await countdown(3);

    // ê²Œì„ ì‹œì‘
    const gameInfo = await sdk.startGame();
    gameState.isPlaying = true;

    // ê²Œì„ ë£¨í”„ ì‹œì‘
    startGameLoop();
});

// ===== íŒ¨í„´ 5: ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬ =====
sdk.on('sensor-data', (event) => {
    const data = event.detail || event;

    if (!gameState.isPlaying) return;

    // ì„¼ì„œ ë°ì´í„° ì¶”ì¶œ
    const { orientation, acceleration, rotationRate } = data.data;

    // ê²Œì„ ë¡œì§ì— ì ìš©
    processSensorInput(orientation);
});

// ===== íŒ¨í„´ 6: ì—°ê²° í•´ì œ ì²˜ë¦¬ =====
sdk.on('sensor-disconnected', (event) => {
    const data = event.detail || event;
    console.log('âŒ ì„¼ì„œ ì—°ê²° í•´ì œ:', data.sensorId);

    // ê²Œì„ ì¼ì‹œì •ì§€
    pauseGame();
    showReconnectMessage();
});

// ===== íŒ¨í„´ 7: ì—ëŸ¬ ì²˜ë¦¬ =====
sdk.on('connection-error', (event) => {
    const error = event.detail || event;
    console.error('ì—°ê²° ì˜¤ë¥˜:', error);

    showError('ì„œë²„ ì—°ê²°ì— ë¬¸ì œê°€ ìˆìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
});
```

##### Step 6: ì„¼ì„œ ë¡œì§ êµ¬í˜„ (2-3ì‹œê°„)

**ì„¼ì„œ ë°ì´í„° ë§¤í•‘ ì „ëµ**:

```javascript
// ì„¼ì„œ ë°ì´í„° ì¢…ë¥˜ë³„ í™œìš©ë²•

// 1. Orientation (ê¸°ê¸° ë°©í–¥)
// - alpha: 0-360Â° (ë‚˜ì¹¨ë°˜ ë°©í–¥)
// - beta: -180~180Â° (ì•ë’¤ ê¸°ìš¸ê¸°)
// - gamma: -90~90Â° (ì¢Œìš° ê¸°ìš¸ê¸°)

// í™œìš© ì˜ˆì‹œ: ê³µ êµ´ë¦¬ê¸°
function mapOrientationToBall(orientation) {
    // gamma: ì¢Œìš° ê¸°ìš¸ê¸° â†’ ì¢Œìš° í˜
    const forceX = orientation.gamma * 0.1;

    // beta: ì•ë’¤ ê¸°ìš¸ê¸° â†’ ìƒí•˜ í˜
    const forceY = orientation.beta * 0.1;

    // ìµœëŒ€ í˜ ì œí•œ
    return {
        x: Math.max(-1, Math.min(1, forceX)),
        y: Math.max(-1, Math.min(1, forceY))
    };
}

// 2. Acceleration (ê°€ì†ë„)
// - x, y, z: m/sÂ²
// í™œìš© ì˜ˆì‹œ: í”ë“¤ê¸° ê°ì§€
function detectShake(acceleration) {
    const magnitude = Math.sqrt(
        acceleration.x ** 2 +
        acceleration.y ** 2 +
        acceleration.z ** 2
    );

    const SHAKE_THRESHOLD = 15; // m/sÂ²
    return magnitude > SHAKE_THRESHOLD;
}

// 3. RotationRate (íšŒì „ ì†ë„)
// - alpha, beta, gamma: deg/s
// í™œìš© ì˜ˆì‹œ: ìŠ¤í•€ ê³µê²©
function mapRotationToSpin(rotationRate) {
    const totalRotation = Math.abs(rotationRate.alpha) +
                          Math.abs(rotationRate.beta) +
                          Math.abs(rotationRate.gamma);

    const SPIN_THRESHOLD = 100; // deg/s

    if (totalRotation > SPIN_THRESHOLD) {
        return {
            isSpinning: true,
            intensity: Math.min(totalRotation / 300, 1)
        };
    }

    return { isSpinning: false, intensity: 0 };
}
```

**ê³ ê¸‰ ì„¼ì„œ ì²˜ë¦¬**:

```javascript
// ì„¼ì„œ ë°ì´í„° ìŠ¤ë¬´ë”© (Smoothing)
class SensorSmoother {
    constructor(windowSize = 5) {
        this.windowSize = windowSize;
        this.history = {
            gamma: [],
            beta: [],
            alpha: []
        };
    }

    smooth(orientation) {
        // íˆìŠ¤í† ë¦¬ì— ì¶”ê°€
        this.history.gamma.push(orientation.gamma);
        this.history.beta.push(orientation.beta);
        this.history.alpha.push(orientation.alpha);

        // ìœˆë„ìš° í¬ê¸° ìœ ì§€
        if (this.history.gamma.length > this.windowSize) {
            this.history.gamma.shift();
            this.history.beta.shift();
            this.history.alpha.shift();
        }

        // í‰ê·  ê³„ì‚°
        return {
            gamma: this.average(this.history.gamma),
            beta: this.average(this.history.beta),
            alpha: this.average(this.history.alpha)
        };
    }

    average(arr) {
        return arr.reduce((a, b) => a + b, 0) / arr.length;
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const smoother = new SensorSmoother(5);

sdk.on('sensor-data', (event) => {
    const data = event.detail || event;
    const raw = data.data.orientation;

    // ìŠ¤ë¬´ë”© ì ìš©
    const smoothed = smoother.smooth(raw);

    // ê²Œì„ ë¡œì§ì— ì‚¬ìš©
    applyTilt(smoothed);
});
```

**ë°ë“œì¡´ (Dead Zone) ì²˜ë¦¬**:

```javascript
// ì‘ì€ ê¸°ìš¸ê¸° ë¬´ì‹œí•˜ê¸°
function applyDeadZone(value, threshold = 5) {
    if (Math.abs(value) < threshold) {
        return 0;
    }

    // ë°ë“œì¡´ ì œê±° í›„ ì¬ìŠ¤ì¼€ì¼
    const sign = Math.sign(value);
    const adjusted = Math.abs(value) - threshold;
    const maxRange = 90 - threshold; // gamma ë²”ìœ„

    return sign * (adjusted / maxRange) * 90;
}

// ì‚¬ìš© ì˜ˆì‹œ
sdk.on('sensor-data', (event) => {
    const data = event.detail || event;
    const tilt = data.data.orientation;

    // ë°ë“œì¡´ ì ìš©
    const gamma = applyDeadZone(tilt.gamma, 5);
    const beta = applyDeadZone(tilt.beta, 5);

    // 5ë„ ì´í•˜ ê¸°ìš¸ê¸°ëŠ” ë¬´ì‹œë¨
    applyForce({ x: gamma * 0.1, y: beta * 0.1 });
});
```

##### Step 7: UI/UX ê°œë°œ (2-3ì‹œê°„)

**ì„¸ì…˜ ì •ë³´ UI ì»´í¬ë„ŒíŠ¸**:

```html
<!-- ì„¸ì…˜ ì •ë³´ íŒ¨ë„ -->
<div id="session-panel" class="session-panel">
    <div class="session-status" id="status">â³ ì„¼ì„œ ì—°ê²° ëŒ€ê¸° ì¤‘...</div>

    <div class="session-code-container">
        <div class="session-code-label">ì„¸ì…˜ ì½”ë“œ</div>
        <div class="session-code" id="session-code">----</div>
        <button class="copy-button" id="copy-btn" onclick="copySessionCode()">
            ğŸ“‹ ë³µì‚¬
        </button>
    </div>

    <div class="qr-container" id="qr-container">
        <!-- QR ì½”ë“œê°€ ì—¬ê¸°ì— ë™ì  ìƒì„±ë¨ -->
    </div>

    <div class="sensor-info">
        <div class="sensor-item">
            <span class="sensor-label">ì—°ê²°ëœ ì„¼ì„œ:</span>
            <span class="sensor-value" id="sensor-count">0</span>
        </div>
        <div class="sensor-item">
            <span class="sensor-label">ë ˆì´í„´ì‹œ:</span>
            <span class="sensor-value" id="latency">--ms</span>
        </div>
    </div>
</div>

<style>
.session-panel {
    position: fixed;
    top: 20px;
    right: 20px;
    background: rgba(30, 41, 59, 0.95);
    border: 2px solid #3b82f6;
    border-radius: 12px;
    padding: 20px;
    min-width: 300px;
    backdrop-filter: blur(10px);
    z-index: 1000;
}

.session-status {
    font-size: 16px;
    margin-bottom: 15px;
    padding: 10px;
    border-radius: 8px;
    text-align: center;
    font-weight: 600;
}

.session-status.waiting { background: #f59e0b; color: #000; }
.session-status.connected { background: #22c55e; color: #000; }
.session-status.playing { background: #3b82f6; color: #fff; }

.session-code-container {
    margin: 15px 0;
    text-align: center;
}

.session-code {
    font-size: 48px;
    font-weight: bold;
    color: #3b82f6;
    letter-spacing: 10px;
    margin: 10px 0;
    font-family: 'Courier New', monospace;
}

.copy-button {
    background: #3b82f6;
    color: white;
    border: none;
    padding: 8px 16px;
    border-radius: 6px;
    cursor: pointer;
    font-size: 14px;
    transition: all 0.2s;
}

.copy-button:hover {
    background: #2563eb;
    transform: translateY(-2px);
}

.qr-container {
    margin: 20px 0;
    text-align: center;
    padding: 15px;
    background: white;
    border-radius: 8px;
}

.sensor-info {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #475569;
}

.sensor-item {
    display: flex;
    justify-content: space-between;
    margin: 8px 0;
    font-size: 14px;
}

.sensor-label {
    color: #94a3b8;
}

.sensor-value {
    color: #f8fafc;
    font-weight: 600;
}
</style>

<script>
// ì„¸ì…˜ ì •ë³´ í‘œì‹œ í•¨ìˆ˜
function displaySessionInfo(session) {
    // ì„¸ì…˜ ì½”ë“œ í‘œì‹œ
    document.getElementById('session-code').textContent = session.sessionCode;

    // QR ì½”ë“œ ìƒì„±
    const qrUrl = `${window.location.origin}/sensor.html?code=${session.sessionCode}`;
    QRCodeGenerator.generateElement(qrUrl, 200).then(qr => {
        document.getElementById('qr-container').innerHTML = '';
        document.getElementById('qr-container').appendChild(qr);
    });

    // ìƒíƒœ ì—…ë°ì´íŠ¸
    document.getElementById('status').textContent = 'ğŸ“± ëª¨ë°”ì¼ë¡œ QR ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì„¸ìš”';
}

// ì„¸ì…˜ ì½”ë“œ ë³µì‚¬
function copySessionCode() {
    const code = document.getElementById('session-code').textContent;
    navigator.clipboard.writeText(code).then(() => {
        const btn = document.getElementById('copy-btn');
        btn.textContent = 'âœ… ë³µì‚¬ë¨!';
        setTimeout(() => {
            btn.textContent = 'ğŸ“‹ ë³µì‚¬';
        }, 2000);
    });
}

// ë ˆì´í„´ì‹œ ëª¨ë‹ˆí„°ë§
setInterval(async () => {
    const latency = await sdk.ping();
    if (latency !== null) {
        document.getElementById('latency').textContent = `${latency}ms`;
    }
}, 3000);
</script>
```

**ê²Œì„ HUD (Heads-Up Display)**:

```html
<!-- ê²Œì„ HUD -->
<div id="game-hud" class="game-hud">
    <div class="hud-item">
        <div class="hud-label">ì ìˆ˜</div>
        <div class="hud-value" id="score">0</div>
    </div>

    <div class="hud-item">
        <div class="hud-label">ì‹œê°„</div>
        <div class="hud-value" id="time">0:00</div>
    </div>

    <div class="hud-item">
        <div class="hud-label">ëª©í‘œ</div>
        <div class="hud-value" id="goal">0 / 5</div>
    </div>

    <div class="hud-item">
        <div class="hud-label">ìƒëª…</div>
        <div class="hud-value lives" id="lives">
            <span class="heart">â¤ï¸</span>
            <span class="heart">â¤ï¸</span>
            <span class="heart">â¤ï¸</span>
        </div>
    </div>
</div>

<style>
.game-hud {
    position: fixed;
    top: 20px;
    left: 20px;
    display: flex;
    gap: 20px;
    z-index: 999;
}

.hud-item {
    background: rgba(0, 0, 0, 0.7);
    border: 2px solid #3b82f6;
    border-radius: 8px;
    padding: 10px 20px;
    backdrop-filter: blur(10px);
}

.hud-label {
    font-size: 12px;
    color: #94a3b8;
    text-transform: uppercase;
    margin-bottom: 5px;
}

.hud-value {
    font-size: 24px;
    font-weight: bold;
    color: #f8fafc;
}

.hud-value.lives {
    display: flex;
    gap: 5px;
}

.heart {
    font-size: 20px;
}

.heart.lost {
    opacity: 0.3;
    filter: grayscale(1);
}
</style>

<script>
// HUD ì—…ë°ì´íŠ¸ í•¨ìˆ˜ë“¤
function updateScore(score) {
    document.getElementById('score').textContent = score;

    // ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼
    const el = document.getElementById('score');
    el.classList.add('score-pulse');
    setTimeout(() => el.classList.remove('score-pulse'), 300);
}

function updateTime(seconds) {
    const minutes = Math.floor(seconds / 60);
    const secs = seconds % 60;
    document.getElementById('time').textContent =
        `${minutes}:${secs.toString().padStart(2, '0')}`;
}

function updateGoal(current, total) {
    document.getElementById('goal').textContent = `${current} / ${total}`;
}

function updateLives(lives) {
    const container = document.getElementById('lives');
    const hearts = container.querySelectorAll('.heart');

    hearts.forEach((heart, index) => {
        if (index < lives) {
            heart.classList.remove('lost');
        } else {
            heart.classList.add('lost');
        }
    });
}
</script>
```

##### Step 8: í…ŒìŠ¤íŠ¸ (1-2ì‹œê°„)

**í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸**:

```markdown
## ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸

### ì—°ê²° í…ŒìŠ¤íŠ¸
- [ ] ì„œë²„ ì—°ê²° ì„±ê³µ
- [ ] ì„¸ì…˜ ìƒì„± ì„±ê³µ
- [ ] ì„¸ì…˜ ì½”ë“œ í‘œì‹œ ì •ìƒ
- [ ] QR ì½”ë“œ ìƒì„± ì •ìƒ
- [ ] ì„¼ì„œ ì—°ê²° ì„±ê³µ
- [ ] ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹  ì •ìƒ

### ê²Œì„ ë¡œì§ í…ŒìŠ¤íŠ¸
- [ ] ì„¼ì„œ ê¸°ìš¸ê¸°ê°€ ê²Œì„ì— ë°˜ì˜ë¨
- [ ] ë¬¼ë¦¬ ì—”ì§„ ë™ì‘ ì •ìƒ
- [ ] ì¶©ëŒ ê°ì§€ ì •ìƒ
- [ ] ì ìˆ˜ ê³„ì‚° ì •í™•
- [ ] ê²Œì„ ì˜¤ë²„ ì²˜ë¦¬ ì •ìƒ

### UI/UX í…ŒìŠ¤íŠ¸
- [ ] HUD ì •ë³´ ì •í™•
- [ ] ì• ë‹ˆë©”ì´ì…˜ ë¶€ë“œëŸ¬ì›€
- [ ] ë²„íŠ¼ í´ë¦­ ë°˜ì‘
- [ ] ëª¨ë‹¬/íŒì—… í‘œì‹œ ì •ìƒ

### ì—ëŸ¬ í•¸ë“¤ë§ í…ŒìŠ¤íŠ¸
- [ ] ì„¼ì„œ ì—°ê²° í•´ì œ ì²˜ë¦¬
- [ ] í˜¸ìŠ¤íŠ¸ ì—°ê²° í•´ì œ ì²˜ë¦¬
- [ ] ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ ì²˜ë¦¬
- [ ] ì„¼ì„œ ê¶Œí•œ ê±°ë¶€ ì²˜ë¦¬

## ì„±ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] 60 FPS ìœ ì§€
- [ ] ì„¼ì„œ ë ˆì´í„´ì‹œ < 100ms
- [ ] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ìŒ
- [ ] CPU ì‚¬ìš©ë¥  ì •ìƒ

## í˜¸í™˜ì„± í…ŒìŠ¤íŠ¸

### ë°ìŠ¤í¬í†± ë¸Œë¼ìš°ì €
- [ ] Chrome (Windows)
- [ ] Chrome (macOS)
- [ ] Safari (macOS)
- [ ] Firefox (Windows/macOS)

### ëª¨ë°”ì¼ ë¸Œë¼ìš°ì €
- [ ] Safari (iOS 13+)
- [ ] Chrome (Android 8+)

### ê¸°ê¸°ë³„ í…ŒìŠ¤íŠ¸
- [ ] iPhone (ë‹¤ì–‘í•œ ëª¨ë¸)
- [ ] Android (ë‹¤ì–‘í•œ ëª¨ë¸)
```

**ìë™í™” í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸**:

```javascript
// ê°„ë‹¨í•œ ìë™í™” í…ŒìŠ¤íŠ¸
class GameTester {
    constructor(sdk) {
        this.sdk = sdk;
        this.results = [];
    }

    async runTests() {
        console.log('ğŸ§ª í…ŒìŠ¤íŠ¸ ì‹œì‘...');

        await this.testConnection();
        await this.testSessionCreation();
        await this.testSensorData();

        this.printResults();
    }

    async testConnection() {
        console.log('Test 1: ì„œë²„ ì—°ê²°');

        const timeout = setTimeout(() => {
            this.results.push({ test: 'ì„œë²„ ì—°ê²°', passed: false, error: 'íƒ€ì„ì•„ì›ƒ' });
        }, 10000);

        return new Promise((resolve) => {
            this.sdk.on('connected', () => {
                clearTimeout(timeout);
                this.results.push({ test: 'ì„œë²„ ì—°ê²°', passed: true });
                resolve();
            });
        });
    }

    async testSessionCreation() {
        console.log('Test 2: ì„¸ì…˜ ìƒì„±');

        try {
            const session = await this.sdk.createSession();

            if (session.sessionCode && session.sessionCode.length === 4) {
                this.results.push({ test: 'ì„¸ì…˜ ìƒì„±', passed: true });
            } else {
                this.results.push({
                    test: 'ì„¸ì…˜ ìƒì„±',
                    passed: false,
                    error: 'ì„¸ì…˜ ì½”ë“œ í˜•ì‹ ì˜¤ë¥˜'
                });
            }
        } catch (error) {
            this.results.push({ test: 'ì„¸ì…˜ ìƒì„±', passed: false, error: error.message });
        }
    }

    async testSensorData() {
        console.log('Test 3: ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹ ');

        return new Promise((resolve) => {
            const timeout = setTimeout(() => {
                this.results.push({
                    test: 'ì„¼ì„œ ë°ì´í„°',
                    passed: false,
                    error: 'ì„¼ì„œ ë°ì´í„° ë¯¸ìˆ˜ì‹ '
                });
                resolve();
            }, 30000);

            this.sdk.on('sensor-data', (event) => {
                clearTimeout(timeout);

                const data = event.detail || event;

                if (data.data && data.data.orientation) {
                    this.results.push({ test: 'ì„¼ì„œ ë°ì´í„°', passed: true });
                } else {
                    this.results.push({
                        test: 'ì„¼ì„œ ë°ì´í„°',
                        passed: false,
                        error: 'ë°ì´í„° í˜•ì‹ ì˜¤ë¥˜'
                    });
                }

                resolve();
            });
        });
    }

    printResults() {
        console.log('\nğŸ“Š í…ŒìŠ¤íŠ¸ ê²°ê³¼:\n');

        const passed = this.results.filter(r => r.passed).length;
        const total = this.results.length;

        this.results.forEach(result => {
            const icon = result.passed ? 'âœ…' : 'âŒ';
            const error = result.error ? ` (${result.error})` : '';
            console.log(`${icon} ${result.test}${error}`);
        });

        console.log(`\nì´ ${total}ê°œ í…ŒìŠ¤íŠ¸ ì¤‘ ${passed}ê°œ í†µê³¼ (${Math.round(passed/total*100)}%)`);
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const tester = new GameTester(sdk);
// tester.runTests();  // ê°œë°œ ì¤‘ì—ë§Œ ì‹¤í–‰
```

##### Step 9: ìµœì í™” (1-2ì‹œê°„)

**ì„±ëŠ¥ ìµœì í™”ëŠ” Section 9.4ì—ì„œ ìƒì„¸íˆ ë‹¤ë£¹ë‹ˆë‹¤.**

##### Step 10: ë¬¸ì„œí™” (30ë¶„-1ì‹œê°„)

**game.json ì™„ì„±**:

```json
{
    "title": "Gravity Maze",
    "type": "solo",
    "description": "ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ ê³µì„ êµ´ë ¤ ë¯¸ë¡œë¥¼ íƒˆì¶œí•˜ëŠ” ë¬¼ë¦¬ í¼ì¦ ê²Œì„",
    "version": "1.0.0",
    "author": "Your Name",
    "difficulty": "medium",
    "tags": ["puzzle", "physics", "maze", "gravity"],
    "thumbnail": "thumbnail.png",
    "instructions": {
        "setup": [
            "1. ê²Œì„ í™”ë©´ì— í‘œì‹œëœ QR ì½”ë“œë¥¼ ëª¨ë°”ì¼ë¡œ ìŠ¤ìº”í•˜ì„¸ìš”",
            "2. ë˜ëŠ” 4ìë¦¬ ì„¸ì…˜ ì½”ë“œë¥¼ ì§ì ‘ ì…ë ¥í•˜ì„¸ìš”",
            "3. ì„¼ì„œ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”"
        ],
        "controls": [
            "ìŠ¤ë§ˆíŠ¸í°ì„ ì¢Œìš°ë¡œ ê¸°ìš¸ì—¬ ê³µì„ ì´ë™ì‹œí‚µë‹ˆë‹¤",
            "ì•ë’¤ë¡œ ê¸°ìš¸ì—¬ ê³µì˜ ì†ë„ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤"
        ],
        "objective": "ëª¨ë“  ì—´ì‡ ë¥¼ ìˆ˜ì§‘í•˜ê³  ì¶œêµ¬ì— ë„ë‹¬í•˜ì„¸ìš”!"
    },
    "features": [
        "15ê°œì˜ ë„ì „ì ì¸ ë ˆë²¨",
        "ì‹¤ì‹œê°„ ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜",
        "ë™ì  ì¥ì• ë¬¼ ì‹œìŠ¤í…œ",
        "ë¦¬í”Œë ˆì´ ì €ì¥ ê¸°ëŠ¥"
    ]
}
```

**README.md ì‘ì„±**:

```markdown
# Gravity Maze

ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ ê³µì„ êµ´ë ¤ ë¯¸ë¡œë¥¼ íƒˆì¶œí•˜ëŠ” ë¬¼ë¦¬ í¼ì¦ ê²Œì„ì…ë‹ˆë‹¤.

## ê²Œì„ ë°©ë²•

1. **ì„¸ì…˜ ìƒì„±**: ê²Œì„ í™”ë©´ì˜ QR ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ê±°ë‚˜ ì„¸ì…˜ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”
2. **ì„¼ì„œ ì—°ê²°**: ëª¨ë°”ì¼ ì„¼ì„œ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”
3. **í”Œë ˆì´**: ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ ê³µì„ ì¡°ì¢…í•˜ì„¸ìš”

## ì¡°ì‘ ë°©ë²•

- **ì¢Œìš° ê¸°ìš¸ê¸°**: ê³µì„ ì¢Œìš°ë¡œ ì´ë™
- **ì•ë’¤ ê¸°ìš¸ê¸°**: ê³µì˜ ì†ë„ ì¡°ì ˆ

## ëª©í‘œ

- ëª¨ë“  ì—´ì‡ (ğŸ”‘)ë¥¼ ìˆ˜ì§‘í•˜ì„¸ìš”
- ì¥ì• ë¬¼(ğŸ”´)ì„ í”¼í•˜ì„¸ìš”
- ì¶œêµ¬(ğŸ¯)ì— ë„ë‹¬í•˜ì„¸ìš”

## ê¸°ìˆ  ìŠ¤í™

- **ê²Œì„ íƒ€ì…**: Solo (1 ì„¼ì„œ)
- **ì„¼ì„œ ì‚¬ìš©**: Orientation (gamma, beta)
- **í”„ë ˆì„ë ˆì´íŠ¸**: 60 FPS
- **í•´ìƒë„**: 800x600

## ê°œë°œ ì •ë³´

- **ë²„ì „**: 1.0.0
- **ê°œë°œ ê¸°ê°„**: 2ì£¼
- **ì‚¬ìš© ê¸°ìˆ **: SessionSDK v6.0, HTML5 Canvas
- **ë¬¼ë¦¬ ì—”ì§„**: Custom gravity-based physics

## ì—…ë°ì´íŠ¸ ì´ë ¥

### v1.0.0 (2025-10-09)
- ì´ˆê¸° ë¦´ë¦¬ìŠ¤
- 15ê°œ ë ˆë²¨
- ê¸°ë³¸ ë¬¼ë¦¬ ì—”ì§„
- ì ìˆ˜ ì‹œìŠ¤í…œ
```

##### Step 11: ë°°í¬ (30ë¶„)

**ê²Œì„ í´ë” êµ¬ì¡° í™•ì¸**:

```
public/games/gravity-maze/
â”œâ”€â”€ index.html          # ë©”ì¸ ê²Œì„ íŒŒì¼
â”œâ”€â”€ game.json           # ê²Œì„ ë©”íƒ€ë°ì´í„°
â”œâ”€â”€ README.md           # ê²Œì„ ì„¤ëª…ì„œ
â”œâ”€â”€ thumbnail.png       # ì¸ë„¤ì¼ ì´ë¯¸ì§€ (ì„ íƒ)
â””â”€â”€ assets/             # ì—ì…‹ í´ë” (ì„ íƒ)
    â”œâ”€â”€ sounds/
    â””â”€â”€ images/
```

**ë°°í¬ ëª…ë ¹ì–´**:

```bash
# 1. ì„œë²„ ì¬ì‹œì‘ (ê²Œì„ ìë™ ìŠ¤ìº”)
npm start

# ë˜ëŠ” ìŠ¤ìº” API í˜¸ì¶œ
curl -X POST http://localhost:3000/api/admin/rescan

# 2. ê²Œì„ ì ‘ì† í™•ì¸
open http://localhost:3000/games/gravity-maze

# 3. ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ í…ŒìŠ¤íŠ¸
# ëª¨ë°”ì¼ì—ì„œ http://localhost:3000/sensor.html ì ‘ì†
```

##### Step 12: ìœ ì§€ë³´ìˆ˜ (ì§€ì†ì )

**ë²„ê·¸ ë¦¬í¬íŠ¸ ì²˜ë¦¬**:

```javascript
// ê²Œì„ ë‚´ ë²„ê·¸ ë¦¬í¬íŠ¸ ë²„íŠ¼
document.getElementById('report-bug-btn').addEventListener('click', async () => {
    const description = prompt('ë²„ê·¸ë¥¼ ì„¤ëª…í•´ì£¼ì„¸ìš”:');

    if (description) {
        const response = await fetch('/api/maintenance/report-bug', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                gameId: 'gravity-maze',
                bugDescription: description,
                reproductionSteps: 'ì‚¬ìš©ì ë¦¬í¬íŠ¸'
            })
        });

        const result = await response.json();

        if (result.fixApplied) {
            alert('ë²„ê·¸ê°€ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤! í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
        }
    }
});
```

---

### 9.2 ê°œë°œ í™˜ê²½ ì„¤ì •

#### 9.2.1 ë¡œì»¬ ê°œë°œ í™˜ê²½

**í•„ìˆ˜ ë„êµ¬**:

```bash
# Node.js ì„¤ì¹˜ í™•ì¸
node --version  # v14 ì´ìƒ ê¶Œì¥

# npm ì„¤ì¹˜ í™•ì¸
npm --version

# Git ì„¤ì¹˜ í™•ì¸
git --version
```

**í”„ë¡œì íŠ¸ í´ë¡  ë° ì„¤ì •**:

```bash
# 1. ì €ì¥ì†Œ í´ë¡  (í•´ë‹¹ë˜ëŠ” ê²½ìš°)
git clone https://github.com/your-repo/sensor-game-hub.git
cd sensor-game-hub

# 2. ì˜ì¡´ì„± ì„¤ì¹˜
npm install

# 3. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
cp .env.example .env

# .env íŒŒì¼ í¸ì§‘
# SUPABASE_URL=your_supabase_url
# SUPABASE_ANON_KEY=your_supabase_anon_key
# OPENAI_API_KEY=your_openai_api_key
# ANTHROPIC_API_KEY=your_anthropic_api_key

# 4. ê°œë°œ ì„œë²„ ì‹¤í–‰
npm start

# 5. ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸
open http://localhost:3000
```

#### 9.2.2 IDE ì„¤ì • (VS Code ê¶Œì¥)

**ì¶”ì²œ í™•ì¥ í”„ë¡œê·¸ë¨**:

```json
// .vscode/extensions.json
{
    "recommendations": [
        "dbaeumer.vscode-eslint",
        "esbenp.prettier-vscode",
        "ritwickdey.liveserver",
        "ms-vscode.vscode-typescript-next",
        "bierner.markdown-mermaid",
        "yzhang.markdown-all-in-one"
    ]
}
```

**ì‘ì—… ê³µê°„ ì„¤ì •**:

```json
// .vscode/settings.json
{
    "editor.formatOnSave": true,
    "editor.defaultFormatter": "esbenp.prettier-vscode",
    "editor.tabSize": 4,
    "files.autoSave": "onFocusChange",
    "javascript.suggest.autoImports": true,
    "javascript.updateImportsOnFileMove.enabled": "always"
}
```

**ì½”ë“œ ìŠ¤ë‹ˆí«**:

```json
// .vscode/game-template.code-snippets
{
    "Session SDK Init": {
        "prefix": "sdk-init",
        "body": [
            "const sdk = new SessionSDK({",
            "    gameId: '${1:game-id}',",
            "    gameType: '${2|solo,dual,multi|}',",
            "    debug: true",
            "});",
            "",
            "sdk.on('connected', async () => {",
            "    const session = await sdk.createSession();",
            "    console.log('ì„¸ì…˜ ì½”ë“œ:', session.sessionCode);",
            "});",
            "",
            "sdk.on('sensor-data', (event) => {",
            "    const data = event.detail || event;",
            "    // TODO: ì„¼ì„œ ë°ì´í„° ì²˜ë¦¬",
            "});"
        ],
        "description": "SessionSDK ì´ˆê¸°í™” í…œí”Œë¦¿"
    },

    "Game Loop": {
        "prefix": "game-loop",
        "body": [
            "function gameLoop() {",
            "    if (!gameState.isPlaying) return;",
            "    ",
            "    update();",
            "    render();",
            "    ",
            "    requestAnimationFrame(gameLoop);",
            "}",
            "",
            "function update() {",
            "    // TODO: ê²Œì„ ë¡œì§ ì—…ë°ì´íŠ¸",
            "}",
            "",
            "function render() {",
            "    ctx.clearRect(0, 0, canvas.width, canvas.height);",
            "    // TODO: ë Œë”ë§",
            "}"
        ],
        "description": "ê²Œì„ ë£¨í”„ í…œí”Œë¦¿"
    }
}
```

#### 9.2.3 ë””ë²„ê¹… ì„¤ì •

**Chrome DevTools í™œìš©**:

```javascript
// ê°œë°œ ëª¨ë“œ ì „ìš© ë””ë²„ê¹… í•¨ìˆ˜
const DEBUG = true;  // í”„ë¡œë•ì…˜ì—ì„œëŠ” false

function debugLog(category, message, data) {
    if (!DEBUG) return;

    const color = {
        'sdk': '#3b82f6',
        'sensor': '#22c55e',
        'game': '#f59e0b',
        'error': '#ef4444'
    }[category] || '#94a3b8';

    console.log(
        `%c[${category.toUpperCase()}]%c ${message}`,
        `color: ${color}; font-weight: bold;`,
        'color: inherit;',
        data || ''
    );
}

// ì‚¬ìš© ì˜ˆì‹œ
debugLog('sdk', 'ì„œë²„ ì—°ê²° ì™„ë£Œ');
debugLog('sensor', 'ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹ ', sensorData);
debugLog('game', 'ì ìˆ˜ ì—…ë°ì´íŠ¸', { oldScore: 10, newScore: 20 });
debugLog('error', 'ì—°ê²° ì‹¤íŒ¨', error);
```

**ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§**:

```javascript
// FPS ëª¨ë‹ˆí„°
class FPSMonitor {
    constructor() {
        this.frames = [];
        this.lastTime = performance.now();

        // FPS í‘œì‹œ ì—˜ë¦¬ë¨¼íŠ¸ ìƒì„±
        this.element = document.createElement('div');
        this.element.style.cssText = `
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            color: #0f0;
            padding: 5px 10px;
            font-family: monospace;
            font-size: 14px;
            z-index: 10000;
        `;
        document.body.appendChild(this.element);
    }

    update() {
        const now = performance.now();
        const delta = now - this.lastTime;
        this.lastTime = now;

        this.frames.push(delta);

        // ë§ˆì§€ë§‰ 60í”„ë ˆì„ë§Œ ìœ ì§€
        if (this.frames.length > 60) {
            this.frames.shift();
        }

        // FPS ê³„ì‚°
        const avgDelta = this.frames.reduce((a, b) => a + b) / this.frames.length;
        const fps = Math.round(1000 / avgDelta);

        // ìƒ‰ìƒ ë³€ê²½ (FPSì— ë”°ë¼)
        let color = '#0f0';  // ë…¹ìƒ‰ (60 FPS)
        if (fps < 60) color = '#ff0';  // ë…¸ë€ìƒ‰ (30-60 FPS)
        if (fps < 30) color = '#f00';  // ë¹¨ê°„ìƒ‰ (30 FPS ë¯¸ë§Œ)

        this.element.style.color = color;
        this.element.textContent = `FPS: ${fps}`;
    }
}

// ì‚¬ìš©
const fpsMonitor = new FPSMonitor();

function gameLoop() {
    fpsMonitor.update();

    // ê²Œì„ ë¡œì§...

    requestAnimationFrame(gameLoop);
}
```

---

### 9.3 ì½”ë”© ë² ìŠ¤íŠ¸ í”„ë™í‹°ìŠ¤

#### 9.3.1 ì½”ë“œ êµ¬ì¡°í™”

**ëª¨ë“ˆ íŒ¨í„´**:

```javascript
// ===== game.js - ë©”ì¸ ê²Œì„ ë¡œì§ =====

// ê²Œì„ ëª¨ë“ˆ
const Game = (function() {
    // Private ë³€ìˆ˜
    let state = {
        isPlaying: false,
        score: 0,
        lives: 3
    };

    let canvas, ctx;
    let sdk;

    // Private í•¨ìˆ˜
    function init(canvasId) {
        canvas = document.getElementById(canvasId);
        ctx = canvas.getContext('2d');

        sdk = new SessionSDK({
            gameId: 'my-game',
            gameType: 'solo',
            debug: true
        });

        setupSDK();
    }

    function setupSDK() {
        sdk.on('connected', handleConnected);
        sdk.on('sensor-data', handleSensorData);
        sdk.on('game-ready', handleGameReady);
    }

    function handleConnected() {
        // êµ¬í˜„...
    }

    function handleSensorData(event) {
        // êµ¬í˜„...
    }

    function handleGameReady() {
        // êµ¬í˜„...
    }

    function update() {
        if (!state.isPlaying) return;

        // ë¬¼ë¦¬ ì—…ë°ì´íŠ¸
        Physics.update(state);

        // ì¶©ëŒ ê°ì§€
        Collision.detect(state);

        // UI ì—…ë°ì´íŠ¸
        UI.update(state);
    }

    function render() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        // ë Œë”ë§
        Renderer.draw(ctx, state);
    }

    function gameLoop() {
        if (!state.isPlaying) return;

        update();
        render();

        requestAnimationFrame(gameLoop);
    }

    // Public API
    return {
        init: init,
        start: () => { state.isPlaying = true; gameLoop(); },
        pause: () => { state.isPlaying = false; },
        getState: () => ({ ...state })  // ë³µì‚¬ë³¸ ë°˜í™˜
    };
})();

// ì‚¬ìš©
Game.init('canvas');
```

**ë¶„ë¦¬ëœ ëª¨ë“ˆ íŒŒì¼**:

```javascript
// ===== physics.js =====
const Physics = {
    update(state) {
        // ë¬¼ë¦¬ ì—…ë°ì´íŠ¸ ë¡œì§
    }
};

// ===== collision.js =====
const Collision = {
    detect(state) {
        // ì¶©ëŒ ê°ì§€ ë¡œì§
    }
};

// ===== renderer.js =====
const Renderer = {
    draw(ctx, state) {
        // ë Œë”ë§ ë¡œì§
    }
};

// ===== ui.js =====
const UI = {
    update(state) {
        // UI ì—…ë°ì´íŠ¸ ë¡œì§
    }
};
```

#### 9.3.2 ëª…ëª… ê·œì¹™

**ë³€ìˆ˜ ë° í•¨ìˆ˜ ì´ë¦„**:

```javascript
// âœ… ì¢‹ì€ ì˜ˆ
const maxPlayerSpeed = 10;
const sensorDataHistory = [];

function calculateDistance(pointA, pointB) {
    return Math.sqrt(
        (pointB.x - pointA.x) ** 2 +
        (pointB.y - pointA.y) ** 2
    );
}

function isCollidingWith(objA, objB) {
    // ì¶©ëŒ ê²€ì‚¬
    return distance < (objA.radius + objB.radius);
}

// âŒ ë‚˜ìœ ì˜ˆ
const x = 10;           // ì˜ë¯¸ ë¶ˆëª…í™•
const arr = [];         // ì¼ë°˜ì ì¸ ì´ë¦„
const d = calcDist();   // ì¶•ì•½ ê³¼ë‹¤

function func1(a, b) {  // ì˜ë¯¸ ë¶ˆëª…í™•
    return Math.sqrt((b.x - a.x) ** 2 + (b.y - a.y) ** 2);
}
```

**ìƒìˆ˜ ëª…ëª…**:

```javascript
// âœ… ìƒìˆ˜ëŠ” ëŒ€ë¬¸ì + ì–¸ë”ìŠ¤ì½”ì–´
const MAX_LIVES = 3;
const DEFAULT_GRAVITY = 0.5;
const SENSOR_THROTTLE_MS = 50;
const PI_TIMES_TWO = Math.PI * 2;

// ì„¤ì • ê°ì²´
const CONFIG = {
    PHYSICS: {
        GRAVITY: 0.5,
        FRICTION: 0.98,
        BOUNCE: 0.7
    },
    GAME: {
        MAX_SCORE: 9999,
        TIME_LIMIT: 180  // ì´ˆ
    }
};
```

**í´ë˜ìŠ¤ ëª…ëª…**:

```javascript
// âœ… PascalCase
class PlayerCharacter {
    constructor(x, y) {
        this.position = { x, y };
        this.velocity = { x: 0, y: 0 };
    }

    update(deltaTime) {
        // ì—…ë°ì´íŠ¸ ë¡œì§
    }
}

class SensorDataProcessor {
    process(rawData) {
        // ì²˜ë¦¬ ë¡œì§
    }
}
```

#### 9.3.3 ì£¼ì„ ì‘ì„± ê°€ì´ë“œ

**í•¨ìˆ˜ ì£¼ì„ (JSDoc ìŠ¤íƒ€ì¼)**:

```javascript
/**
 * ë‘ ì  ì‚¬ì´ì˜ ê±°ë¦¬ë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
 *
 * @param {Object} pointA - ì²« ë²ˆì§¸ ì  {x, y}
 * @param {Object} pointB - ë‘ ë²ˆì§¸ ì  {x, y}
 * @returns {number} ë‘ ì  ì‚¬ì´ì˜ ìœ í´ë¦¬ë“œ ê±°ë¦¬
 *
 * @example
 * const distance = calculateDistance(
 *     { x: 0, y: 0 },
 *     { x: 3, y: 4 }
 * );
 * // distance === 5
 */
function calculateDistance(pointA, pointB) {
    return Math.sqrt(
        (pointB.x - pointA.x) ** 2 +
        (pointB.y - pointA.y) ** 2
    );
}

/**
 * ë‘ ì›í˜• ê°ì²´ì˜ ì¶©ëŒ ì—¬ë¶€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.
 *
 * @param {Object} objA - ì²« ë²ˆì§¸ ê°ì²´ {x, y, radius}
 * @param {Object} objB - ë‘ ë²ˆì§¸ ê°ì²´ {x, y, radius}
 * @returns {boolean} ì¶©ëŒ ì‹œ true, ì•„ë‹ˆë©´ false
 */
function checkCircleCollision(objA, objB) {
    const distance = calculateDistance(
        { x: objA.x, y: objA.y },
        { x: objB.x, y: objB.y }
    );

    return distance < (objA.radius + objB.radius);
}
```

**ì¸ë¼ì¸ ì£¼ì„**:

```javascript
function update() {
    // ì¤‘ë ¥ ì ìš©
    ball.vy += GRAVITY;

    // ë§ˆì°° ì ìš© (ì†ë„ ê°ì†Œ)
    ball.vx *= FRICTION;
    ball.vy *= FRICTION;

    // ìœ„ì¹˜ ì—…ë°ì´íŠ¸
    ball.x += ball.vx;
    ball.y += ball.vy;

    // FIXME: ê²½ê³„ ì¶©ëŒ ì‹œ ê°€ë” íŠ•ê²¨ë‚˜ê°€ëŠ” ë²„ê·¸
    if (ball.x < 0 || ball.x > canvas.width) {
        ball.vx *= -BOUNCE;
    }

    // TODO: íšŒì „ ì†ë„ë„ ë°˜ì˜í•˜ê¸°
}
```

**ì„¹ì…˜ ì£¼ì„**:

```javascript
// ========================================
// ì´ˆê¸°í™”
// ========================================

function init() {
    // ì´ˆê¸°í™” ë¡œì§
}

// ========================================
// ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
// ========================================

function handleSensorData(event) {
    // í•¸ë“¤ëŸ¬ ë¡œì§
}

// ========================================
// ê²Œì„ ë£¨í”„
// ========================================

function update() {
    // ì—…ë°ì´íŠ¸ ë¡œì§
}

function render() {
    // ë Œë”ë§ ë¡œì§
}
```

#### 9.3.4 ì—ëŸ¬ ì²˜ë¦¬ íŒ¨í„´

**Try-Catch ì‚¬ìš©**:

```javascript
// âœ… ì¢‹ì€ ì˜ˆ: êµ¬ì²´ì ì¸ ì—ëŸ¬ ì²˜ë¦¬
sdk.on('connected', async () => {
    try {
        const session = await sdk.createSession();
        displaySessionInfo(session);

    } catch (error) {
        console.error('ì„¸ì…˜ ìƒì„± ì‹¤íŒ¨:', error);

        // ì‚¬ìš©ìì—ê²Œ ì¹œì ˆí•œ ë©”ì‹œì§€
        showError('ì„¸ì…˜ì„ ìƒì„±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì„œë²„ ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');

        // ì¬ì‹œë„ ë²„íŠ¼ í‘œì‹œ
        showRetryButton(() => {
            sdk.createSession();
        });
    }
});

// âŒ ë‚˜ìœ ì˜ˆ: ì—ëŸ¬ ë¬´ì‹œ
sdk.on('connected', async () => {
    const session = await sdk.createSession();  // ì—ëŸ¬ ì²˜ë¦¬ ì—†ìŒ
    displaySessionInfo(session);
});
```

**ì—ëŸ¬ íƒ€ì…ë³„ ì²˜ë¦¬**:

```javascript
async function connectToGame(sessionCode) {
    try {
        const connection = await sdk.connectSensor(sessionCode);
        return connection;

    } catch (error) {
        // ì—ëŸ¬ íƒ€ì… íŒŒì•…
        if (error.message.includes('ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤')) {
            throw new Error('CODE_NOT_FOUND');
        } else if (error.message.includes('ìµœëŒ€ ì„¼ì„œ ìˆ˜')) {
            throw new Error('SESSION_FULL');
        } else if (error.message.includes('ë§Œë£Œ')) {
            throw new Error('SESSION_EXPIRED');
        } else {
            throw new Error('UNKNOWN_ERROR');
        }
    }
}

// ì‚¬ìš©
try {
    await connectToGame(code);
} catch (error) {
    switch (error.message) {
        case 'CODE_NOT_FOUND':
            alert('ì„¸ì…˜ ì½”ë“œê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            break;
        case 'SESSION_FULL':
            alert('ì„¸ì…˜ì´ ê°€ë“ ì°¼ìŠµë‹ˆë‹¤.');
            break;
        case 'SESSION_EXPIRED':
            alert('ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
            break;
        default:
            alert('ì—°ê²° ì‹¤íŒ¨: ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
    }
}
```

#### 9.3.5 ì½”ë“œ ë¦¬ë·° ì²´í¬ë¦¬ìŠ¤íŠ¸

```markdown
## ê¸°ëŠ¥
- [ ] ëª¨ë“  ìš”êµ¬ì‚¬í•­ì´ êµ¬í˜„ë˜ì—ˆëŠ”ê°€?
- [ ] ì—£ì§€ ì¼€ì´ìŠ¤ê°€ ì²˜ë¦¬ë˜ì—ˆëŠ”ê°€?
- [ ] ì—ëŸ¬ ì²˜ë¦¬ê°€ ì ì ˆí•œê°€?

## ì½”ë“œ í’ˆì§ˆ
- [ ] ë³€ìˆ˜/í•¨ìˆ˜ ì´ë¦„ì´ ëª…í™•í•œê°€?
- [ ] ì£¼ì„ì´ ì ì ˆíˆ ì‘ì„±ë˜ì—ˆëŠ”ê°€?
- [ ] ì¤‘ë³µ ì½”ë“œê°€ ì—†ëŠ”ê°€?
- [ ] í•¨ìˆ˜ê°€ ë‹¨ì¼ ì±…ì„ ì›ì¹™ì„ ë”°ë¥´ëŠ”ê°€?

## SessionSDK í†µí•©
- [ ] `event.detail || event` íŒ¨í„´ì„ ì‚¬ìš©í•˜ëŠ”ê°€?
- [ ] ì—°ê²° ì™„ë£Œ í›„ ì„¸ì…˜ ìƒì„±ì„ í•˜ëŠ”ê°€?
- [ ] ì—ëŸ¬ í•¸ë“¤ë§ì´ ìˆëŠ”ê°€?

## ì„±ëŠ¥
- [ ] ê²Œì„ ë£¨í”„ê°€ 60 FPSë¥¼ ìœ ì§€í•˜ëŠ”ê°€?
- [ ] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ê°€ ì—†ëŠ”ê°€?
- [ ] ë¶ˆí•„ìš”í•œ ë Œë”ë§ì´ ì—†ëŠ”ê°€?

## ì‚¬ìš©ì ê²½í—˜
- [ ] ë¡œë”© ìƒíƒœê°€ í‘œì‹œë˜ëŠ”ê°€?
- [ ] ì—ëŸ¬ ë©”ì‹œì§€ê°€ ì‚¬ìš©ì ì¹œí™”ì ì¸ê°€?
- [ ] QR ì½”ë“œê°€ ì •ìƒ í‘œì‹œë˜ëŠ”ê°€?

## í˜¸í™˜ì„±
- [ ] iOS Safariì—ì„œ ë™ì‘í•˜ëŠ”ê°€?
- [ ] Android Chromeì—ì„œ ë™ì‘í•˜ëŠ”ê°€?
- [ ] ì„¼ì„œ ê¶Œí•œ ìš”ì²­ì´ ì •ìƒì¸ê°€?
```

---

### 9.4 ì„±ëŠ¥ ìµœì í™” ê°€ì´ë“œ

#### 9.4.1 ê²Œì„ ë£¨í”„ ìµœì í™”

**RequestAnimationFrame í™œìš©**:

```javascript
// âœ… ì¢‹ì€ ì˜ˆ: RAF + deltaTime
let lastTime = performance.now();

function gameLoop(currentTime) {
    if (!gameState.isPlaying) return;

    // deltaTime ê³„ì‚° (ë°€ë¦¬ì´ˆ)
    const deltaTime = currentTime - lastTime;
    lastTime = currentTime;

    // deltaTimeì„ ì‚¬ìš©í•œ ì—…ë°ì´íŠ¸ (í”„ë ˆì„ ë…ë¦½ì )
    update(deltaTime);
    render();

    requestAnimationFrame(gameLoop);
}

requestAnimationFrame(gameLoop);

// ë¬¼ë¦¬ ì—…ë°ì´íŠ¸ ì˜ˆì‹œ
function update(deltaTime) {
    // deltaTimeì„ ì´ˆ ë‹¨ìœ„ë¡œ ë³€í™˜
    const dt = deltaTime / 1000;

    // í”„ë ˆì„ ë…ë¦½ì ì¸ ì›€ì§ì„
    ball.x += ball.vx * dt * 60;  // 60 FPS ê¸°ì¤€
    ball.y += ball.vy * dt * 60;
}

// âŒ ë‚˜ìœ ì˜ˆ: setInterval ì‚¬ìš©
setInterval(() => {
    update();
    render();
}, 16);  // í”„ë ˆì„ ë“œë ë°œìƒ ê°€ëŠ¥
```

**ë Œë”ë§ ìµœì í™”**:

```javascript
// âœ… ì¢‹ì€ ì˜ˆ: ë”í‹° í”Œë˜ê·¸ íŒ¨í„´
const dirtyFlags = {
    background: true,
    entities: true,
    ui: true
};

function render() {
    // ë°°ê²½ì€ ë³€ê²½ë˜ì§€ ì•Šìœ¼ë©´ ë‹¤ì‹œ ê·¸ë¦¬ì§€ ì•ŠìŒ
    if (dirtyFlags.background) {
        renderBackground();
        dirtyFlags.background = false;
    }

    // ì—”í‹°í‹°ë§Œ ë‹¤ì‹œ ê·¸ë¦¬ê¸°
    if (dirtyFlags.entities) {
        clearEntities();
        renderEntities();
        dirtyFlags.entities = false;
    }

    // UIë§Œ ë‹¤ì‹œ ê·¸ë¦¬ê¸°
    if (dirtyFlags.ui) {
        renderUI();
        dirtyFlags.ui = false;
    }
}

// ì—”í‹°í‹°ê°€ ì´ë™í•  ë•Œë§Œ í”Œë˜ê·¸ ì„¤ì •
function updateEntity(entity) {
    entity.x += entity.vx;
    entity.y += entity.vy;

    dirtyFlags.entities = true;  // ë‹¤ì‹œ ê·¸ë ¤ì•¼ í•¨
}
```

**ì˜¤í”„ìŠ¤í¬ë¦° ìº”ë²„ìŠ¤**:

```javascript
// ë°°ê²½ì„ ì˜¤í”„ìŠ¤í¬ë¦° ìº”ë²„ìŠ¤ì— ë¯¸ë¦¬ ê·¸ë¦¬ê¸°
const offscreenCanvas = document.createElement('canvas');
offscreenCanvas.width = 800;
offscreenCanvas.height = 600;
const offscreenCtx = offscreenCanvas.getContext('2d');

// ë°°ê²½ í•œ ë²ˆë§Œ ê·¸ë¦¬ê¸°
function prepareBackground() {
    offscreenCtx.fillStyle = '#1e293b';
    offscreenCtx.fillRect(0, 0, 800, 600);

    // ê²©ì íŒ¨í„´
    offscreenCtx.strokeStyle = '#334155';
    for (let i = 0; i < 800; i += 50) {
        offscreenCtx.moveTo(i, 0);
        offscreenCtx.lineTo(i, 600);
    }
    for (let i = 0; i < 600; i += 50) {
        offscreenCtx.moveTo(0, i);
        offscreenCtx.lineTo(800, i);
    }
    offscreenCtx.stroke();
}

prepareBackground();

// ë Œë”ë§ ì‹œ ë³µì‚¬ë§Œ
function render() {
    // ë°°ê²½ ë³µì‚¬ (ë§¤ìš° ë¹ ë¦„)
    ctx.drawImage(offscreenCanvas, 0, 0);

    // ì—”í‹°í‹° ê·¸ë¦¬ê¸°
    renderEntities();
}
```

#### 9.4.2 ë©”ëª¨ë¦¬ ê´€ë¦¬

**ê°ì²´ í’€ë§**:

```javascript
// íŒŒí‹°í´ ê°ì²´ í’€
class ParticlePool {
    constructor(size) {
        this.pool = [];
        this.active = [];

        // ë¯¸ë¦¬ ê°ì²´ ìƒì„±
        for (let i = 0; i < size; i++) {
            this.pool.push({
                x: 0,
                y: 0,
                vx: 0,
                vy: 0,
                life: 0,
                maxLife: 0
            });
        }
    }

    get() {
        // í’€ì—ì„œ ê°€ì ¸ì˜¤ê¸°
        if (this.pool.length > 0) {
            const particle = this.pool.pop();
            this.active.push(particle);
            return particle;
        }

        // í’€ì´ ë¹„ì—ˆìœ¼ë©´ null ë°˜í™˜
        return null;
    }

    release(particle) {
        // í’€ë¡œ ë°˜í™˜
        const index = this.active.indexOf(particle);
        if (index !== -1) {
            this.active.splice(index, 1);
            this.pool.push(particle);
        }
    }

    update(deltaTime) {
        for (let i = this.active.length - 1; i >= 0; i--) {
            const p = this.active[i];

            p.x += p.vx;
            p.y += p.vy;
            p.life -= deltaTime;

            // ìˆ˜ëª… ë‹¤í•œ íŒŒí‹°í´ ë°˜í™˜
            if (p.life <= 0) {
                this.release(p);
            }
        }
    }
}

// ì‚¬ìš©
const particlePool = new ParticlePool(100);

function createExplosion(x, y) {
    for (let i = 0; i < 20; i++) {
        const particle = particlePool.get();

        if (particle) {
            particle.x = x;
            particle.y = y;
            particle.vx = (Math.random() - 0.5) * 10;
            particle.vy = (Math.random() - 0.5) * 10;
            particle.life = 1000;  // 1ì´ˆ
            particle.maxLife = 1000;
        }
    }
}
```

**ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì •ë¦¬**:

```javascript
// âœ… ì¢‹ì€ ì˜ˆ: ì •ë¦¬ í•¨ìˆ˜ ì œê³µ
class Game {
    constructor() {
        this.handleKeyDown = this.handleKeyDown.bind(this);
        this.handleKeyUp = this.handleKeyUp.bind(this);
    }

    init() {
        window.addEventListener('keydown', this.handleKeyDown);
        window.addEventListener('keyup', this.handleKeyUp);
    }

    destroy() {
        // ë¦¬ìŠ¤ë„ˆ ì œê±°
        window.removeEventListener('keydown', this.handleKeyDown);
        window.removeEventListener('keyup', this.handleKeyUp);

        // SDK ì •ë¦¬
        if (this.sdk) {
            this.sdk.destroy();
        }
    }

    handleKeyDown(e) {
        // í‚¤ ì²˜ë¦¬
    }

    handleKeyUp(e) {
        // í‚¤ ì²˜ë¦¬
    }
}

// í˜ì´ì§€ ì´íƒˆ ì‹œ ì •ë¦¬
window.addEventListener('beforeunload', () => {
    game.destroy();
});
```

#### 9.4.3 ì„¼ì„œ ë°ì´í„° ìµœì í™”

**ì„¼ì„œ ë°ì´í„° ì“°ë¡œí‹€ë§**:

```javascript
// SensorCollectorì—ì„œ ì´ë¯¸ ì œê³µë˜ì§€ë§Œ, ì¶”ê°€ í•„í„°ë§ ê°€ëŠ¥

// ë³€í™”ëŸ‰ ê¸°ë°˜ í•„í„°ë§
class SensorFilter {
    constructor(threshold = 1) {
        this.threshold = threshold;
        this.lastData = null;
    }

    shouldUpdate(newData) {
        if (!this.lastData) {
            this.lastData = newData;
            return true;
        }

        // ë³€í™”ëŸ‰ ê³„ì‚°
        const deltaGamma = Math.abs(newData.gamma - this.lastData.gamma);
        const deltaBeta = Math.abs(newData.beta - this.lastData.beta);

        // ì„ê³„ê°’ ì´ìƒ ë³€í™” ì‹œì—ë§Œ ì—…ë°ì´íŠ¸
        if (deltaGamma > this.threshold || deltaBeta > this.threshold) {
            this.lastData = newData;
            return true;
        }

        return false;
    }
}

// ì‚¬ìš©
const filter = new SensorFilter(2);  // 2ë„ ì´ìƒ ë³€í™” ì‹œì—ë§Œ

sdk.on('sensor-data', (event) => {
    const data = event.detail || event;
    const orientation = data.data.orientation;

    if (filter.shouldUpdate(orientation)) {
        // ìœ ì˜ë¯¸í•œ ë³€í™”ê°€ ìˆì„ ë•Œë§Œ ì²˜ë¦¬
        updateGameState(orientation);
    }
});
```

#### 9.4.4 Canvas ìµœì í™”

**ë ˆì´ì–´ ë¶„ë¦¬**:

```javascript
// ì—¬ëŸ¬ ìº”ë²„ìŠ¤ë¥¼ ê²¹ì³ì„œ ì‚¬ìš©
const backgroundCanvas = document.getElementById('bg-canvas');
const gameCanvas = document.getElementById('game-canvas');
const uiCanvas = document.getElementById('ui-canvas');

const bgCtx = backgroundCanvas.getContext('2d');
const gameCtx = gameCanvas.getContext('2d');
const uiCtx = uiCanvas.getContext('2d');

// CSSë¡œ ê²¹ì¹˜ê¸°
// background-canvas { position: absolute; z-index: 1; }
// game-canvas { position: absolute; z-index: 2; }
// ui-canvas { position: absolute; z-index: 3; }

// ë°°ê²½ì€ í•œ ë²ˆë§Œ ê·¸ë¦¬ê¸°
renderBackground(bgCtx);

// ê²Œì„ ë£¨í”„
function gameLoop() {
    // ê²Œì„ ë ˆì´ì–´ë§Œ ì§€ìš°ê³  ë‹¤ì‹œ ê·¸ë¦¬ê¸°
    gameCtx.clearRect(0, 0, 800, 600);
    renderGame(gameCtx);

    // UI ë ˆì´ì–´ë§Œ ì—…ë°ì´íŠ¸
    uiCtx.clearRect(0, 0, 800, 600);
    renderUI(uiCtx);

    requestAnimationFrame(gameLoop);
}
```

**ì •ìˆ˜ ì¢Œí‘œ ì‚¬ìš©**:

```javascript
// âœ… ì¢‹ì€ ì˜ˆ: ì •ìˆ˜ ì¢Œí‘œ
ctx.drawImage(sprite, Math.round(x), Math.round(y));

// âŒ ë‚˜ìœ ì˜ˆ: ì†Œìˆ˜ì  ì¢Œí‘œ (ì•ˆí‹°ì•¨ë¦¬ì–´ì‹± ë°œìƒ)
ctx.drawImage(sprite, x, y);
```

---

**Part 9 ì‘ì„± ì¤‘... (ê³„ì†)**

í˜„ì¬ê¹Œì§€ ì•½ 1,500ì¤„ ì‘ì„± ì™„ë£Œ. Part 9ëŠ” ë‹¤ìŒ ì„¹ì…˜ë“¤ì„ ì¶”ê°€ë¡œ ì‘ì„±í•  ì˜ˆì •:
- 9.5 ë””ë²„ê¹… ì „ëµ
- 9.6 í…ŒìŠ¤íŠ¸ ë° ê²€ì¦
- 9.7 ë°°í¬ ë° ê³µìœ 
- 9.8 ìœ ì§€ë³´ìˆ˜ ë° ì—…ë°ì´íŠ¸

---

### 9.5 ë””ë²„ê¹… ì „ëµ

íš¨ê³¼ì ì¸ ë””ë²„ê¹… ì „ëµì€ ê°œë°œ ì‹œê°„ì„ í¬ê²Œ ë‹¨ì¶•ì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

#### 9.5.1 Chrome DevTools í™œìš©

**ê¸°ë³¸ ë””ë²„ê¹… ë„êµ¬:**

```javascript
// 1. Console API í™œìš©
console.log('ì¼ë°˜ ë¡œê·¸');
console.warn('ê²½ê³  ë©”ì‹œì§€');
console.error('ì—ëŸ¬ ë©”ì‹œì§€');
console.table(gameState);  // ê°ì²´ë¥¼ í…Œì´ë¸” í˜•íƒœë¡œ ì¶œë ¥
console.time('render');     // ì„±ëŠ¥ ì¸¡ì • ì‹œì‘
// ... ì½”ë“œ ì‹¤í–‰ ...
console.timeEnd('render');  // ì„±ëŠ¥ ì¸¡ì • ì¢…ë£Œ

// 2. ì¡°ê±´ë¶€ ë¡œê·¸
console.assert(ball.x >= 0, 'ê³µì´ í™”ë©´ ë°–ìœ¼ë¡œ ë‚˜ê°”ìŠµë‹ˆë‹¤!');

// 3. ìŠ¤íƒ íŠ¸ë ˆì´ìŠ¤
console.trace('í•¨ìˆ˜ í˜¸ì¶œ ê²½ë¡œ í™•ì¸');
```

**ì¤‘ë‹¨ì (Breakpoint) í™œìš©:**

```javascript
// ì½”ë“œ ë‚´ ì¤‘ë‹¨ì  ì„¤ì •
debugger;  // ì´ ì¤„ì—ì„œ ì‹¤í–‰ì´ ë©ˆì¶¥ë‹ˆë‹¤

// ì¡°ê±´ë¶€ ì¤‘ë‹¨ì  (Chrome DevToolsì—ì„œ ì„¤ì •)
// ì˜ˆ: ball.x < 0 ì¼ ë•Œë§Œ ë©ˆì¶¤

// Watch í‘œí˜„ì‹ ì„¤ì •
// DevToolsì—ì„œ ball.x, ball.y ë“±ì„ ê°ì‹œ
```

**ë„¤íŠ¸ì›Œí¬ ë””ë²„ê¹…:**

```javascript
// WebSocket ì—°ê²° ëª¨ë‹ˆí„°ë§
sdk.on('connected', () => {
    console.log('âœ… WebSocket ì—°ê²° ì„±ê³µ');
    console.log('ì„œë²„:', sdk.socket.url);
});

sdk.on('disconnect', (reason) => {
    console.error('âŒ WebSocket ì—°ê²° ëŠê¹€:', reason);
});

// ë„¤íŠ¸ì›Œí¬ íƒ­ì—ì„œ í™•ì¸:
// - WS (WebSocket) íƒ­
// - ë©”ì‹œì§€ ì†¡ìˆ˜ì‹  ë‚´ì—­
// - ì—°ê²° ìƒíƒœ ë° ì—ëŸ¬
```

#### 9.5.2 ì„¼ì„œ ë°ì´í„° ë””ë²„ê¹…

**ì‹¤ì‹œê°„ ì„¼ì„œ ê°’ ì‹œê°í™”:**

```html
<!-- HTML: ë””ë²„ê·¸ íŒ¨ë„ -->
<div id="debug-panel" style="position: fixed; top: 60px; right: 10px; background: rgba(0,0,0,0.8); color: white; padding: 15px; font-family: monospace; font-size: 12px; border-radius: 8px; max-width: 300px;">
    <div style="font-weight: bold; margin-bottom: 10px;">ğŸ“Š ì„¼ì„œ ë””ë²„ê·¸</div>
    <div id="debug-orientation"></div>
    <div id="debug-acceleration"></div>
    <div id="debug-rotation"></div>
    <hr style="margin: 10px 0; border-color: #444;">
    <div id="debug-game-state"></div>
</div>
```

```javascript
// JavaScript: ì„¼ì„œ ë°ì´í„° ì‹œê°í™”
class SensorDebugger {
    constructor() {
        this.orientationEl = document.getElementById('debug-orientation');
        this.accelerationEl = document.getElementById('debug-acceleration');
        this.rotationEl = document.getElementById('debug-rotation');
        this.gameStateEl = document.getElementById('debug-game-state');
    }

    update(sensorData, gameState) {
        // ì„¼ì„œ ë°ì´í„° í‘œì‹œ
        if (sensorData && sensorData.orientation) {
            const o = sensorData.orientation;
            this.orientationEl.innerHTML = `
                <strong>Orientation:</strong><br>
                Î±: ${o.alpha?.toFixed(1) || 'N/A'}Â°<br>
                Î²: ${o.beta?.toFixed(1) || 'N/A'}Â°<br>
                Î³: ${o.gamma?.toFixed(1) || 'N/A'}Â°
            `;
        }

        if (sensorData && sensorData.acceleration) {
            const a = sensorData.acceleration;
            this.accelerationEl.innerHTML = `
                <strong>Acceleration:</strong><br>
                x: ${a.x?.toFixed(2) || 'N/A'}<br>
                y: ${a.y?.toFixed(2) || 'N/A'}<br>
                z: ${a.z?.toFixed(2) || 'N/A'}
            `;
        }

        if (sensorData && sensorData.rotationRate) {
            const r = sensorData.rotationRate;
            this.rotationEl.innerHTML = `
                <strong>Rotation Rate:</strong><br>
                Î±: ${r.alpha?.toFixed(2) || 'N/A'}Â°/s<br>
                Î²: ${r.beta?.toFixed(2) || 'N/A'}Â°/s<br>
                Î³: ${r.gamma?.toFixed(2) || 'N/A'}Â°/s
            `;
        }

        // ê²Œì„ ìƒíƒœ í‘œì‹œ
        if (gameState) {
            this.gameStateEl.innerHTML = `
                <strong>Game State:</strong><br>
                Playing: ${gameState.isPlaying}<br>
                Score: ${gameState.score}<br>
                Lives: ${gameState.lives}
            `;
        }
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const debugger = new SensorDebugger();

sdk.on('sensor-data', (event) => {
    const data = event.detail || event;
    debugger.update(data.data, gameState);
    processSensorInput(data.data);
});
```

**ì„¼ì„œ ê°’ íˆìŠ¤í† ë¦¬ ê·¸ë˜í”„:**

```javascript
class SensorGraph {
    constructor(canvasId, maxPoints = 100) {
        this.canvas = document.getElementById(canvasId);
        this.ctx = this.canvas.getContext('2d');
        this.maxPoints = maxPoints;

        this.gammaHistory = [];
        this.betaHistory = [];
    }

    addData(gamma, beta) {
        this.gammaHistory.push(gamma);
        this.betaHistory.push(beta);

        if (this.gammaHistory.length > this.maxPoints) {
            this.gammaHistory.shift();
            this.betaHistory.shift();
        }

        this.draw();
    }

    draw() {
        const w = this.canvas.width;
        const h = this.canvas.height;

        this.ctx.clearRect(0, 0, w, h);

        // ë°°ê²½ ê·¸ë¦¬ë“œ
        this.ctx.strokeStyle = '#333';
        this.ctx.beginPath();
        this.ctx.moveTo(0, h / 2);
        this.ctx.lineTo(w, h / 2);
        this.ctx.stroke();

        // Gamma ê·¸ë˜í”„ (ë¹¨ê°•)
        this.drawLine(this.gammaHistory, '#ff0000', h, 90);

        // Beta ê·¸ë˜í”„ (íŒŒë‘)
        this.drawLine(this.betaHistory, '#0000ff', h, 90);

        // ë²”ë¡€
        this.ctx.font = '12px monospace';
        this.ctx.fillStyle = '#ff0000';
        this.ctx.fillText('Î³ (ì¢Œìš°)', 10, 20);
        this.ctx.fillStyle = '#0000ff';
        this.ctx.fillText('Î² (ì•ë’¤)', 10, 35);
    }

    drawLine(data, color, height, maxValue) {
        if (data.length < 2) return;

        this.ctx.strokeStyle = color;
        this.ctx.lineWidth = 2;
        this.ctx.beginPath();

        const w = this.canvas.width;
        const step = w / this.maxPoints;

        data.forEach((value, index) => {
            const x = index * step;
            const y = height / 2 - (value / maxValue) * (height / 2);

            if (index === 0) {
                this.ctx.moveTo(x, y);
            } else {
                this.ctx.lineTo(x, y);
            }
        });

        this.ctx.stroke();
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const sensorGraph = new SensorGraph('sensor-graph-canvas', 100);

sdk.on('sensor-data', (event) => {
    const data = event.detail || event;
    const o = data.data.orientation;
    sensorGraph.addData(o.gamma, o.beta);
});
```

#### 9.5.3 ì„±ëŠ¥ í”„ë¡œíŒŒì¼ë§

**í”„ë ˆì„ ë“œë¡­ ê°ì§€:**

```javascript
class PerformanceMonitor {
    constructor(targetFPS = 60) {
        this.targetFPS = targetFPS;
        this.targetFrameTime = 1000 / targetFPS;

        this.frameDrops = 0;
        this.totalFrames = 0;
        this.worstFrameTime = 0;

        this.lastReportTime = Date.now();
    }

    measure(deltaTime) {
        this.totalFrames++;

        // í”„ë ˆì„ ë“œë¡­ ê°ì§€
        if (deltaTime > this.targetFrameTime * 1.5) {
            this.frameDrops++;
            console.warn(`âš ï¸ í”„ë ˆì„ ë“œë¡­: ${deltaTime.toFixed(2)}ms (ëª©í‘œ: ${this.targetFrameTime.toFixed(2)}ms)`);
        }

        // ìµœì•…ì˜ í”„ë ˆì„ íƒ€ì„ ê¸°ë¡
        if (deltaTime > this.worstFrameTime) {
            this.worstFrameTime = deltaTime;
        }

        // 10ì´ˆë§ˆë‹¤ ë¦¬í¬íŠ¸
        const now = Date.now();
        if (now - this.lastReportTime > 10000) {
            this.report();
            this.lastReportTime = now;
        }
    }

    report() {
        const dropRate = (this.frameDrops / this.totalFrames * 100).toFixed(2);
        console.log(`
ğŸ“Š ì„±ëŠ¥ ë¦¬í¬íŠ¸ (ìµœê·¼ 10ì´ˆ)
- ì´ í”„ë ˆì„: ${this.totalFrames}
- í”„ë ˆì„ ë“œë¡­: ${this.frameDrops} (${dropRate}%)
- ìµœì•… í”„ë ˆì„ íƒ€ì„: ${this.worstFrameTime.toFixed(2)}ms
        `);

        this.frameDrops = 0;
        this.totalFrames = 0;
        this.worstFrameTime = 0;
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const perfMonitor = new PerformanceMonitor();

function gameLoop(timestamp) {
    const deltaTime = timestamp - lastTimestamp;
    lastTimestamp = timestamp;

    perfMonitor.measure(deltaTime);

    update(deltaTime);
    render();

    requestAnimationFrame(gameLoop);
}
```

**í•¨ìˆ˜ ì‹¤í–‰ ì‹œê°„ ì¸¡ì •:**

```javascript
class FunctionProfiler {
    constructor() {
        this.profiles = new Map();
    }

    start(functionName) {
        this.profiles.set(functionName, performance.now());
    }

    end(functionName) {
        if (!this.profiles.has(functionName)) {
            console.warn(`í”„ë¡œíŒŒì¼ë§ ì‹œì‘ ì•ˆ ë¨: ${functionName}`);
            return;
        }

        const startTime = this.profiles.get(functionName);
        const endTime = performance.now();
        const duration = endTime - startTime;

        console.log(`â±ï¸ ${functionName}: ${duration.toFixed(2)}ms`);
        this.profiles.delete(functionName);

        // ì„±ëŠ¥ ê²½ê³  (5ms ì´ìƒ)
        if (duration > 5) {
            console.warn(`âš ï¸ ${functionName}ì´ ëŠë¦½ë‹ˆë‹¤: ${duration.toFixed(2)}ms`);
        }
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const profiler = new FunctionProfiler();

function update(deltaTime) {
    profiler.start('update');

    profiler.start('physics');
    updatePhysics(deltaTime);
    profiler.end('physics');

    profiler.start('collision');
    checkCollisions();
    profiler.end('collision');

    profiler.start('ai');
    updateAI(deltaTime);
    profiler.end('ai');

    profiler.end('update');
}
```

#### 9.5.4 ì¼ë°˜ì ì¸ ë²„ê·¸ íŒ¨í„´ ë° í•´ê²°

**ë²„ê·¸ 1: ì„¸ì…˜ ì½”ë“œê°€ undefined**

```javascript
// âŒ ì˜ëª»ëœ ì½”ë“œ
sdk.on('session-created', (session) => {
    console.log(session.sessionCode);  // undefined!
});

// âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ
sdk.on('session-created', (event) => {
    const session = event.detail || event;  // CustomEvent ì²˜ë¦¬
    console.log(session.sessionCode);
});
```

**ë²„ê·¸ 2: ê³µì´ íŒ¨ë“¤ì— ë¶™ì–´ìˆìŒ**

```javascript
// âŒ ë¬¸ì œ ì½”ë“œ
ball.vy = Math.abs(ball.vy);  // í•­ìƒ ì–‘ìˆ˜ â†’ ê³µì´ íŒ¨ë“¤ì— ë¶™ìŒ

// âœ… ìˆ˜ì • ì½”ë“œ
if (ball.y + ball.radius > paddle.y && ball.vy > 0) {
    ball.vy = -Math.abs(ball.vy);  // ìœ„ë¡œ íŠ€ì–´ì˜¤ë¦„
    ball.y = paddle.y - ball.radius;  // ìœ„ì¹˜ ë³´ì •
}
```

**ë²„ê·¸ 3: ì„¼ì„œ ì—°ê²° ì „ ê²Œì„ ì‹œì‘**

```javascript
// âŒ ë¬¸ì œ ì½”ë“œ
sdk.on('session-created', () => {
    startGame();  // ì„¼ì„œ ì—°ê²° ì „ ì‹œì‘!
});

// âœ… ìˆ˜ì • ì½”ë“œ
let sensorsReady = false;

sdk.on('sensor-connected', () => {
    sensorsReady = true;
    showStartButton();
});

function startGame() {
    if (!sensorsReady) {
        alert('ì„¼ì„œë¥¼ ë¨¼ì € ì—°ê²°í•´ì£¼ì„¸ìš”!');
        return;
    }
    gameState.isPlaying = true;
}
```

**ë²„ê·¸ 4: ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ (ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ)**

```javascript
// âŒ ë¬¸ì œ ì½”ë“œ
sdk.on('sensor-data', processSensorData);  // ì—¬ëŸ¬ ë²ˆ í˜¸ì¶œí•˜ë©´ ì¤‘ë³µ ë“±ë¡

// âœ… ìˆ˜ì • ì½”ë“œ
// ê¸°ì¡´ ë¦¬ìŠ¤ë„ˆ ì œê±° í›„ ë“±ë¡
sdk.off('sensor-data', processSensorData);
sdk.on('sensor-data', processSensorData);

// ë˜ëŠ” once ì‚¬ìš©
sdk.once('session-created', handleSessionCreated);
```

**ë²„ê·¸ 5: ìº”ë²„ìŠ¤ ì¢Œí‘œ vs í™”ë©´ ì¢Œí‘œ**

```javascript
// âŒ ë¬¸ì œ ì½”ë“œ
canvas.addEventListener('click', (e) => {
    const x = e.clientX;
    const y = e.clientY;
    checkClick(x, y);  // ì˜ëª»ëœ ì¢Œí‘œ!
});

// âœ… ìˆ˜ì • ì½”ë“œ
canvas.addEventListener('click', (e) => {
    const rect = canvas.getBoundingClientRect();
    const scaleX = canvas.width / rect.width;
    const scaleY = canvas.height / rect.height;

    const x = (e.clientX - rect.left) * scaleX;
    const y = (e.clientY - rect.top) * scaleY;

    checkClick(x, y);
});
```

---

### 9.6 í…ŒìŠ¤íŠ¸ ë° ê²€ì¦

ì² ì €í•œ í…ŒìŠ¤íŠ¸ëŠ” ê³ í’ˆì§ˆ ê²Œì„ì˜ í•„ìˆ˜ ìš”ì†Œì…ë‹ˆë‹¤.

#### 9.6.1 ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Testing)

**í…ŒìŠ¤íŠ¸ ê°€ëŠ¥í•œ ì½”ë“œ ì‘ì„±:**

```javascript
// âœ… í…ŒìŠ¤íŠ¸í•˜ê¸° ì‰¬ìš´ ìˆœìˆ˜ í•¨ìˆ˜
function checkCollision(ball, paddle) {
    return ball.y + ball.radius >= paddle.y &&
           ball.y - ball.radius <= paddle.y + paddle.height &&
           ball.x >= paddle.x &&
           ball.x <= paddle.x + paddle.width;
}

// í…ŒìŠ¤íŠ¸ ì½”ë“œ (Jest ì˜ˆì‹œ)
describe('checkCollision', () => {
    test('ê³µì´ íŒ¨ë“¤ì— ì¶©ëŒí•¨', () => {
        const ball = { x: 50, y: 100, radius: 10 };
        const paddle = { x: 40, y: 95, width: 20, height: 5 };
        expect(checkCollision(ball, paddle)).toBe(true);
    });

    test('ê³µì´ íŒ¨ë“¤ì„ ë¹—ë‚˜ê°', () => {
        const ball = { x: 50, y: 50, radius: 10 };
        const paddle = { x: 40, y: 95, width: 20, height: 5 };
        expect(checkCollision(ball, paddle)).toBe(false);
    });
});
```

**ë¬¼ë¦¬ ì—”ì§„ í…ŒìŠ¤íŠ¸:**

```javascript
// ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜ í•¨ìˆ˜
function updateBallPhysics(ball, deltaTime, gravity = 0.5) {
    ball.vy += gravity * deltaTime;
    ball.x += ball.vx * deltaTime;
    ball.y += ball.vy * deltaTime;
    return ball;
}

// í…ŒìŠ¤íŠ¸
describe('updateBallPhysics', () => {
    test('ì¤‘ë ¥ìœ¼ë¡œ ì¸í•´ ì†ë„ê°€ ì¦ê°€í•¨', () => {
        const ball = { x: 0, y: 0, vx: 0, vy: 0 };
        updateBallPhysics(ball, 1, 0.5);
        expect(ball.vy).toBe(0.5);
    });

    test('ë“±ì† ìš´ë™', () => {
        const ball = { x: 0, y: 0, vx: 10, vy: 0 };
        updateBallPhysics(ball, 1, 0);
        expect(ball.x).toBe(10);
        expect(ball.y).toBe(0);
    });
});
```

#### 9.6.2 í†µí•© í…ŒìŠ¤íŠ¸ (Integration Testing)

**SessionSDK í†µí•© í…ŒìŠ¤íŠ¸:**

```javascript
// í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤: ì„¸ì…˜ ìƒì„± â†’ ì„¼ì„œ ì—°ê²° â†’ ë°ì´í„° ìˆ˜ì‹ 
async function testSDKIntegration() {
    console.log('ğŸ§ª SDK í†µí•© í…ŒìŠ¤íŠ¸ ì‹œì‘...');

    const sdk = new SessionSDK({
        gameId: 'test-game',
        gameType: 'solo',
        debug: true
    });

    // Step 1: ì„œë²„ ì—°ê²°
    await new Promise((resolve) => {
        sdk.on('connected', () => {
            console.log('âœ… Step 1: ì„œë²„ ì—°ê²° ì„±ê³µ');
            resolve();
        });
    });

    // Step 2: ì„¸ì…˜ ìƒì„±
    const session = await sdk.createSession();
    console.assert(session.sessionCode, 'ì„¸ì…˜ ì½”ë“œê°€ ìƒì„±ë˜ì–´ì•¼ í•¨');
    console.assert(session.sessionCode.length === 4, 'ì„¸ì…˜ ì½”ë“œëŠ” 4ìë¦¬ì—¬ì•¼ í•¨');
    console.log(`âœ… Step 2: ì„¸ì…˜ ìƒì„± (${session.sessionCode})`);

    // Step 3: ì„¼ì„œ ì—°ê²° ëŒ€ê¸° (ìˆ˜ë™ í…ŒìŠ¤íŠ¸)
    await new Promise((resolve) => {
        sdk.on('sensor-connected', (event) => {
            const data = event.detail || event;
            console.log('âœ… Step 3: ì„¼ì„œ ì—°ê²°', data);
            resolve();
        });

        console.log('â³ ì„¼ì„œë¥¼ ì—°ê²°í•´ì£¼ì„¸ìš”... (http://localhost:3000/sensor.html)');
    });

    // Step 4: ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹ 
    let dataReceived = false;
    sdk.on('sensor-data', (event) => {
        const data = event.detail || event;
        console.assert(data.data.orientation, 'ì„¼ì„œ ë°ì´í„°ì— orientationì´ ìˆì–´ì•¼ í•¨');
        console.log('âœ… Step 4: ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹ ', data.data.orientation);
        dataReceived = true;
    });

    await new Promise((resolve) => setTimeout(resolve, 5000));
    console.assert(dataReceived, '5ì´ˆ ë‚´ì— ì„¼ì„œ ë°ì´í„°ë¥¼ ë°›ì•„ì•¼ í•¨');

    console.log('âœ… SDK í†µí•© í…ŒìŠ¤íŠ¸ ì™„ë£Œ!');
}

// ì‹¤í–‰
testSDKIntegration().catch(console.error);
```

**ê²Œì„ í”Œë¡œìš° í…ŒìŠ¤íŠ¸:**

```javascript
// E2E í…ŒìŠ¤íŠ¸: ê²Œì„ ì‹œì‘ë¶€í„° ì¢…ë£Œê¹Œì§€
async function testGameFlow() {
    console.log('ğŸ§ª ê²Œì„ í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ì‹œì‘...');

    // 1. ê²Œì„ ì´ˆê¸°í™”
    console.log('Step 1: ê²Œì„ ì´ˆê¸°í™”...');
    initGame();
    console.assert(gameState, 'gameStateê°€ ì´ˆê¸°í™”ë˜ì–´ì•¼ í•¨');
    console.assert(canvas, 'canvasê°€ ì¡´ì¬í•´ì•¼ í•¨');

    // 2. ì„¸ì…˜ ìƒì„±
    console.log('Step 2: ì„¸ì…˜ ìƒì„±...');
    const session = await sdk.createSession();
    console.assert(session.sessionCode, 'ì„¸ì…˜ ì½”ë“œ ìƒì„±ë¨');

    // 3. ì„¼ì„œ ì—°ê²° (ì‹œë®¬ë ˆì´ì…˜)
    console.log('Step 3: ì„¼ì„œ ì—°ê²° ì‹œë®¬ë ˆì´ì…˜...');
    sdk.emit('sensor-connected', { sensorId: 'test-sensor' });

    // 4. ê²Œì„ ì‹œì‘
    console.log('Step 4: ê²Œì„ ì‹œì‘...');
    startGame();
    console.assert(gameState.isPlaying === true, 'ê²Œì„ì´ ì‹œì‘ë˜ì–´ì•¼ í•¨');

    // 5. ì„¼ì„œ ë°ì´í„° ì „ì†¡ (ì‹œë®¬ë ˆì´ì…˜)
    console.log('Step 5: ì„¼ì„œ ë°ì´í„° ì „ì†¡...');
    const mockSensorData = {
        sensorId: 'test-sensor',
        data: {
            orientation: { alpha: 0, beta: 10, gamma: -5 },
            acceleration: { x: 0, y: 9.8, z: 0 },
            rotationRate: { alpha: 0, beta: 0, gamma: 0 }
        }
    };
    sdk.emit('sensor-data', mockSensorData);

    // 6. ê²Œì„ ë¡œì§ ì‹¤í–‰
    console.log('Step 6: ê²Œì„ ë£¨í”„ 1ì´ˆ ì‹¤í–‰...');
    for (let i = 0; i < 60; i++) {
        update(16.67);  // 60 FPS
        render();
    }

    // 7. ê²Œì„ ì¢…ë£Œ
    console.log('Step 7: ê²Œì„ ì¢…ë£Œ...');
    endGame();
    console.assert(gameState.isPlaying === false, 'ê²Œì„ì´ ì¢…ë£Œë˜ì–´ì•¼ í•¨');

    console.log('âœ… ê²Œì„ í”Œë¡œìš° í…ŒìŠ¤íŠ¸ ì™„ë£Œ!');
}

// ì‹¤í–‰
testGameFlow().catch(console.error);
```

#### 9.6.3 í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸

**ë¸Œë¼ìš°ì €ë³„ í˜¸í™˜ì„± ì²´í¬ë¦¬ìŠ¤íŠ¸:**

```markdown
## í¬ë¡œìŠ¤ ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸

### Desktop ë¸Œë¼ìš°ì €
- [ ] Chrome (ìµœì‹ )
  - [ ] SessionSDK ì—°ê²°
  - [ ] Canvas ë Œë”ë§
  - [ ] ì„±ëŠ¥ (60 FPS)

- [ ] Firefox (ìµœì‹ )
  - [ ] SessionSDK ì—°ê²°
  - [ ] Canvas ë Œë”ë§
  - [ ] ì„±ëŠ¥

- [ ] Safari (ìµœì‹ )
  - [ ] SessionSDK ì—°ê²°
  - [ ] Canvas ë Œë”ë§
  - [ ] ì„±ëŠ¥

- [ ] Edge (ìµœì‹ )
  - [ ] SessionSDK ì—°ê²°
  - [ ] Canvas ë Œë”ë§
  - [ ] ì„±ëŠ¥

### Mobile ë¸Œë¼ìš°ì €
- [ ] iOS Safari
  - [ ] ì„¼ì„œ ê¶Œí•œ ìš”ì²­
  - [ ] DeviceOrientation API
  - [ ] DeviceMotion API
  - [ ] ì„¸ì…˜ ì½”ë“œ ì…ë ¥
  - [ ] QR ì½”ë“œ ìŠ¤ìº”

- [ ] Android Chrome
  - [ ] ì„¼ì„œ ê¶Œí•œ ìš”ì²­
  - [ ] DeviceOrientation API
  - [ ] DeviceMotion API
  - [ ] ì„¸ì…˜ ì½”ë“œ ì…ë ¥
  - [ ] QR ì½”ë“œ ìŠ¤ìº”

### íŠ¹ìˆ˜ ì¼€ì´ìŠ¤
- [ ] ì €ì‚¬ì–‘ ê¸°ê¸° (ì˜ˆ: iPhone SE)
- [ ] íƒœë¸”ë¦¿ (iPad, Android íƒœë¸”ë¦¿)
- [ ] ê°œì¸ì •ë³´ ë³´í˜¸ ëª¨ë“œ (Incognito/Private)
- [ ] ëŠë¦° ë„¤íŠ¸ì›Œí¬ í™˜ê²½ (3G ì‹œë®¬ë ˆì´ì…˜)
```

**ë¸Œë¼ìš°ì € ê°ì§€ ë° í´ë°±:**

```javascript
// ë¸Œë¼ìš°ì € ê¸°ëŠ¥ ê°ì§€
function checkBrowserSupport() {
    const support = {
        websocket: 'WebSocket' in window,
        canvas: !!document.createElement('canvas').getContext,
        orientation: 'DeviceOrientationEvent' in window,
        motion: 'DeviceMotionEvent' in window,
        requestAnimationFrame: 'requestAnimationFrame' in window
    };

    console.log('ë¸Œë¼ìš°ì € ì§€ì› í˜„í™©:', support);

    // í•„ìˆ˜ ê¸°ëŠ¥ í™•ì¸
    const required = ['websocket', 'canvas', 'requestAnimationFrame'];
    for (const feature of required) {
        if (!support[feature]) {
            alert(`ì´ ë¸Œë¼ìš°ì €ëŠ” ${feature}ì„(ë¥¼) ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.`);
            return false;
        }
    }

    // ì„¼ì„œ ê²½ê³  (ëª¨ë°”ì¼ë§Œ í•„ìš”)
    if (!support.orientation || !support.motion) {
        console.warn('âš ï¸ ì„¼ì„œ APIê°€ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ë¡œ ì‚¬ìš©í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
    }

    return true;
}

// ì´ˆê¸°í™” ì‹œ ì²´í¬
if (checkBrowserSupport()) {
    initGame();
} else {
    document.body.innerHTML = '<h1>ì£„ì†¡í•©ë‹ˆë‹¤. ì´ ë¸Œë¼ìš°ì €ëŠ” ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</h1>';
}
```

#### 9.6.4 ëª¨ë°”ì¼ ì„¼ì„œ í…ŒìŠ¤íŠ¸

**ì„¼ì„œ ì‹œë®¬ë ˆì´í„° (ë°ìŠ¤í¬í†± í…ŒìŠ¤íŠ¸ìš©):**

```javascript
// ë°ìŠ¤í¬í†±ì—ì„œ ì„¼ì„œ ë°ì´í„° ì‹œë®¬ë ˆì´ì…˜
class SensorSimulator {
    constructor(sdk) {
        this.sdk = sdk;
        this.angle = 0;
        this.isRunning = false;
    }

    start() {
        this.isRunning = true;
        console.log('ğŸ® ì„¼ì„œ ì‹œë®¬ë ˆì´í„° ì‹œì‘ (â† â†’ í‚¤ë¡œ ì¡°ì‘)');

        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') this.angle = -30;
            if (e.key === 'ArrowRight') this.angle = 30;
            if (e.key === 'ArrowUp') this.angle = 0;
        });

        // ì„¼ì„œ ë°ì´í„° ì „ì†¡
        setInterval(() => {
            if (!this.isRunning) return;

            const mockData = {
                sensorId: 'simulator',
                gameType: 'solo',
                data: {
                    orientation: {
                        alpha: 0,
                        beta: 0,
                        gamma: this.angle
                    },
                    acceleration: {
                        x: this.angle * 0.1,
                        y: 9.8,
                        z: 0
                    },
                    rotationRate: {
                        alpha: 0,
                        beta: 0,
                        gamma: 0
                    }
                },
                timestamp: Date.now()
            };

            this.sdk.emit('sensor-data', mockData);

            // ì„œì„œíˆ ì¤‘ì•™ìœ¼ë¡œ ë³µê·€
            this.angle *= 0.9;
        }, 50);
    }

    stop() {
        this.isRunning = false;
    }
}

// ê°œë°œ ëª¨ë“œì—ì„œ ìë™ í™œì„±í™”
if (window.location.hostname === 'localhost' && !('ontouchstart' in window)) {
    const simulator = new SensorSimulator(sdk);
    simulator.start();
    console.log('ğŸ’¡ íŒ: â† â†’ í‚¤ë¡œ ì„¼ì„œë¥¼ ì‹œë®¬ë ˆì´ì…˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
}
```

**ì‹¤ì œ ëª¨ë°”ì¼ í…ŒìŠ¤íŠ¸ ì²´í¬ë¦¬ìŠ¤íŠ¸:**

```markdown
## ëª¨ë°”ì¼ ì„¼ì„œ í…ŒìŠ¤íŠ¸ í•­ëª©

### iOS (Safari)
- [ ] HTTPS í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸ (ì„¼ì„œ ê¶Œí•œ í•„ìš”)
- [ ] DeviceOrientationEvent.requestPermission() í˜¸ì¶œ
- [ ] ì„¼ì„œ ê¶Œí•œ ìŠ¹ì¸ â†’ ë°ì´í„° ìˆ˜ì‹  í™•ì¸
- [ ] ì„¼ì„œ ê¶Œí•œ ê±°ë¶€ â†’ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- [ ] í™ˆ í™”ë©´ì— ì¶”ê°€ â†’ PWA ëª¨ë“œ í…ŒìŠ¤íŠ¸
- [ ] í™”ë©´ íšŒì „ â†’ ê°€ë¡œ/ì„¸ë¡œ ëª¨ë“œ ì „í™˜
- [ ] ë°±ê·¸ë¼ìš´ë“œ ì „í™˜ â†’ ì¬ì—°ê²° í™•ì¸

### Android (Chrome)
- [ ] ì„¼ì„œ ê¶Œí•œ ìë™ ìŠ¹ì¸ í™•ì¸
- [ ] ì„¼ì„œ ë°ì´í„° ì •í™•ë„ í™•ì¸
- [ ] ë‹¤ì–‘í•œ ê¸°ê¸°ì—ì„œ í…ŒìŠ¤íŠ¸ (ì‚¼ì„±, LG, í”½ì…€ ë“±)
- [ ] í™”ë©´ íšŒì „ â†’ ê°€ë¡œ/ì„¸ë¡œ ëª¨ë“œ ì „í™˜
- [ ] ë°±ê·¸ë¼ìš´ë“œ ì „í™˜ â†’ ì¬ì—°ê²° í™•ì¸

### ì„¼ì„œ ì •í™•ë„
- [ ] gamma ê°’ ë²”ìœ„: -90Â° ~ 90Â°
- [ ] beta ê°’ ë²”ìœ„: -180Â° ~ 180Â°
- [ ] í‰í‰í•œ ìƒíƒœì—ì„œ gamma â‰ˆ 0Â°
- [ ] ì¢Œë¡œ ê¸°ìš¸ì´ë©´ gamma < 0Â°
- [ ] ìš°ë¡œ ê¸°ìš¸ì´ë©´ gamma > 0Â°
```

---

### 9.7 ë°°í¬ ë° ê³µìœ 

ê²Œì„ì„ ì™„ì„±í–ˆë‹¤ë©´ ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ê³µìœ í•´ë³´ì„¸ìš”.

#### 9.7.1 ë°°í¬ ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

```markdown
## ë°°í¬ ì „ ìµœì¢… ì ê²€

### í•„ìˆ˜ íŒŒì¼
- [ ] index.html (ê²Œì„ ë©”ì¸ íŒŒì¼)
- [ ] game.json (ê²Œì„ ë©”íƒ€ë°ì´í„°)
- [ ] README.md (ê²Œì„ ì„¤ëª…ì„œ) - ì„ íƒì‚¬í•­

### ì½”ë“œ í’ˆì§ˆ
- [ ] ëª¨ë“  console.log ì œê±° ë˜ëŠ” debug í”Œë˜ê·¸ë¡œ ê°ì‹¸ê¸°
- [ ] ì£¼ì„ ì •ë¦¬ ë° ë¬¸ì„œí™”
- [ ] ë¶ˆí•„ìš”í•œ ì½”ë“œ ì œê±°
- [ ] ë³€ìˆ˜ëª… ë° í•¨ìˆ˜ëª… ëª…í™•ì„± í™•ì¸

### ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸
- [ ] ì„¸ì…˜ ìƒì„± ë° QR ì½”ë“œ í‘œì‹œ
- [ ] ì„¼ì„œ ì—°ê²° ë° ë°ì´í„° ìˆ˜ì‹ 
- [ ] ê²Œì„ ë¡œì§ ì •ìƒ ì‘ë™
- [ ] ê²Œì„ ì¢…ë£Œ ë° ì¬ì‹œì‘
- [ ] ì—ëŸ¬ ì²˜ë¦¬ í™•ì¸

### ì„±ëŠ¥ ìµœì í™”
- [ ] 60 FPS ìœ ì§€ í™•ì¸
- [ ] ë©”ëª¨ë¦¬ ëˆ„ìˆ˜ ì—†ìŒ
- [ ] ë„¤íŠ¸ì›Œí¬ ì§€ì—° ì²˜ë¦¬
- [ ] ëª¨ë°”ì¼ ì„±ëŠ¥ í™•ì¸

### UI/UX
- [ ] ë°˜ì‘í˜• ë””ìì¸ (ë‹¤ì–‘í•œ í™”ë©´ í¬ê¸°)
- [ ] í„°ì¹˜ ì¸í„°í˜ì´ìŠ¤ ìµœì í™”
- [ ] ë¡œë”© ìƒíƒœ í‘œì‹œ
- [ ] ì—ëŸ¬ ë©”ì‹œì§€ ì¹œí™”ì 

### ë¸Œë¼ìš°ì € í˜¸í™˜ì„±
- [ ] Chrome (ë°ìŠ¤í¬í†± + ëª¨ë°”ì¼)
- [ ] Safari (iOS)
- [ ] Firefox
- [ ] Edge

### ë¬¸ì„œ
- [ ] game.json ì •ë³´ ì •í™•ì„±
- [ ] README.md ì‘ì„± (í”Œë ˆì´ ë°©ë²•, ì¡°ì‘ë²•)
- [ ] ìŠ¤í¬ë¦°ìƒ· ì¶”ê°€ (ì„ íƒì‚¬í•­)
```

#### 9.7.2 ê²Œì„ í´ë” êµ¬ì¡°

**í‘œì¤€ êµ¬ì¡°:**

```
public/games/your-game-name/
â”œâ”€â”€ index.html           # í•„ìˆ˜: ê²Œì„ ë©”ì¸ íŒŒì¼
â”œâ”€â”€ game.json            # í•„ìˆ˜: ê²Œì„ ë©”íƒ€ë°ì´í„°
â”œâ”€â”€ README.md            # ì„ íƒ: ê²Œì„ ì„¤ëª…ì„œ
â”œâ”€â”€ assets/              # ì„ íƒ: ì´ë¯¸ì§€, ì‚¬ìš´ë“œ ë“±
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ thumbnail.png
â”‚   â”‚   â””â”€â”€ screenshot.png
â”‚   â””â”€â”€ sounds/
â”‚       â””â”€â”€ bgm.mp3
â””â”€â”€ styles/              # ì„ íƒ: ë³„ë„ CSS íŒŒì¼
    â””â”€â”€ game.css
```

**game.json ì˜ˆì‹œ:**

```json
{
    "id": "tilt-ball-maze",
    "title": "Tilt Ball Maze",
    "description": "ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ ê³µì„ êµ´ë¦¬ê³  ë¯¸ë¡œë¥¼ íƒˆì¶œí•˜ì„¸ìš”!",
    "author": "Your Name",
    "version": "1.0.0",
    "gameType": "solo",
    "thumbnail": "assets/images/thumbnail.png",
    "tags": ["maze", "physics", "tilt"],
    "difficulty": "medium",
    "estimatedPlayTime": "5-10ë¶„",
    "instructions": {
        "ko": "ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ ê³µì„ ì¡°ì‘í•©ë‹ˆë‹¤. ì¥ì• ë¬¼ì„ í”¼í•˜ê³  ì¶œêµ¬ê¹Œì§€ ë„ë‹¬í•˜ì„¸ìš”!",
        "en": "Tilt your smartphone to control the ball. Avoid obstacles and reach the exit!"
    },
    "controls": {
        "sensor": "orientation",
        "description": "ì¢Œìš°/ì•ë’¤ ê¸°ìš¸ê¸°ë¡œ ê³µ ì¡°ì‘"
    },
    "requirements": {
        "minPlayers": 1,
        "maxPlayers": 1,
        "sensors": ["orientation"]
    }
}
```

**README.md ì˜ˆì‹œ:**

```markdown
# ğŸ® Tilt Ball Maze

ìŠ¤ë§ˆíŠ¸í°ì„ ê¸°ìš¸ì—¬ ê³µì„ êµ´ë¦¬ê³  ë¯¸ë¡œë¥¼ íƒˆì¶œí•˜ëŠ” ê²Œì„ì…ë‹ˆë‹¤.

## ğŸ¯ ê²Œì„ ëª©í‘œ

- ì‹œê°„ ë‚´ì— ì¶œêµ¬ê¹Œì§€ ê³µì„ êµ´ë ¤ ë„ë‹¬í•˜ì„¸ìš”
- ì¥ì• ë¬¼ê³¼ í•¨ì •ì„ í”¼í•˜ì„¸ìš”
- ìµœê³  ì ìˆ˜ë¥¼ ë‹¬ì„±í•˜ì„¸ìš”

## ğŸ•¹ï¸ ì¡°ì‘ ë°©ë²•

1. ë°ìŠ¤í¬í†±ì—ì„œ ê²Œì„ ì‹¤í–‰ ë° ì„¸ì…˜ ì½”ë“œ í™•ì¸
2. ìŠ¤ë§ˆíŠ¸í°ìœ¼ë¡œ ì„¼ì„œ í´ë¼ì´ì–¸íŠ¸ ì ‘ì†
3. ì„¸ì…˜ ì½”ë“œ ì…ë ¥ ë˜ëŠ” QR ì½”ë“œ ìŠ¤ìº”
4. **ìŠ¤ë§ˆíŠ¸í°ì„ ì¢Œìš°/ì•ë’¤ë¡œ ê¸°ìš¸ì—¬ ê³µ ì¡°ì‘**

## ğŸ“± í•„ìš”í•œ ê²ƒ

- ë°ìŠ¤í¬í†± (ê²Œì„ í™”ë©´)
- ìŠ¤ë§ˆíŠ¸í° (ì„¼ì„œ ì»¨íŠ¸ë¡¤ëŸ¬)
- ì•ˆì •ì ì¸ Wi-Fi ì—°ê²°

## ğŸ† ì ìˆ˜ ì‹œìŠ¤í…œ

- ì¶œêµ¬ ë„ë‹¬: +100ì 
- ë‚¨ì€ ì‹œê°„ ë³´ë„ˆìŠ¤: +ë‚¨ì€ ì´ˆ
- ì¥ì• ë¬¼ ì¶©ëŒ: -10ì 

## ğŸ’¡ íŒ

- ì²œì²œíˆ ì¡°ì‘í•˜ë©´ ë” ì •í™•í•©ë‹ˆë‹¤
- ì½”ë„ˆì—ì„œëŠ” ì†ë„ë¥¼ ì¤„ì´ì„¸ìš”
- ì¥ì• ë¬¼ ê·¼ì²˜ì—ì„œ ì¡°ì‹¬í•˜ì„¸ìš”

## ğŸ› ë²„ê·¸ ë¦¬í¬íŠ¸

ë²„ê·¸ë¥¼ ë°œê²¬í•˜ì…¨ë‚˜ìš”? [ì´ìŠˆ ì œë³´í•˜ê¸°](https://github.com/yourusername/sensor-game-hub/issues)

## ğŸ“ ë¼ì´ì„ ìŠ¤

MIT License
```

#### 9.7.3 ë°°í¬ ë°©ë²•

**ë¡œì»¬ ì„œë²„ì— ë°°í¬:**

```bash
# 1. ê²Œì„ í´ë”ë¥¼ public/games/ì— ë³µì‚¬
cp -r your-game-name /Users/dev/ì¡¸ì—…ì‘í’ˆ/sensorchatbot/public/games/

# 2. ì„œë²„ ì¬ì‹œì‘ (GameScannerê°€ ìë™ ê°ì§€)
npm start

# 3. ë¸Œë¼ìš°ì €ì—ì„œ í™•ì¸
# http://localhost:3000/
# http://localhost:3000/games/your-game-name
```

**Gitì„ í†µí•œ ê³µìœ :**

```bash
# 1. ê²Œì„ì„ Git ì €ì¥ì†Œì— ì»¤ë°‹
git add public/games/your-game-name/
git commit -m "Add new game: Your Game Name"
git push origin main

# 2. GitHubì—ì„œ ë¦´ë¦¬ìŠ¤ ìƒì„±
# - ê²Œì„ ìŠ¤í¬ë¦°ìƒ· ì¶”ê°€
# - í”Œë ˆì´ ë°©ë²• ì„¤ëª…
# - ë‹¤ìš´ë¡œë“œ ë§í¬ ì œê³µ
```

**ZIP íŒŒì¼ë¡œ ê³µìœ :**

```bash
# ê²Œì„ í´ë”ë¥¼ ZIPìœ¼ë¡œ ì••ì¶•
cd public/games
zip -r your-game-name.zip your-game-name/

# ì‚¬ìš©ìëŠ” ë‹¤ìš´ë¡œë“œ í›„ ì••ì¶• í•´ì œ
# public/games/ í´ë”ì— ë°°ì¹˜í•˜ë©´ ìë™ ì¸ì‹
```

#### 9.7.4 ê²Œì„ ê³µìœ  í”Œë«í¼

**Developer Center í†µí•©:**

ê²Œì„ì´ `public/games/` í´ë”ì— ìˆìœ¼ë©´ Developer Centerì—ì„œ ìë™ìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.

```
http://localhost:3000/developer
â†’ "ê²Œì„ ëª©ë¡" íƒ­ì—ì„œ í™•ì¸ ê°€ëŠ¥
â†’ ë‹¤ë¥¸ ê°œë°œìë“¤ì´ ë‹¤ìš´ë¡œë“œ ê°€ëŠ¥
```

**ì™¸ë¶€ ê³µìœ  ë°©ë²•:**

1. **GitHub Releases**: ê²Œì„ì„ ZIPìœ¼ë¡œ ë¦´ë¦¬ìŠ¤
2. **npm Package**: ê²Œì„ì„ npm íŒ¨í‚¤ì§€ë¡œ ë°°í¬ (ì„ íƒì‚¬í•­)
3. **ê³µì‹ ê²Œì„ ë§ˆì¼“í”Œë ˆì´ìŠ¤**: í–¥í›„ ì¶”ê°€ ì˜ˆì •

---

### 9.8 ìœ ì§€ë³´ìˆ˜ ë° ì—…ë°ì´íŠ¸

ê²Œì„ì„ ë°°í¬í•œ í›„ì—ë„ ì§€ì†ì ì¸ ìœ ì§€ë³´ìˆ˜ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤.

#### 9.8.1 ë²„ì „ ê´€ë¦¬

**Semantic Versioning ì ìš©:**

```
ë²„ì „ í˜•ì‹: MAJOR.MINOR.PATCH

ì˜ˆì‹œ:
- 1.0.0: ì´ˆê¸° ë¦´ë¦¬ìŠ¤
- 1.0.1: ë²„ê·¸ ìˆ˜ì •
- 1.1.0: ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€
- 2.0.0: í˜¸í™˜ì„±ì´ ê¹¨ì§€ëŠ” ë³€ê²½
```

**game.jsonì— ë²„ì „ ê¸°ë¡:**

```json
{
    "id": "your-game",
    "version": "1.2.0",
    "changelog": [
        {
            "version": "1.2.0",
            "date": "2025-10-15",
            "changes": [
                "ìƒˆë¡œìš´ ë ˆë²¨ 5ê°œ ì¶”ê°€",
                "ë¬¼ë¦¬ ì—”ì§„ ê°œì„ ",
                "ë²„ê·¸ ìˆ˜ì •: ê³µì´ ë²½ì„ í†µê³¼í•˜ëŠ” ë¬¸ì œ"
            ]
        },
        {
            "version": "1.1.0",
            "date": "2025-10-01",
            "changes": [
                "ì‚¬ìš´ë“œ ì´í™íŠ¸ ì¶”ê°€",
                "ë‚œì´ë„ ì¡°ì ˆ ê¸°ëŠ¥"
            ]
        },
        {
            "version": "1.0.0",
            "date": "2025-09-20",
            "changes": [
                "ì´ˆê¸° ë¦´ë¦¬ìŠ¤"
            ]
        }
    ]
}
```

#### 9.8.2 ë²„ê·¸ ë¦¬í¬íŠ¸ ì²˜ë¦¬

**GameMaintenanceManager API í™œìš©:**

```javascript
// ì‚¬ìš©ì ë²„ê·¸ ë¦¬í¬íŠ¸ ì „ì†¡
async function reportBug(gameId, bugDescription) {
    try {
        const response = await fetch('/api/maintenance/report-bug', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                gameId: gameId,
                userReport: bugDescription
            })
        });

        const result = await response.json();

        if (result.success) {
            alert('ë²„ê·¸ ë¦¬í¬íŠ¸ê°€ ì ‘ìˆ˜ë˜ì—ˆìŠµë‹ˆë‹¤. ìë™ ìˆ˜ì •ì´ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.');
            console.log('ìˆ˜ì •ëœ ë²„ì „:', result.version);
        }
    } catch (error) {
        console.error('ë²„ê·¸ ë¦¬í¬íŠ¸ ì „ì†¡ ì‹¤íŒ¨:', error);
    }
}

// ê²Œì„ ë‚´ì— ë²„ê·¸ ë¦¬í¬íŠ¸ ë²„íŠ¼ ì¶”ê°€
const reportButton = document.createElement('button');
reportButton.textContent = 'ğŸ› ë²„ê·¸ ì‹ ê³ ';
reportButton.style.cssText = `
    position: fixed;
    bottom: 10px;
    right: 10px;
    padding: 10px 15px;
    background: #ff4444;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 14px;
`;

reportButton.onclick = () => {
    const bug = prompt('ì–´ë–¤ ë²„ê·¸ë¥¼ ë°œê²¬í•˜ì…¨ë‚˜ìš”?');
    if (bug) {
        reportBug('your-game-id', bug);
    }
};

document.body.appendChild(reportButton);
```

**ìˆ˜ë™ ë²„ê·¸ ìˆ˜ì • ì›Œí¬í”Œë¡œìš°:**

```markdown
## ë²„ê·¸ ìˆ˜ì • í”„ë¡œì„¸ìŠ¤

1. **ë²„ê·¸ ë°œê²¬ ë° ë¦¬í¬íŠ¸**
   - ì‚¬ìš©ì ë¦¬í¬íŠ¸ ë˜ëŠ” í…ŒìŠ¤íŠ¸ ì¤‘ ë°œê²¬
   - ë²„ê·¸ ì¬í˜„ ë‹¨ê³„ ë¬¸ì„œí™”
   - ìš°ì„ ìˆœìœ„ ì„¤ì • (Critical/High/Medium/Low)

2. **ë²„ê·¸ ë¶„ì„**
   - ì›ì¸ íŒŒì•…
   - ì˜í–¥ ë²”ìœ„ í™•ì¸
   - í•´ê²° ë°©ë²• ì„¤ê³„

3. **ë²„ê·¸ ìˆ˜ì •**
   - ì½”ë“œ ìˆ˜ì •
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ ì¶”ê°€
   - íšŒê·€ í…ŒìŠ¤íŠ¸ (ê¸°ì¡´ ê¸°ëŠ¥ í™•ì¸)

4. **ë°°í¬**
   - ë²„ì „ ì—…ë°ì´íŠ¸ (PATCH ì¦ê°€)
   - game.json changelog ì—…ë°ì´íŠ¸
   - Git ì»¤ë°‹ ë° í‘¸ì‹œ

5. **ê²€ì¦**
   - í”„ë¡œë•ì…˜ í™˜ê²½ì—ì„œ í™•ì¸
   - ì‚¬ìš©ì í”¼ë“œë°± ìˆ˜ì§‘
```

#### 9.8.3 ê¸°ëŠ¥ ì¶”ê°€

**GameMaintenanceManager APIë¡œ ê¸°ëŠ¥ ì¶”ê°€:**

```javascript
// ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€ ìš”ì²­
async function requestFeature(gameId, featureDescription) {
    try {
        const response = await fetch('/api/maintenance/add-feature', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                gameId: gameId,
                feature: featureDescription
            })
        });

        const result = await response.json();

        if (result.success) {
            alert(`ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!\nìƒˆ ë²„ì „: ${result.version}`);
        }
    } catch (error) {
        console.error('ê¸°ëŠ¥ ì¶”ê°€ ì‹¤íŒ¨:', error);
    }
}

// ì˜ˆì‹œ: ì‚¬ìš´ë“œ ì´í™íŠ¸ ì¶”ê°€ ìš”ì²­
requestFeature('tilt-ball-maze', 'ê³µì´ ë²½ì— ë¶€ë”ªí ë•Œ íš¨ê³¼ìŒ ì¶”ê°€');
```

**ìˆ˜ë™ ê¸°ëŠ¥ ì¶”ê°€ ì›Œí¬í”Œë¡œìš°:**

```markdown
## ê¸°ëŠ¥ ì¶”ê°€ í”„ë¡œì„¸ìŠ¤

1. **ê¸°ëŠ¥ ìš”ì²­ ìˆ˜ì§‘**
   - ì‚¬ìš©ì í”¼ë“œë°±
   - ê°œë°œì ì•„ì´ë””ì–´
   - ê²½ìŸ ê²Œì„ ë¶„ì„

2. **ê¸°ëŠ¥ ì„¤ê³„**
   - ìƒì„¸ ìŠ¤í™ ì‘ì„±
   - UI/UX ì™€ì´ì–´í”„ë ˆì„
   - ê¸°ìˆ  êµ¬í˜„ ë°©ì•ˆ

3. **ê°œë°œ**
   - ê¸°ëŠ¥ êµ¬í˜„
   - ê¸°ì¡´ ì½”ë“œì™€ í†µí•©
   - í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì‘ì„±

4. **í…ŒìŠ¤íŠ¸**
   - ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
   - í†µí•© í…ŒìŠ¤íŠ¸
   - ì‚¬ìš©ì ë² íƒ€ í…ŒìŠ¤íŠ¸

5. **ë°°í¬**
   - ë²„ì „ ì—…ë°ì´íŠ¸ (MINOR ì¦ê°€)
   - game.json changelog ì—…ë°ì´íŠ¸
   - ë¦´ë¦¬ìŠ¤ ë…¸íŠ¸ ì‘ì„±

6. **ëª¨ë‹ˆí„°ë§**
   - ì‚¬ìš©ì ë°˜ì‘ í™•ì¸
   - ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§
   - ë²„ê·¸ ë¦¬í¬íŠ¸ ëŒ€ì‘
```

#### 9.8.4 ìˆ˜ì • ì´ë ¥ ì¡°íšŒ

**GameMaintenanceManagerë¡œ ì´ë ¥ í™•ì¸:**

```javascript
// ê²Œì„ ìˆ˜ì • ì´ë ¥ ì¡°íšŒ
async function getMaintenanceHistory(gameId) {
    try {
        const response = await fetch(`/api/maintenance/history/${gameId}`);
        const data = await response.json();

        console.log('ğŸ“ ìˆ˜ì • ì´ë ¥:');
        data.history.forEach((entry, index) => {
            console.log(`${index + 1}. [${entry.timestamp}] v${entry.version}`);
            console.log(`   ${entry.type}: ${entry.description}`);
        });
    } catch (error) {
        console.error('ì´ë ¥ ì¡°íšŒ ì‹¤íŒ¨:', error);
    }
}

// ì‹¤í–‰
getMaintenanceHistory('your-game-id');
```

**ì¶œë ¥ ì˜ˆì‹œ:**

```
ğŸ“ ìˆ˜ì • ì´ë ¥:
1. [2025-10-15 14:30] v1.2.1
   bug_fix: ê³µì´ ë²½ì„ í†µê³¼í•˜ëŠ” ë²„ê·¸ ìˆ˜ì •

2. [2025-10-10 09:15] v1.2.0
   feature: ìƒˆë¡œìš´ ë ˆë²¨ 5ê°œ ì¶”ê°€

3. [2025-10-05 16:45] v1.1.1
   bug_fix: ì„¼ì„œ ì—°ê²° ëŠê¹€ ë¬¸ì œ í•´ê²°

4. [2025-10-01 11:00] v1.1.0
   feature: ì‚¬ìš´ë“œ ì´í™íŠ¸ ì¶”ê°€

5. [2025-09-20 10:00] v1.0.0
   release: ì´ˆê¸° ë¦´ë¦¬ìŠ¤
```

#### 9.8.5 ë°±ì—… ë° ë³µêµ¬

**ìë™ ë°±ì—… ì‹œìŠ¤í…œ:**

GameMaintenanceManagerëŠ” ëª¨ë“  ìˆ˜ì • ì „ì— ìë™ìœ¼ë¡œ ë°±ì—…ì„ ìƒì„±í•©ë‹ˆë‹¤.

```
public/games/your-game/
â”œâ”€â”€ index.html                    # í˜„ì¬ ë²„ì „
â””â”€â”€ .backups/                     # ìë™ ë°±ì—…
    â”œâ”€â”€ index.html.v1.0.0.backup
    â”œâ”€â”€ index.html.v1.1.0.backup
    â””â”€â”€ index.html.v1.2.0.backup
```

**ìˆ˜ë™ ë°±ì—…:**

```bash
# ì „ì²´ ê²Œì„ í´ë” ë°±ì—…
cd public/games
tar -czf your-game-backup-$(date +%Y%m%d).tar.gz your-game/

# ë³µêµ¬
tar -xzf your-game-backup-20251015.tar.gz
```

**Gitì„ í™œìš©í•œ ë°±ì—…:**

```bash
# ê° ë²„ì „ì„ Git íƒœê·¸ë¡œ ê´€ë¦¬
git tag -a v1.0.0 -m "Initial release"
git tag -a v1.1.0 -m "Add sound effects"
git push --tags

# íŠ¹ì • ë²„ì „ìœ¼ë¡œ ë¡¤ë°±
git checkout v1.0.0
```

#### 9.8.6 ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

**ê²Œì„ ë‚´ ì„±ëŠ¥ ì¶”ì :**

```javascript
class PerformanceTracker {
    constructor(gameId) {
        this.gameId = gameId;
        this.metrics = {
            avgFPS: 0,
            minFPS: Infinity,
            maxFPS: 0,
            frameDrops: 0,
            totalFrames: 0
        };

        this.startTime = Date.now();
    }

    recordFrame(fps) {
        this.metrics.totalFrames++;

        this.metrics.avgFPS = (
            (this.metrics.avgFPS * (this.metrics.totalFrames - 1) + fps) /
            this.metrics.totalFrames
        );

        if (fps < this.metrics.minFPS) this.metrics.minFPS = fps;
        if (fps > this.metrics.maxFPS) this.metrics.maxFPS = fps;
        if (fps < 55) this.metrics.frameDrops++;
    }

    async sendReport() {
        const report = {
            gameId: this.gameId,
            sessionDuration: Date.now() - this.startTime,
            ...this.metrics,
            userAgent: navigator.userAgent,
            timestamp: new Date().toISOString()
        };

        try {
            await fetch('/api/analytics/performance', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify(report)
            });
            console.log('ğŸ“Š ì„±ëŠ¥ ë¦¬í¬íŠ¸ ì „ì†¡ ì™„ë£Œ');
        } catch (error) {
            console.error('ì„±ëŠ¥ ë¦¬í¬íŠ¸ ì „ì†¡ ì‹¤íŒ¨:', error);
        }
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const perfTracker = new PerformanceTracker('your-game-id');

// ê²Œì„ ë£¨í”„ì—ì„œ FPS ê¸°ë¡
function gameLoop(timestamp) {
    const fps = calculateFPS(timestamp);
    perfTracker.recordFrame(fps);

    update();
    render();

    requestAnimationFrame(gameLoop);
}

// ê²Œì„ ì¢…ë£Œ ì‹œ ë¦¬í¬íŠ¸ ì „ì†¡
window.addEventListener('beforeunload', () => {
    perfTracker.sendReport();
});
```

---

## Part 10: íŠ¸ëŸ¬ë¸”ìŠˆíŒ… & FAQ

ì´ ì„¹ì…˜ì—ì„œëŠ” ê²Œì„ ê°œë°œ ì¤‘ ìì£¼ ë°œìƒí•˜ëŠ” ë¬¸ì œë“¤ê³¼ í•´ê²° ë°©ë²•ì„ ë‹¤ë£¹ë‹ˆë‹¤.

### 10.1 ì¼ë°˜ì ì¸ ë¬¸ì œ ë° í•´ê²°

#### 10.1.1 ì„œë²„ ì—°ê²° ë¬¸ì œ

**ë¬¸ì œ: "ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤"**

```javascript
// âŒ ì¦ìƒ
Error: Cannot connect to server at http://localhost:3000
```

**í•´ê²° ë°©ë²•:**

```bash
# 1. ì„œë²„ê°€ ì‹¤í–‰ ì¤‘ì¸ì§€ í™•ì¸
ps aux | grep "node server/index.js"

# 2. ì„œë²„ í¬íŠ¸ê°€ ì´ë¯¸ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸
lsof -i :3000

# 3. ê¸°ì¡´ í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
kill -9 <PID>

# 4. ì„œë²„ ì¬ì‹œì‘
cd /Users/dev/ì¡¸ì—…ì‘í’ˆ/sensorchatbot
npm start
```

**ì˜ˆë°©:**

```javascript
// SDK ì´ˆê¸°í™” ì‹œ íƒ€ì„ì•„ì›ƒ ì„¤ì •
const sdk = new SessionSDK({
    gameId: 'your-game',
    gameType: 'solo',
    serverUrl: 'http://localhost:3000',
    connectionTimeout: 5000  // 5ì´ˆ íƒ€ì„ì•„ì›ƒ
});

sdk.on('connect_error', (error) => {
    console.error('ì—°ê²° ì‹¤íŒ¨:', error);
    showErrorMessage('ì„œë²„ì— ì—°ê²°í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
});
```

---

**ë¬¸ì œ: "WebSocket ì—°ê²°ì´ ìì£¼ ëŠê¹€"**

**ì›ì¸:**
- ë„¤íŠ¸ì›Œí¬ ë¶ˆì•ˆì •
- ë°©í™”ë²½ ì°¨ë‹¨
- ì„œë²„ ê³¼ë¶€í•˜

**í•´ê²° ë°©ë²•:**

```javascript
// ìë™ ì¬ì—°ê²° ë¡œì§ êµ¬í˜„
class RobustSDK extends SessionSDK {
    constructor(options) {
        super(options);
        this.reconnectAttempts = 0;
        this.maxReconnectAttempts = 5;

        this.on('disconnect', () => {
            this.handleDisconnect();
        });
    }

    handleDisconnect() {
        if (this.reconnectAttempts < this.maxReconnectAttempts) {
            this.reconnectAttempts++;
            const delay = Math.min(1000 * Math.pow(2, this.reconnectAttempts), 10000);

            console.log(`ì¬ì—°ê²° ì‹œë„ ${this.reconnectAttempts}/${this.maxReconnectAttempts} (${delay}ms í›„)...`);

            setTimeout(() => {
                this.socket.connect();
            }, delay);
        } else {
            console.error('ìµœëŒ€ ì¬ì—°ê²° ì‹œë„ íšŸìˆ˜ ì´ˆê³¼');
            showErrorMessage('ì„œë²„ì™€ì˜ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
        }
    }
}

// ì‚¬ìš©
const sdk = new RobustSDK({ gameId: 'your-game', gameType: 'solo' });
```

---

#### 10.1.2 ì„¸ì…˜ ê´€ë ¨ ë¬¸ì œ

**ë¬¸ì œ: "ì„¸ì…˜ ì½”ë“œê°€ undefined ë˜ëŠ” null"**

```javascript
// âŒ ì˜ëª»ëœ ì½”ë“œ
sdk.on('session-created', (session) => {
    console.log(session.sessionCode);  // undefined!
});
```

**ì›ì¸:** CustomEvent ì²˜ë¦¬ ëˆ„ë½

**í•´ê²° ë°©ë²•:**

```javascript
// âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ
sdk.on('session-created', (event) => {
    const session = event.detail || event;  // CustomEvent ì²˜ë¦¬
    console.log('ì„¸ì…˜ ì½”ë“œ:', session.sessionCode);
});
```

---

**ë¬¸ì œ: "ì„¸ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤"**

```javascript
// âŒ ì¦ìƒ
Error: ì„¸ì…˜ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: 1234
```

**ì›ì¸:**
- ì„¸ì…˜ì´ ë§Œë£Œë¨ (30ë¶„ íƒ€ì„ì•„ì›ƒ)
- ì˜ëª»ëœ ì„¸ì…˜ ì½”ë“œ ì…ë ¥
- ì„œë²„ ì¬ì‹œì‘ìœ¼ë¡œ ì„¸ì…˜ ì´ˆê¸°í™”

**í•´ê²° ë°©ë²•:**

```javascript
// ì„¸ì…˜ ìœ íš¨ì„± í™•ì¸
async function validateSession(sessionCode) {
    try {
        const response = await fetch(`/api/session/validate/${sessionCode}`);
        const data = await response.json();

        if (!data.valid) {
            showErrorMessage('ì„¸ì…˜ì´ ë§Œë£Œë˜ì—ˆê±°ë‚˜ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ìƒˆ ì„¸ì…˜ì„ ìƒì„±í•´ì£¼ì„¸ìš”.');
            return false;
        }

        return true;
    } catch (error) {
        console.error('ì„¸ì…˜ ê²€ì¦ ì‹¤íŒ¨:', error);
        return false;
    }
}

// ì„¼ì„œ ì—°ê²° ì „ ê²€ì¦
async function connectSensor(sessionCode) {
    if (!await validateSession(sessionCode)) {
        return;
    }

    // ì„¼ì„œ ì—°ê²° ë¡œì§...
}
```

---

#### 10.1.3 ì„¼ì„œ ë°ì´í„° ë¬¸ì œ

**ë¬¸ì œ: "ì„¼ì„œ ë°ì´í„°ê°€ ìˆ˜ì‹ ë˜ì§€ ì•ŠìŒ"**

**ì§„ë‹¨ ì²´í¬ë¦¬ìŠ¤íŠ¸:**

```javascript
// 1. ì„¼ì„œ ê¶Œí•œ í™•ì¸
if (typeof DeviceOrientationEvent.requestPermission === 'function') {
    const permission = await DeviceOrientationEvent.requestPermission();
    if (permission !== 'granted') {
        console.error('ì„¼ì„œ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤');
        return;
    }
}

// 2. ì„¼ì„œ API ì§€ì› í™•ì¸
if (!('DeviceOrientationEvent' in window)) {
    console.error('ì´ ê¸°ê¸°ëŠ” ì„¼ì„œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤');
    return;
}

// 3. HTTPS í™˜ê²½ í™•ì¸ (iOS í•„ìˆ˜)
if (location.protocol !== 'https:' && location.hostname !== 'localhost') {
    console.warn('iOSì—ì„œëŠ” HTTPS í™˜ê²½ì´ í•„ìš”í•©ë‹ˆë‹¤');
}

// 4. ì„¼ì„œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ í™•ì¸
window.addEventListener('deviceorientation', (event) => {
    if (event.alpha === null && event.beta === null && event.gamma === null) {
        console.error('ì„¼ì„œ ë°ì´í„°ê°€ nullì…ë‹ˆë‹¤. ì„¼ì„œê°€ í™œì„±í™”ë˜ì§€ ì•Šì•˜ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
    } else {
        console.log('ì„¼ì„œ ì‘ë™ í™•ì¸:', event);
    }
}, { once: true });
```

**í•´ê²° ë°©ë²•:**

```javascript
// í¬ê´„ì ì¸ ì„¼ì„œ ì´ˆê¸°í™” í•¨ìˆ˜
async function initSensors() {
    console.log('ğŸ” ì„¼ì„œ ì´ˆê¸°í™” ì‹œì‘...');

    // Step 1: ë¸Œë¼ìš°ì € ì§€ì› í™•ì¸
    if (!('DeviceOrientationEvent' in window)) {
        throw new Error('ì´ ê¸°ê¸°ëŠ” ì„¼ì„œë¥¼ ì§€ì›í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    }

    // Step 2: iOS ê¶Œí•œ ìš”ì²­
    if (typeof DeviceOrientationEvent.requestPermission === 'function') {
        console.log('iOS ì„¼ì„œ ê¶Œí•œ ìš”ì²­...');
        const permission = await DeviceOrientationEvent.requestPermission();

        if (permission !== 'granted') {
            throw new Error('ì„¼ì„œ ê¶Œí•œì´ ê±°ë¶€ë˜ì—ˆìŠµë‹ˆë‹¤. ì„¤ì •ì—ì„œ ê¶Œí•œì„ í—ˆìš©í•´ì£¼ì„¸ìš”.');
        }

        console.log('âœ… ì„¼ì„œ ê¶Œí•œ ìŠ¹ì¸');
    }

    // Step 3: ì„¼ì„œ ë°ì´í„° í…ŒìŠ¤íŠ¸
    return new Promise((resolve, reject) => {
        let timeout = setTimeout(() => {
            reject(new Error('ì„¼ì„œ ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ê¸°ê¸°ë¥¼ ì›€ì§ì—¬ë³´ì„¸ìš”.'));
        }, 5000);

        const testHandler = (event) => {
            if (event.alpha !== null || event.beta !== null || event.gamma !== null) {
                clearTimeout(timeout);
                window.removeEventListener('deviceorientation', testHandler);
                console.log('âœ… ì„¼ì„œ ì‘ë™ í™•ì¸');
                resolve();
            }
        };

        window.addEventListener('deviceorientation', testHandler);
    });
}

// ì‚¬ìš© ì˜ˆì‹œ
try {
    await initSensors();
    console.log('ì„¼ì„œ ì´ˆê¸°í™” ì™„ë£Œ. ê²Œì„ì„ ì‹œì‘í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
} catch (error) {
    console.error('ì„¼ì„œ ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
    alert(error.message);
}
```

---

**ë¬¸ì œ: "ì„¼ì„œ ê°’ì´ ë„ˆë¬´ ë¯¼ê°í•˜ê±°ë‚˜ ë‘”í•¨"**

**í•´ê²° ë°©ë²•: ê°ë„ ì¡°ì ˆ**

```javascript
// ì„¤ì • ê°€ëŠ¥í•œ ì„¼ì„œ í”„ë¡œì„¸ì„œ
class ConfigurableSensorProcessor {
    constructor(config = {}) {
        this.sensitivity = config.sensitivity || 1.0;  // 0.1 ~ 2.0
        this.deadZone = config.deadZone || 5;          // ë„ ë‹¨ìœ„
        this.smoothing = config.smoothing || 0.3;       // 0 ~ 1

        this.lastValue = { gamma: 0, beta: 0 };
    }

    process(orientation) {
        let { gamma, beta } = orientation;

        // 1. ë°ë“œì¡´ ì ìš©
        if (Math.abs(gamma) < this.deadZone) gamma = 0;
        if (Math.abs(beta) < this.deadZone) beta = 0;

        // 2. ê°ë„ ì ìš©
        gamma *= this.sensitivity;
        beta *= this.sensitivity;

        // 3. ìŠ¤ë¬´ë”© ì ìš© (Exponential Moving Average)
        gamma = this.lastValue.gamma * (1 - this.smoothing) + gamma * this.smoothing;
        beta = this.lastValue.beta * (1 - this.smoothing) + beta * this.smoothing;

        this.lastValue = { gamma, beta };

        return { gamma, beta };
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const sensorProcessor = new ConfigurableSensorProcessor({
    sensitivity: 1.5,   // 1.5ë°° ë” ë¯¼ê°í•˜ê²Œ
    deadZone: 3,        // 3ë„ ì´í•˜ëŠ” ë¬´ì‹œ
    smoothing: 0.4      // 40% ìŠ¤ë¬´ë”©
});

sdk.on('sensor-data', (event) => {
    const data = event.detail || event;
    const processed = sensorProcessor.process(data.data.orientation);

    // processed.gamma, processed.beta ì‚¬ìš©
});
```

**UIë¡œ ê°ë„ ì¡°ì ˆ ì œê³µ:**

```html
<div id="sensor-config">
    <label>ê°ë„: <input type="range" id="sensitivity" min="0.1" max="2.0" step="0.1" value="1.0"></label>
    <label>ë°ë“œì¡´: <input type="range" id="deadzone" min="0" max="20" step="1" value="5"></label>
    <label>ìŠ¤ë¬´ë”©: <input type="range" id="smoothing" min="0" max="1" step="0.1" value="0.3"></label>
</div>

<script>
const sensorProcessor = new ConfigurableSensorProcessor();

document.getElementById('sensitivity').addEventListener('input', (e) => {
    sensorProcessor.sensitivity = parseFloat(e.target.value);
});

document.getElementById('deadzone').addEventListener('input', (e) => {
    sensorProcessor.deadZone = parseFloat(e.target.value);
});

document.getElementById('smoothing').addEventListener('input', (e) => {
    sensorProcessor.smoothing = parseFloat(e.target.value);
});
</script>
```

---

#### 10.1.4 ê²Œì„ ë¡œì§ ë¬¸ì œ

**ë¬¸ì œ: "ê³µì´ ë²½ì„ í†µê³¼í•¨"**

**ì›ì¸:** ì†ë„ê°€ ë„ˆë¬´ ë¹ ë¥´ê±°ë‚˜ ì¶©ëŒ ê°ì§€ ë¡œì§ ì˜¤ë¥˜

**í•´ê²° ë°©ë²•:**

```javascript
// âŒ ë¬¸ì œ ìˆëŠ” ì½”ë“œ
function checkWallCollision(ball) {
    if (ball.x < 0) ball.x = 0;
    if (ball.x > canvas.width) ball.x = canvas.width;
    // ì†ë„ê°€ ë¹ ë¥´ë©´ ë²½ì„ í†µê³¼í•  ìˆ˜ ìˆìŒ!
}

// âœ… ì˜¬ë°”ë¥¸ ì½”ë“œ (Continuous Collision Detection)
function checkWallCollision(ball) {
    const radius = ball.radius;

    // ì¢Œì¸¡ ë²½
    if (ball.x - radius < 0) {
        ball.x = radius;
        ball.vx = Math.abs(ball.vx) * 0.8;  // ë°˜ì‚¬ + ì—ë„ˆì§€ ì†ì‹¤
    }

    // ìš°ì¸¡ ë²½
    if (ball.x + radius > canvas.width) {
        ball.x = canvas.width - radius;
        ball.vx = -Math.abs(ball.vx) * 0.8;
    }

    // ìƒë‹¨ ë²½
    if (ball.y - radius < 0) {
        ball.y = radius;
        ball.vy = Math.abs(ball.vy) * 0.8;
    }

    // í•˜ë‹¨ ë²½
    if (ball.y + radius > canvas.height) {
        ball.y = canvas.height - radius;
        ball.vy = -Math.abs(ball.vy) * 0.8;
    }
}
```

**ê³ ê¸‰: Swept AABB (ë§¤ìš° ë¹ ë¥¸ ì†ë„ì—ë„ ì•ˆì „)**

```javascript
function sweptAABB(ball, deltaTime) {
    // ì´ë™ ë²¡í„°
    const dx = ball.vx * deltaTime;
    const dy = ball.vy * deltaTime;

    // ë²½ê³¼ì˜ ì¶©ëŒ ì‹œê°„ ê³„ì‚°
    let tMin = 0;
    let tMax = 1;

    // Xì¶• ì¶©ëŒ ì‹œê°„
    if (dx > 0) {
        tMax = Math.min(tMax, (canvas.width - ball.radius - ball.x) / dx);
    } else if (dx < 0) {
        tMax = Math.min(tMax, (ball.radius - ball.x) / dx);
    }

    // Yì¶• ì¶©ëŒ ì‹œê°„
    if (dy > 0) {
        tMax = Math.min(tMax, (canvas.height - ball.radius - ball.y) / dy);
    } else if (dy < 0) {
        tMax = Math.min(tMax, (ball.radius - ball.y) / dy);
    }

    // ì¶©ëŒ ìœ„ì¹˜ë¡œ ì´ë™
    ball.x += dx * tMax;
    ball.y += dy * tMax;

    // ì¶©ëŒ ì²˜ë¦¬
    if (tMax < 1) {
        // ë²½ì— ì¶©ëŒí•¨
        if (ball.x - ball.radius <= 0 || ball.x + ball.radius >= canvas.width) {
            ball.vx *= -0.8;
        }
        if (ball.y - ball.radius <= 0 || ball.y + ball.radius >= canvas.height) {
            ball.vy *= -0.8;
        }
    }
}
```

---

**ë¬¸ì œ: "í”„ë ˆì„ ë“œë¡­ / ê²Œì„ì´ ëŠë ¤ì§"**

**ì§„ë‹¨:**

```javascript
// ì„±ëŠ¥ í”„ë¡œíŒŒì¼ëŸ¬ ì¶”ê°€
const perfStats = {
    update: [],
    render: [],
    physics: [],
    collision: []
};

function gameLoop(timestamp) {
    const deltaTime = timestamp - lastTimestamp;
    lastTimestamp = timestamp;

    // Update ì¸¡ì •
    const updateStart = performance.now();
    update(deltaTime);
    perfStats.update.push(performance.now() - updateStart);

    // Render ì¸¡ì •
    const renderStart = performance.now();
    render();
    perfStats.render.push(performance.now() - renderStart);

    // 100 í”„ë ˆì„ë§ˆë‹¤ ë¦¬í¬íŠ¸
    if (perfStats.update.length >= 100) {
        console.log('ì„±ëŠ¥ í†µê³„:');
        console.log('- Update í‰ê· :', avg(perfStats.update).toFixed(2) + 'ms');
        console.log('- Render í‰ê· :', avg(perfStats.render).toFixed(2) + 'ms');

        perfStats.update = [];
        perfStats.render = [];
    }

    requestAnimationFrame(gameLoop);
}

function avg(arr) {
    return arr.reduce((a, b) => a + b, 0) / arr.length;
}
```

**ìµœì í™” ë°©ë²•:**

```javascript
// 1. ì˜¤í”„ìŠ¤í¬ë¦° ìº”ë²„ìŠ¤ í™œìš©
const offscreenCanvas = document.createElement('canvas');
offscreenCanvas.width = canvas.width;
offscreenCanvas.height = canvas.height;
const offscreenCtx = offscreenCanvas.getContext('2d');

// ì •ì  ë°°ê²½ì„ ì˜¤í”„ìŠ¤í¬ë¦°ì— í•œ ë²ˆë§Œ ê·¸ë¦¼
function drawStaticBackground() {
    offscreenCtx.fillStyle = '#000';
    offscreenCtx.fillRect(0, 0, canvas.width, canvas.height);
    // ... ê¸°íƒ€ ì •ì  ìš”ì†Œ
}

// ë Œë”ë§ ì‹œ ë¹ ë¥´ê²Œ ë³µì‚¬
function render() {
    ctx.drawImage(offscreenCanvas, 0, 0);
    // ë™ì  ìš”ì†Œë§Œ ê·¸ë¦¼
    drawBall();
    drawPaddle();
}

// 2. ë¶ˆí•„ìš”í•œ ê³„ì‚° ìŠ¤í‚µ
let dirtyFlag = false;

function update(deltaTime) {
    if (!gameState.isPlaying) return;  // ê²Œì„ ì¤‘ì´ ì•„ë‹ˆë©´ ìŠ¤í‚µ

    // ë³€ê²½ì´ ìˆì„ ë•Œë§Œ ì²˜ë¦¬
    if (newSensorData) {
        processSensorData();
        dirtyFlag = true;
    }
}

function render() {
    if (!dirtyFlag) return;  // ë³€ê²½ ì—†ìœ¼ë©´ ë Œë”ë§ ìŠ¤í‚µ

    // ë Œë”ë§...
    dirtyFlag = false;
}

// 3. ì¶©ëŒ ê°ì§€ ìµœì í™” (Spatial Hashing)
class SpatialHash {
    constructor(cellSize) {
        this.cellSize = cellSize;
        this.cells = new Map();
    }

    insert(object) {
        const cellX = Math.floor(object.x / this.cellSize);
        const cellY = Math.floor(object.y / this.cellSize);
        const key = `${cellX},${cellY}`;

        if (!this.cells.has(key)) {
            this.cells.set(key, []);
        }
        this.cells.get(key).push(object);
    }

    getNearby(object) {
        const cellX = Math.floor(object.x / this.cellSize);
        const cellY = Math.floor(object.y / this.cellSize);

        const nearby = [];
        for (let dx = -1; dx <= 1; dx++) {
            for (let dy = -1; dy <= 1; dy++) {
                const key = `${cellX + dx},${cellY + dy}`;
                if (this.cells.has(key)) {
                    nearby.push(...this.cells.get(key));
                }
            }
        }
        return nearby;
    }

    clear() {
        this.cells.clear();
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const spatialHash = new SpatialHash(50);

function checkCollisions() {
    spatialHash.clear();

    // ëª¨ë“  ê°ì²´ë¥¼ ê³µê°„ í•´ì‹œì— ì‚½ì…
    obstacles.forEach(obj => spatialHash.insert(obj));

    // ê³µ ê·¼ì²˜ ê°ì²´ë§Œ ì¶©ëŒ ê²€ì‚¬
    const nearby = spatialHash.getNearby(ball);
    nearby.forEach(obj => {
        if (checkCollision(ball, obj)) {
            handleCollision(ball, obj);
        }
    });
}
```

---

#### 10.1.5 QR ì½”ë“œ ë¬¸ì œ

**ë¬¸ì œ: "QR ì½”ë“œê°€ ìƒì„±ë˜ì§€ ì•ŠìŒ"**

**ì›ì¸:** qrcode ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ì‹¤íŒ¨

**í•´ê²° ë°©ë²•:**

```javascript
// ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ í™•ì¸ ë° í´ë°±
function generateQRCode(sessionCode) {
    const qrContainer = document.getElementById('qr-code');

    if (typeof QRCode !== 'undefined') {
        // qrcode.js ì‚¬ìš©
        qrContainer.innerHTML = '';
        new QRCode(qrContainer, {
            text: `${window.location.origin}/sensor.html?code=${sessionCode}`,
            width: 200,
            height: 200
        });
    } else {
        // í´ë°±: ì™¸ë¶€ API ì‚¬ìš©
        console.warn('QRCode ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì™¸ë¶€ APIë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.');
        const apiUrl = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(window.location.origin + '/sensor.html?code=' + sessionCode)}`;
        qrContainer.innerHTML = `<img src="${apiUrl}" alt="QR Code">`;
    }
}

// ë¼ì´ë¸ŒëŸ¬ë¦¬ ë™ì  ë¡œë“œ
function loadQRCodeLibrary() {
    return new Promise((resolve, reject) => {
        if (typeof QRCode !== 'undefined') {
            resolve();
            return;
        }

        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js';
        script.onload = resolve;
        script.onerror = reject;
        document.head.appendChild(script);
    });
}

// ì‚¬ìš© ì˜ˆì‹œ
sdk.on('session-created', async (event) => {
    const session = event.detail || event;

    try {
        await loadQRCodeLibrary();
    } catch (error) {
        console.warn('QR ë¼ì´ë¸ŒëŸ¬ë¦¬ ë¡œë“œ ì‹¤íŒ¨, í´ë°± ì‚¬ìš©');
    }

    generateQRCode(session.sessionCode);
});
```

---

### 10.2 FAQ (ìì£¼ ë¬»ëŠ” ì§ˆë¬¸)

#### Q1: ê²Œì„ì„ ë§Œë“¤ë ¤ë©´ ì–´ë–¤ ê¸°ìˆ ì„ ì•Œì•„ì•¼ í•˜ë‚˜ìš”?

**A:** ê¸°ë³¸ì ì¸ HTML, CSS, JavaScript ì§€ì‹ì´ í•„ìš”í•©ë‹ˆë‹¤.

**í•„ìˆ˜ ì§€ì‹:**
- HTML5 Canvas API
- JavaScript (ES6+)
- ì´ë²¤íŠ¸ ì²˜ë¦¬
- ë¹„ë™ê¸° í”„ë¡œê·¸ë˜ë° (Promises, async/await)

**ê¶Œì¥ ì§€ì‹:**
- ê²Œì„ ë£¨í”„ ê°œë…
- ë¬¼ë¦¬ ì‹œë®¬ë ˆì´ì…˜ ê¸°ì´ˆ
- ì¶©ëŒ ê°ì§€ ì•Œê³ ë¦¬ì¦˜

**í•™ìŠµ ìˆœì„œ:**
1. HTML/CSS/JavaScript ê¸°ì´ˆ (1-2ì£¼)
2. Canvas API íŠœí† ë¦¬ì–¼ (3-5ì¼)
3. ê°„ë‹¨í•œ ê²Œì„ ë§Œë“¤ê¸° (Pong, Breakout) (1ì£¼)
4. SessionSDK í†µí•© (2-3ì¼)
5. ì‹¤ì œ í”„ë¡œì íŠ¸ ê°œë°œ (1-2ì£¼)

---

#### Q2: ì–´ë–¤ ì„¼ì„œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?

**A:** ëª¨ë°”ì¼ ê¸°ê¸°ì˜ ë‹¤ìŒ ì„¼ì„œë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:

**1. DeviceOrientation (ê¸°ìš¸ê¸°)**
```javascript
data.orientation = {
    alpha: 0-360,    // Zì¶• íšŒì „ (ë‚˜ì¹¨ë°˜)
    beta: -180~180,  // Xì¶• ê¸°ìš¸ê¸° (ì•ë’¤)
    gamma: -90~90    // Yì¶• ê¸°ìš¸ê¸° (ì¢Œìš°)
};
```

**ì‚¬ìš© ì˜ˆì‹œ:**
- ì¢Œìš°ë¡œ ê¸°ìš¸ì—¬ ê³µ ì¡°ì‘
- ì•ë’¤ë¡œ ê¸°ìš¸ì—¬ ì†ë„ ì¡°ì ˆ
- íšŒì „í•˜ì—¬ ë°©í–¥ ì „í™˜

**2. DeviceMotion (ê°€ì†ë„)**
```javascript
data.acceleration = {
    x: m/sÂ²,  // ì¢Œìš° ê°€ì†ë„
    y: m/sÂ²,  // ìƒí•˜ ê°€ì†ë„
    z: m/sÂ²   // ì•ë’¤ ê°€ì†ë„
};
```

**ì‚¬ìš© ì˜ˆì‹œ:**
- í”ë“¤ê¸° ë™ì‘ ê°ì§€
- ì¶©ê²© ê°ì§€
- ë¹ ë¥¸ ì›€ì§ì„ ê°ì§€

**3. RotationRate (íšŒì „ ì†ë„)**
```javascript
data.rotationRate = {
    alpha: Â°/s,  // Zì¶• íšŒì „ ì†ë„
    beta: Â°/s,   // Xì¶• íšŒì „ ì†ë„
    gamma: Â°/s   // Yì¶• íšŒì „ ì†ë„
};
```

**ì‚¬ìš© ì˜ˆì‹œ:**
- ë¹ ë¥¸ íšŒì „ ë™ì‘
- ì œìŠ¤ì²˜ ì¸ì‹

---

#### Q3: iOSì—ì„œ ì„¼ì„œê°€ ì‘ë™í•˜ì§€ ì•Šì•„ìš”!

**A:** iOS 13+ì—ì„œëŠ” ì„¼ì„œ ê¶Œí•œ ìš”ì²­ì´ í•„ìˆ˜ì…ë‹ˆë‹¤.

**í•´ê²° ë°©ë²•:**

```javascript
// 1. HTTPS í™˜ê²½ í•„ìˆ˜ (localhost ì œì™¸)
if (location.protocol !== 'https:' && location.hostname !== 'localhost') {
    alert('iOSì—ì„œëŠ” HTTPSê°€ í•„ìš”í•©ë‹ˆë‹¤!');
}

// 2. ì‚¬ìš©ì ì œìŠ¤ì²˜(í´ë¦­) í›„ ê¶Œí•œ ìš”ì²­
document.getElementById('start-button').addEventListener('click', async () => {
    if (typeof DeviceOrientationEvent.requestPermission === 'function') {
        try {
            const permission = await DeviceOrientationEvent.requestPermission();
            if (permission === 'granted') {
                console.log('âœ… ì„¼ì„œ ê¶Œí•œ ìŠ¹ì¸');
                startGame();
            } else {
                alert('ì„¼ì„œ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤!');
            }
        } catch (error) {
            console.error('ê¶Œí•œ ìš”ì²­ ì‹¤íŒ¨:', error);
        }
    } else {
        // AndroidëŠ” ìë™ ìŠ¹ì¸
        startGame();
    }
});
```

**ì²´í¬ë¦¬ìŠ¤íŠ¸:**
- [ ] HTTPS í™˜ê²½ì¸ê°€? (ë˜ëŠ” localhost)
- [ ] ì‚¬ìš©ì í´ë¦­ ì´ë²¤íŠ¸ í›„ ê¶Œí•œ ìš”ì²­í•˜ëŠ”ê°€?
- [ ] `DeviceOrientationEvent.requestPermission()` í˜¸ì¶œí•˜ëŠ”ê°€?
- [ ] Safari ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•˜ëŠ”ê°€? (Chromeì€ ë¶ˆê°€)

---

#### Q4: ì—¬ëŸ¬ ëª…ì´ ë™ì‹œì— í”Œë ˆì´í•  ìˆ˜ ìˆë‚˜ìš”?

**A:** ë„¤! ê²Œì„ íƒ€ì…ì— ë”°ë¼ ë‹¤ë¦…ë‹ˆë‹¤.

**ê²Œì„ íƒ€ì…:**

1. **Solo (1ëª…)**
```javascript
const sdk = new SessionSDK({
    gameId: 'your-game',
    gameType: 'solo'  // ì„¼ì„œ 1ê°œë§Œ ì—°ê²° ê°€ëŠ¥
});
```

2. **Dual (2ëª…)**
```javascript
const sdk = new SessionSDK({
    gameId: 'your-game',
    gameType: 'dual'  // ì„¼ì„œ 2ê°œ ì—°ê²° (sensor1, sensor2)
});

sdk.on('sensor-data', (event) => {
    const data = event.detail || event;

    if (data.sensorId === 'sensor1') {
        // í”Œë ˆì´ì–´ 1 ì¡°ì‘
    } else if (data.sensorId === 'sensor2') {
        // í”Œë ˆì´ì–´ 2 ì¡°ì‘
    }
});
```

3. **Multi (ìµœëŒ€ 8ëª…)**
```javascript
const sdk = new SessionSDK({
    gameId: 'your-game',
    gameType: 'multi'  // ì„¼ì„œ ìµœëŒ€ 8ê°œ (player1 ~ player8)
});

sdk.on('sensor-connected', (event) => {
    const data = event.detail || event;
    console.log(`í”Œë ˆì´ì–´ ${data.sensorId} ì°¸ê°€!`);
});

sdk.on('sensor-data', (event) => {
    const data = event.detail || event;
    // data.sensorId = 'player1', 'player2', ...
});
```

---

#### Q5: ê²Œì„ì„ ë‹¤ë¥¸ ì‚¬ëŒê³¼ ê³µìœ í•˜ë ¤ë©´?

**A:** ì—¬ëŸ¬ ë°©ë²•ì´ ìˆìŠµë‹ˆë‹¤.

**ë°©ë²• 1: Git ì €ì¥ì†Œ**
```bash
# GitHubì— í‘¸ì‹œ
git add public/games/your-game/
git commit -m "Add my awesome game"
git push origin main

# ë‹¤ë¥¸ ì‚¬ëŒì´ ë‹¤ìš´ë¡œë“œ
git clone https://github.com/yourusername/repo.git
cd repo
npm install
npm start
```

**ë°©ë²• 2: ZIP íŒŒì¼**
```bash
# ê²Œì„ í´ë” ì••ì¶•
cd public/games
zip -r your-game.zip your-game/

# ë‹¤ë¥¸ ì‚¬ëŒì´ ì••ì¶• í•´ì œ
unzip your-game.zip -d public/games/
```

**ë°©ë²• 3: Developer Center** (ì¶”ì²œ)
```
1. ê²Œì„ì„ public/games/ í´ë”ì— ë°°ì¹˜
2. http://localhost:3000/developer ì ‘ì†
3. "ê²Œì„ ëª©ë¡" íƒ­ì—ì„œ ìë™ìœ¼ë¡œ í‘œì‹œ
4. ë‹¤ìš´ë¡œë“œ ë§í¬ ê³µìœ 
```

---

#### Q6: AI ê²Œì„ ìƒì„±ê¸°ë¡œ ë§Œë“  ê²Œì„ì„ ìˆ˜ì •í•  ìˆ˜ ìˆë‚˜ìš”?

**A:** ë¬¼ë¡ ì…ë‹ˆë‹¤! ìƒì„±ëœ ê²Œì„ì€ ì™„ì „íˆ ìˆ˜ì • ê°€ëŠ¥í•©ë‹ˆë‹¤.

**ìˆ˜ì • ë°©ë²•:**

```bash
# 1. ìƒì„±ëœ ê²Œì„ ìœ„ì¹˜
public/games/ai-generated-game-XXXXX/index.html

# 2. ì—ë””í„°ë¡œ ì—´ê¸°
code public/games/ai-generated-game-XXXXX/index.html

# 3. ì½”ë“œ ìˆ˜ì •
# - ìƒ‰ìƒ ë³€ê²½
# - ê²Œì„ ë¡œì§ ìˆ˜ì •
# - ìƒˆë¡œìš´ ê¸°ëŠ¥ ì¶”ê°€

# 4. ì„œë²„ ì¬ì‹œì‘ ì—†ì´ ë°”ë¡œ í™•ì¸
# ë¸Œë¼ìš°ì € ìƒˆë¡œê³ ì¹¨ë§Œ í•˜ë©´ ë¨!
```

**ìì£¼ ìˆ˜ì •í•˜ëŠ” ë¶€ë¶„:**

```javascript
// ìƒ‰ìƒ ë³€ê²½
const COLORS = {
    ball: '#ff0000',      // ë¹¨ê°• â†’ íŒŒë‘ìœ¼ë¡œ ë³€ê²½
    paddle: '#00ff00',
    background: '#000000'
};

// ë‚œì´ë„ ì¡°ì ˆ
const DIFFICULTY = {
    ballSpeed: 5,         // ê³µ ì†ë„ ì¦ê°€
    paddleSize: 100,      // íŒ¨ë“¤ í¬ê¸° ê°ì†Œ
    gravity: 0.5          // ì¤‘ë ¥ ì¦ê°€
};

// ê²Œì„ ê·œì¹™ ìˆ˜ì •
function checkGameOver() {
    if (ball.y > canvas.height) {
        lives--;  // ëª©ìˆ¨ -1 â†’ -2ë¡œ ë³€ê²½
        if (lives <= 0) {
            endGame();
        }
    }
}
```

---

#### Q7: ê²Œì„ì´ ëª¨ë°”ì¼ì—ì„œ ëŠë ¤ìš”!

**A:** ì„±ëŠ¥ ìµœì í™”ê°€ í•„ìš”í•©ë‹ˆë‹¤.

**ìµœì í™” ì²´í¬ë¦¬ìŠ¤íŠ¸:**

```javascript
// 1. Canvas í¬ê¸° ìµœì í™”
const canvas = document.getElementById('game-canvas');
const maxWidth = 800;  // ìµœëŒ€ ë„ˆë¹„ ì œí•œ
const maxHeight = 600;

if (window.innerWidth > maxWidth) {
    canvas.width = maxWidth;
    canvas.height = maxHeight;
} else {
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
}

// 2. í”„ë ˆì„ ì œí•œ (ëª¨ë°”ì¼ì€ 30 FPSë„ ì¶©ë¶„)
let lastFrameTime = 0;
const targetFPS = 30;
const frameDelay = 1000 / targetFPS;

function gameLoop(timestamp) {
    if (timestamp - lastFrameTime < frameDelay) {
        requestAnimationFrame(gameLoop);
        return;
    }
    lastFrameTime = timestamp;

    update();
    render();
    requestAnimationFrame(gameLoop);
}

// 3. ë¶ˆí•„ìš”í•œ ë Œë”ë§ ì œê±°
let dirtyFlag = false;

function update(deltaTime) {
    // ë³€ê²½ì‚¬í•­ì´ ìˆì„ ë•Œë§Œ ë Œë”ë§
    if (ball.x !== lastBallX || ball.y !== lastBallY) {
        dirtyFlag = true;
    }
}

function render() {
    if (!dirtyFlag) return;

    // ë Œë”ë§...
    dirtyFlag = false;
}

// 4. ì´ë¯¸ì§€ ìµœì í™”
const img = new Image();
img.src = 'sprite.png';

// ë¯¸ë¦¬ ë¡œë“œ
await new Promise((resolve) => {
    img.onload = resolve;
});

// 5. ë³µì¡í•œ ê³„ì‚° ì¤„ì´ê¸°
// âŒ ë§¤ í”„ë ˆì„ Math.sqrt() í˜¸ì¶œ
const distance = Math.sqrt(dx * dx + dy * dy);

// âœ… ê±°ë¦¬ ì œê³± ë¹„êµ (Math.sqrt ë¶ˆí•„ìš”)
const distanceSquared = dx * dx + dy * dy;
if (distanceSquared < radius * radius) {
    // ì¶©ëŒ!
}
```

---

#### Q8: ê²Œì„ì— ì‚¬ìš´ë“œë¥¼ ì¶”ê°€í•˜ë ¤ë©´?

**A:** Web Audio API ë˜ëŠ” HTML5 Audioë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

**ë°©ë²• 1: HTML5 Audio (ê°„ë‹¨)**

```javascript
class SoundManager {
    constructor() {
        this.sounds = {
            bounce: new Audio('assets/sounds/bounce.mp3'),
            gameOver: new Audio('assets/sounds/gameover.mp3'),
            score: new Audio('assets/sounds/score.mp3')
        };

        // ì‚¬ìš´ë“œ ë¯¸ë¦¬ ë¡œë“œ
        Object.values(this.sounds).forEach(sound => {
            sound.preload = 'auto';
            sound.volume = 0.5;
        });
    }

    play(soundName) {
        const sound = this.sounds[soundName];
        if (sound) {
            sound.currentTime = 0;  // ì²˜ìŒë¶€í„° ì¬ìƒ
            sound.play().catch(err => {
                console.warn('ì‚¬ìš´ë“œ ì¬ìƒ ì‹¤íŒ¨:', err);
            });
        }
    }

    setVolume(volume) {
        Object.values(this.sounds).forEach(sound => {
            sound.volume = volume;
        });
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const soundManager = new SoundManager();

function checkCollision(ball, paddle) {
    if (collides(ball, paddle)) {
        soundManager.play('bounce');
        return true;
    }
}

function gameOver() {
    soundManager.play('gameOver');
}
```

**ë°©ë²• 2: Web Audio API (ê³ ê¸‰)**

```javascript
class WebAudioManager {
    constructor() {
        this.audioContext = new (window.AudioContext || window.webkitAudioContext)();
        this.buffers = {};
    }

    async loadSound(name, url) {
        const response = await fetch(url);
        const arrayBuffer = await response.arrayBuffer();
        this.buffers[name] = await this.audioContext.decodeAudioData(arrayBuffer);
    }

    play(name, options = {}) {
        const buffer = this.buffers[name];
        if (!buffer) return;

        const source = this.audioContext.createBufferSource();
        source.buffer = buffer;

        // ë³¼ë¥¨ ì¡°ì ˆ
        const gainNode = this.audioContext.createGain();
        gainNode.gain.value = options.volume || 0.5;

        // ì—°ê²°
        source.connect(gainNode);
        gainNode.connect(this.audioContext.destination);

        // ì¬ìƒ
        source.start(0);
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const audioManager = new WebAudioManager();

// ì´ˆê¸°í™” ì‹œ ë¡œë“œ
async function init() {
    await audioManager.loadSound('bounce', 'assets/sounds/bounce.mp3');
    await audioManager.loadSound('gameOver', 'assets/sounds/gameover.mp3');

    console.log('ì‚¬ìš´ë“œ ë¡œë“œ ì™„ë£Œ!');
}

// ì¬ìƒ
audioManager.play('bounce', { volume: 0.7 });
```

**ë¬´ë£Œ ì‚¬ìš´ë“œ ë¦¬ì†ŒìŠ¤:**
- [Freesound.org](https://freesound.org/)
- [OpenGameArt.org](https://opengameart.org/)
- [Zapsplat.com](https://www.zapsplat.com/)

---

#### Q9: ê²Œì„ ì ìˆ˜ë¥¼ ì €ì¥í•˜ë ¤ë©´?

**A:** LocalStorage ë˜ëŠ” ì„œë²„ APIë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.

**ë°©ë²• 1: LocalStorage (ë¡œì»¬ ì €ì¥)**

```javascript
class ScoreManager {
    constructor(gameId) {
        this.gameId = gameId;
        this.storageKey = `game_scores_${gameId}`;
    }

    saveScore(playerName, score) {
        const scores = this.getScores();

        scores.push({
            playerName,
            score,
            timestamp: Date.now()
        });

        // ìƒìœ„ 10ê°œë§Œ ìœ ì§€
        scores.sort((a, b) => b.score - a.score);
        const top10 = scores.slice(0, 10);

        localStorage.setItem(this.storageKey, JSON.stringify(top10));
    }

    getScores() {
        const data = localStorage.getItem(this.storageKey);
        return data ? JSON.parse(data) : [];
    }

    getHighScore() {
        const scores = this.getScores();
        return scores.length > 0 ? scores[0].score : 0;
    }

    clearScores() {
        localStorage.removeItem(this.storageKey);
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const scoreManager = new ScoreManager('tilt-ball-maze');

function gameOver() {
    const playerName = prompt('ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:');
    scoreManager.saveScore(playerName, currentScore);

    // ë¦¬ë”ë³´ë“œ í‘œì‹œ
    const scores = scoreManager.getScores();
    displayLeaderboard(scores);
}

function displayLeaderboard(scores) {
    const html = scores.map((s, index) => `
        <div class="score-entry">
            <span class="rank">${index + 1}</span>
            <span class="name">${s.playerName}</span>
            <span class="score">${s.score}</span>
        </div>
    `).join('');

    document.getElementById('leaderboard').innerHTML = html;
}
```

**ë°©ë²• 2: ì„œë²„ API (ê¸€ë¡œë²Œ ìˆœìœ„)**

```javascript
class OnlineScoreManager {
    constructor(gameId, apiUrl = '/api/scores') {
        this.gameId = gameId;
        this.apiUrl = apiUrl;
    }

    async saveScore(playerName, score) {
        try {
            const response = await fetch(`${this.apiUrl}/${this.gameId}`, {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ playerName, score })
            });

            const result = await response.json();
            return result;
        } catch (error) {
            console.error('ì ìˆ˜ ì €ì¥ ì‹¤íŒ¨:', error);
        }
    }

    async getScores(limit = 10) {
        try {
            const response = await fetch(`${this.apiUrl}/${this.gameId}?limit=${limit}`);
            const scores = await response.json();
            return scores;
        } catch (error) {
            console.error('ì ìˆ˜ ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨:', error);
            return [];
        }
    }

    async getPlayerRank(playerName) {
        try {
            const response = await fetch(`${this.apiUrl}/${this.gameId}/rank/${playerName}`);
            const data = await response.json();
            return data.rank;
        } catch (error) {
            console.error('ë­í‚¹ ì¡°íšŒ ì‹¤íŒ¨:', error);
            return null;
        }
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const scoreManager = new OnlineScoreManager('tilt-ball-maze');

async function gameOver() {
    const playerName = prompt('ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:');
    await scoreManager.saveScore(playerName, currentScore);

    // ê¸€ë¡œë²Œ ìˆœìœ„ í‘œì‹œ
    const scores = await scoreManager.getScores(10);
    displayLeaderboard(scores);

    // ë‚´ ìˆœìœ„ í‘œì‹œ
    const myRank = await scoreManager.getPlayerRank(playerName);
    alert(`ë‹¹ì‹ ì˜ ìˆœìœ„: ${myRank}ìœ„`);
}
```

---

#### Q10: ê²Œì„ì„ PC í‚¤ë³´ë“œë¡œë„ í”Œë ˆì´í•  ìˆ˜ ìˆê²Œ í•˜ë ¤ë©´?

**A:** í‚¤ë³´ë“œ ì´ë²¤íŠ¸ì™€ ì„¼ì„œ ë°ì´í„°ë¥¼ í†µí•©í•˜ì„¸ìš”.

```javascript
class InputManager {
    constructor(sdk) {
        this.sdk = sdk;
        this.keyState = {};
        this.simulatedOrientation = { gamma: 0, beta: 0 };

        this.setupKeyboard();
        this.setupSensor();
    }

    setupKeyboard() {
        // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
        window.addEventListener('keydown', (e) => {
            this.keyState[e.key] = true;
        });

        window.addEventListener('keyup', (e) => {
            this.keyState[e.key] = false;
        });

        // í‚¤ë³´ë“œ ì…ë ¥ì„ ì„¼ì„œ ë°ì´í„°ë¡œ ë³€í™˜
        setInterval(() => {
            if (this.keyState['ArrowLeft']) {
                this.simulatedOrientation.gamma = Math.max(-45, this.simulatedOrientation.gamma - 5);
            } else if (this.keyState['ArrowRight']) {
                this.simulatedOrientation.gamma = Math.min(45, this.simulatedOrientation.gamma + 5);
            } else {
                // ì¤‘ì•™ìœ¼ë¡œ ë³µê·€
                this.simulatedOrientation.gamma *= 0.9;
            }

            if (this.keyState['ArrowUp']) {
                this.simulatedOrientation.beta = Math.max(-45, this.simulatedOrientation.beta - 5);
            } else if (this.keyState['ArrowDown']) {
                this.simulatedOrientation.beta = Math.min(45, this.simulatedOrientation.beta + 5);
            } else {
                this.simulatedOrientation.beta *= 0.9;
            }

            // ì‹œë®¬ë ˆì´ì…˜ëœ ì„¼ì„œ ë°ì´í„° ì „ì†¡
            if (!this.sensorActive && (this.keyState['ArrowLeft'] || this.keyState['ArrowRight'] ||
                this.keyState['ArrowUp'] || this.keyState['ArrowDown'])) {
                this.emitSimulatedData();
            }
        }, 50);
    }

    setupSensor() {
        // ì‹¤ì œ ì„¼ì„œ ë°ì´í„° ìˆ˜ì‹ 
        this.sdk.on('sensor-data', (event) => {
            const data = event.detail || event;
            this.sensorActive = true;

            // ì‹¤ì œ ì„¼ì„œ ë°ì´í„° ìš°ì„ 
            this.processSensorData(data.data);
        });
    }

    emitSimulatedData() {
        // í‚¤ë³´ë“œ ì…ë ¥ì„ ì„¼ì„œ í˜•ì‹ìœ¼ë¡œ ë³€í™˜
        this.processSensorData({
            orientation: this.simulatedOrientation,
            acceleration: { x: 0, y: 9.8, z: 0 },
            rotationRate: { alpha: 0, beta: 0, gamma: 0 }
        });
    }

    processSensorData(data) {
        // í†µí•©ëœ ì…ë ¥ ì²˜ë¦¬
        // (ì‹¤ì œ ì„¼ì„œ ë˜ëŠ” í‚¤ë³´ë“œ ì‹œë®¬ë ˆì´ì…˜)
        updateGameLogic(data.orientation);
    }
}

// ì‚¬ìš© ì˜ˆì‹œ
const inputManager = new InputManager(sdk);

// ê²Œì„ì—ì„œëŠ” inputManagerë¥¼ í†µí•´ ì…ë ¥ ì²˜ë¦¬
// ì„¼ì„œì™€ í‚¤ë³´ë“œ ëª¨ë‘ ìë™ ì§€ì›!
```

**ì‚¬ìš©ìì—ê²Œ ì•ˆë‚´:**

```html
<div id="controls-info">
    <h3>ì¡°ì‘ ë°©ë²•</h3>
    <ul>
        <li><strong>ìŠ¤ë§ˆíŠ¸í°:</strong> ê¸°ê¸°ë¥¼ ê¸°ìš¸ì—¬ ì¡°ì‘</li>
        <li><strong>PC:</strong> ë°©í–¥í‚¤(â† â†’ â†‘ â†“)ë¡œ ì¡°ì‘</li>
    </ul>
</div>
```

---

### 10.3 ì¶”ê°€ ë¦¬ì†ŒìŠ¤

#### í•™ìŠµ ìë£Œ

**ê³µì‹ ë¬¸ì„œ:**
- [SessionSDK API Reference](http://localhost:3000/developer) - Part 8 ì°¸ì¡°
- [ê²Œì„ ê°œë°œ í…œí”Œë¦¿](../GAME_TEMPLATE.html)
- [ê°œë°œì ê°€ì´ë“œ](../DEVELOPER_GUIDE.md)

**ì™¸ë¶€ ë¦¬ì†ŒìŠ¤:**
- [MDN Web Docs - Canvas API](https://developer.mozilla.org/en-US/docs/Web/API/Canvas_API)
- [MDN - DeviceOrientation API](https://developer.mozilla.org/en-US/docs/Web/API/DeviceOrientationEvent)
- [HTML5 Game Development Tutorial](https://developer.mozilla.org/en-US/docs/Games)

**ìœ ìš©í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬:**
- [Matter.js](https://brm.io/matter-js/) - 2D ë¬¼ë¦¬ ì—”ì§„
- [Howler.js](https://howlerjs.com/) - ì˜¤ë””ì˜¤ ë¼ì´ë¸ŒëŸ¬ë¦¬
- [Pixi.js](https://pixijs.com/) - ê³ ì„±ëŠ¥ 2D ë Œë”ë§

#### ì»¤ë®¤ë‹ˆí‹° ë° ì§€ì›

**ë¬¸ì œ ë³´ê³ :**
- GitHub Issues: [í”„ë¡œì íŠ¸ ì €ì¥ì†Œ]
- ë²„ê·¸ ë¦¬í¬íŠ¸: GameMaintenanceManager API ì‚¬ìš©

**ì§ˆë¬¸ ë° í† ë¡ :**
- Developer Center í¬ëŸ¼
- Discord ì»¤ë®¤ë‹ˆí‹° (í–¥í›„ ì¶”ê°€ ì˜ˆì •)

**ê¸°ì—¬í•˜ê¸°:**
1. Fork ì €ì¥ì†Œ
2. ìƒˆ ë¸Œëœì¹˜ ìƒì„± (`git checkout -b feature/amazing-feature`)
3. ë³€ê²½ì‚¬í•­ ì»¤ë°‹ (`git commit -m 'Add amazing feature'`)
4. ë¸Œëœì¹˜ í‘¸ì‹œ (`git push origin feature/amazing-feature`)
5. Pull Request ìƒì„±

---

## ë§ˆì¹˜ë©°

ğŸ‰ **ì¶•í•˜í•©ë‹ˆë‹¤!** ê°œë°œì ì˜¨ë³´ë”© ê°€ì´ë“œë¥¼ ëª¨ë‘ ë§ˆì³¤ìŠµë‹ˆë‹¤.

ì´ì œ ì—¬ëŸ¬ë¶„ì€ Sensor Game Hub v6.0ì—ì„œ ì„¼ì„œ ê¸°ë°˜ ê²Œì„ì„ ê°œë°œí•˜ëŠ” ë° í•„ìš”í•œ ëª¨ë“  ì§€ì‹ì„ ê°–ì¶”ì…¨ìŠµë‹ˆë‹¤.

### ë‹¤ìŒ ë‹¨ê³„

1. **ì²« ê²Œì„ ë§Œë“¤ê¸°**: [GAME_TEMPLATE.html](../GAME_TEMPLATE.html)ì„ ë³µì‚¬í•˜ì—¬ ì‹œì‘í•˜ì„¸ìš”
2. **AI ê²Œì„ ìƒì„±ê¸° ì‚¬ìš©**: [Developer Center](http://localhost:3000/developer)ì—ì„œ ì•„ì´ë””ì–´ë¥¼ ê²Œì„ìœ¼ë¡œ ë³€í™˜í•˜ì„¸ìš”
3. **ê¸°ì¡´ ê²Œì„ ë¶„ì„**: [public/games/](../../public/games/) í´ë”ì˜ ì˜ˆì œ ê²Œì„ë“¤ì„ ì‚´í´ë³´ì„¸ìš”
4. **ì»¤ë®¤ë‹ˆí‹° ì°¸ì—¬**: ë‹¤ë¥¸ ê°œë°œìë“¤ê³¼ ê²Œì„ì„ ê³µìœ í•˜ê³  í”¼ë“œë°±ì„ ë°›ìœ¼ì„¸ìš”

### ë„ì›€ì´ í•„ìš”í•˜ì‹ ê°€ìš”?

- ğŸ“š **ë¬¸ì„œ**: ì´ ê°€ì´ë“œì˜ Part 1-9 ì°¸ì¡°
- ğŸ› **ë²„ê·¸ ë¦¬í¬íŠ¸**: GameMaintenanceManager API ì‚¬ìš©
- ğŸ’¡ **ì•„ì´ë””ì–´**: AI ê²Œì„ ìƒì„±ê¸°ë¡œ í”„ë¡œí† íƒ€ì… ì œì‘
- ğŸ¤ **í˜‘ì—…**: Gitì„ í†µí•´ ë‹¤ë¥¸ ê°œë°œìì™€ í˜‘ì—…

**Happy Coding! ğŸ®âœ¨**

---

*ë§ˆì§€ë§‰ ì—…ë°ì´íŠ¸: 2025-10-09*
*ë²„ì „: v6.0.0*
*ì‘ì„±ì: Sensor Game Hub Team*

